//>>built
(function(c,d){var b,i,g,l=function(){},e=function(a){for(var b in a)return 0;return 1},k={}.toString,h=function(a){return"[object Function]"==k.call(a)},a=function(a){return"[object String]"==k.call(a)},f=function(a){return"[object Array]"==k.call(a)},j=function(a,b){if(a)for(var c=0;c<a.length;)b(a[c++])},m=function(a,b){for(var c in b)a[c]=b[c];return a},q=function(a,b){return m(Error(a),{src:"dojoLoader",info:b})},p=1,o=function(){return"_"+p++},n=function(a,b,c){return ka(a,b,c,0,n)},u=this,
I=u.document,F=I&&I.createElement("DiV"),r=n.has=function(a){return h(s[a])?s[a]=s[a](u,I,F):s[a]},s=r.cache=d.hasCache;r.add=function(a,b,c,f){(void 0===s[a]||f)&&(s[a]=b);return c&&r(a)};for(var t in c.has)r.add(t,c.has[t],0,1);n.async=1;var z=new Function("return eval(arguments[0]);");n.eval=function(a,b){return z(a+"\r\n////@ sourceURL="+b)};var x={},v=n.signal=function(a,b){var c=x[a];j(c&&c.slice(0),function(a){a.apply(null,f(b)?b:[b])})},L=n.on=function(a,b){var c=x[a]||(x[a]=[]);c.push(b);
return{remove:function(){for(var a=0;a<c.length;a++)if(c[a]===b){c.splice(a,1);break}}}},y=[],$={},la=[],aa={},W=n.map={},P=[],B={},X="",N={},Y={};t={};var J=function(a){var b,c,f,j;for(b in Y)c=Y[b],(f=b.match(/^url\:(.+)/))?N["url:"+Ia(f[1],a)]=c:"*now"==b?j=c:"*noref"!=b&&(f=ra(b,a),N[f.mid]=N["url:"+f.url]=c);j&&j(M(a));Y={}},ba=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},ca=function(a,b){b.splice(0,b.length);for(var c in a)b.push([c,a[c],RegExp("^"+
ba(c)+"(/|$)"),c.length]);b.sort(function(a,b){return b[3]-a[3]});return b},da=function(a){var b=a.name;b||(b=a,a={name:b});a=m({main:"main"},a);a.location=a.location?a.location:b;if(a.packageMap)W[b]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);aa[b]=a},ma=[],O=function(b,c,f){for(var e in b){if("waitSeconds"==e)n.waitms=1E3*(b[e]||0);"cacheBust"==e&&(X=b[e]?a(b[e])?b[e]:(new Date).getTime()+"":"");if("baseUrl"==e||"combo"==e)n[e]=b[e];b[e]!==s&&(n.rawConfig[e]=b[e],"has"!=e&&
r.add("config-"+e,b[e],0,c))}if(!n.baseUrl)n.baseUrl="./";/\/$/.test(n.baseUrl)||(n.baseUrl+="/");for(e in b.has)r.add(e,b.has[e],0,c);j(b.packages,da);for(g in b.packagePaths)j(b.packagePaths[g],function(b){var c=g+"/"+b;a(b)&&(b={name:b});b.location=c;da(b)});ca(m(W,b.map),P);j(P,function(a){a[1]=ca(a[1],[]);if("*"==a[0])P.star=a});ca(m($,b.paths),la);j(b.aliases,function(b){a(b[0])&&(b[0]=RegExp("^"+ba(b[0])+"$"));y.push(b)});if(c)ma.push({config:b.config});else for(e in b.config)c=Z(e,f),c.config=
m(c.config||{},b.config[e]);if(b.cache)J(),Y=b.cache,b.cache["*noref"]&&J();v("config",[b,n.rawConfig])};n.rawConfig={};O(d,1);O(c,1);O(t,1);var H=function(a){C(function(){j(a.deps,Ka)})},ka=function(b,c,j,e,h){var d;if(a(b)){if((d=Z(b,e,!0))&&d.executed)return d.result;throw q("undefinedModule",b);}f(b)||(O(b,0,e),b=c,c=j);if(f(b))if(b.length){for(var j="require*"+o(),g,i=[],k=0;k<b.length;)g=b[k++],i.push(Z(g,e));d=m(sa("",j,0,""),{injected:2,deps:i,def:c||l,require:e?e.require:n,gc:1});B[d.mid]=
d;H(d);var p=ea&&0!="sync";C(function(){na(d,p)});d.executed||K.push(d);A()}else c&&c();return h},M=function(a){if(!a)return n;var b=a.require;if(!b)b=function(c,f,j){return ka(c,f,j,a,b)},a.require=m(b,n),b.module=a,b.toUrl=function(b){return Ia(b,a)},b.toAbsMid=function(b){return fa(b,a)};return b},K=[],D=[],G={},Ua=function(a){a.injected=1;G[a.mid]=1;a.url&&(G[a.url]=a.pack||1);ta()},pa=function(a){a.injected=2;delete G[a.mid];a.url&&delete G[a.url];e(G)&&oa()},Va=n.idle=function(){return!D.length&&
e(G)&&!K.length&&!ea},Da=function(a,b){if(b)for(var c=0;c<b.length;c++)if(b[c][2].test(a))return b[c];return 0},La=function(a){for(var b=[],c,f,a=a.replace(/\\/g,"/").split("/");a.length;)c=a.shift(),".."==c&&b.length&&".."!=f?(b.pop(),f=b[b.length-1]):"."!=c&&b.push(f=c);return b.join("/")},sa=function(a,b,c,f){return{pid:a,mid:b,pack:c,url:f,executed:0,def:0}},Ma=function(a,c,f,e,m,d,g,i){var l,k,n,o;o=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||o&&!c)return sa(0,a,0,a);a=La(o?c.mid+"/../"+a:
a);if(/^\./.test(a))throw q("irrationalPath",a);c&&(n=Da(c.mid,d));(n=(n=n||d.star)&&Da(a,n[1]))&&(a=n[1]+a.substring(n[3]));c=(b=a.match(/^([^\/]+)(\/(.+))?$/))?b[1]:"";(l=f[c])?a=c+"/"+(k=b[3]||l.main):c="";var p=0;j(y,function(b){var c=a.match(b[0]);c&&0<c.length&&(p=h(b[1])?a.replace(b[0],b[1]):b[1])});if(p)return Ma(p,0,f,e,m,d,g,i);if(f=e[a])return i?sa(f.pid,f.mid,f.pack,f.url):e[a];e=(n=Da(a,g))?n[1]+a.substring(n[3]):c?l.location+"/"+k:a;/(^\/)|(\:)/.test(e)||(e=m+e);return sa(c,a,l,La(e+
".js"))},ra=function(a,b){return Ma(a,b,aa,B,n.baseUrl,P,la)},Na=function(a,b,c){return a.normalize?a.normalize(b,function(a){return fa(a,c)}):fa(b,c)},Oa=0,Z=function(a,b,c){var f,j;(f=a.match(/^(.+?)\!(.*)$/))?(j=Z(f[1],b,c),5===j.executed&&!j.load&&ga(j),j.load?(f=Na(j,f[2],b),a=j.mid+"!"+(j.dynamic?++Oa+"!":"")+f):(f=f[2],a=j.mid+"!"+ ++Oa+"!waitingForPlugin"),a={plugin:j,mid:a,req:M(b),prid:f}):a=ra(a,b);return B[a.mid]||!c&&(B[a.mid]=a)},fa=n.toAbsMid=function(a,b){return ra(a,b).mid},Ia=n.toUrl=
function(a,b){var c=ra(a+"/x",b),f=c.url;return T(0===c.pid?a:f.substring(0,f.length-5))},Ea={injected:2,executed:5,def:3,result:3},Q=function(a){return B[a]=m({mid:a},Ea)},Wa=Q("require"),Xa=Q("exports"),Pa=Q("module"),ua={},Fa=0,ga=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Qa=function(a){var b={};j(a.loadQ,function(c){var f=Na(a,c.prid,c.req.module),j=a.dynamic?c.mid.replace(/waitingForPlugin$/,f):a.mid+"!"+f,f=m(m({},c),{mid:j,prid:f,injected:0});
B[j]||va(B[j]=f);b[c.mid]=B[j];pa(c);delete B[c.mid]});a.loadQ=0;var c=function(a){for(var c=a.deps||[],f=0;f<c.length;f++)(a=b[c[f].mid])&&(c[f]=a)},f;for(f in B)c(B[f]);j(K,c)},U=function(a){n.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Fa++;a.loadQ&&(ga(a),Qa(a));for(i=0;i<K.length;)K[i]===a?K.splice(i,1):i++;/^require\*/.test(a.mid)&&delete B[a.mid]},E=[],na=function(a,b){if(4===a.executed)return n.trace("loader-circular-dependency",[E.concat(a.mid).join("->")]),!a.def||b?ua:a.cjs&&
a.cjs.exports;if(!a.executed){if(!a.def)return ua;var c=a.mid,f=a.deps||[],j,e=[],m=0;for(a.executed=4;m<f.length;){j=f[m++];j=j===Wa?M(a):j===Xa?a.cjs.exports:j===Pa?a.cjs:na(j,b);if(j===ua)return a.executed=0,n.trace("loader-exec-module",["abort",c]),ua;e.push(j)}n.trace("loader-run-factory",[a.mid]);c=a.def;e=h(c)?c.apply(null,e):c;a.result=void 0===e&&a.cjs?a.cjs.exports:e;U(a)}return a.result},ea=0,C=function(a){try{ea++,a()}finally{ea--}Va()&&v("idle",[])},A=function(){ea||C(function(){for(var a,
b,c=0;c<K.length;)a=Fa,b=K[c],na(b),a!=Fa?c=0:c++})};void 0===r("dojo-loader-eval-hint-url")&&r.add("dojo-loader-eval-hint-url",1);var T=function(a){a+="";return a+(X?(/\?/.test(a)?"&":"?")+X:"")},va=function(a){var b=a.plugin;5===b.executed&&!b.load&&ga(b);var c=function(b){a.result=b;pa(a);U(a);A()};b.load?b.load(a.prid,a.req,c):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],K.unshift(b),Ka(b))},wa=0,Ga=0,R=0,xa=function(a,b){r("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));R=1;a===wa?wa.call(null):
n.eval(a,r("dojo-loader-eval-hint-url")?b.url:b.mid);R=0},Ka=function(a){var b=a.mid,c=a.url;if(!a.executed&&!a.injected&&!(G[b]||a.url&&(a.pack&&G[a.url]===a.pack||1==G[a.url])))if(Ua(a),a.plugin)va(a);else{var f=function(){ya(a);2!==a.injected&&(pa(a),m(a,Ea),n.trace("loader-define-nonmodule",[a.url]));A()};(wa=N[b]||N["url:"+a.url])?(n.trace("loader-inject",["cache",a.mid,c]),xa(wa,a),f()):(n.trace("loader-inject",["script",a.mid,c]),Ga=a,n.injectUrl(T(c),f,a),Ga=0)}},za=function(a,b,c){n.trace("loader-define-module",
[a.mid,b]);if(2===a.injected)return v("error",q("multipleDefine",a)),a;m(a,{deps:b,def:c,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var f=0;f<b.length;f++)b[f]=Z(b[f],a);pa(a);if(!h(c)&&!b.length)a.result=c,U(a);return a},ya=function(a,b){for(var c=[],f,e;D.length;)e=D.shift(),b&&(e[0]=b.shift()),f=e[0]&&Z(e[0])||a,c.push([f,e[1],e[2]]);J(a);j(c,function(a){H(za.apply(null,a))})},oa=l,ta=l;r.add("ie-event-behavior",
!!I.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ha=function(a,b,c,f){if(r("ie-event-behavior"))return a.attachEvent(c,f),function(){a.detachEvent(c,f)};a.addEventListener(b,f,!1);return function(){a.removeEventListener(b,f,!1)}},qa=ha(window,"load","onload",function(){n.pageLoaded=1;"complete"!=I.readyState&&(I.readyState="complete");qa()}),ia=I.getElementsByTagName("script")[0],Aa=ia.parentNode;n.injectUrl=function(a,b,c){var c=c.node=I.createElement("script"),
f=ha(c,"load","onreadystatechange",function(a){var a=a||window.event,c=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(c.readyState))f(),j(),b&&b()}),j=ha(c,"error","onerror",function(b){f();j();v("error",q("scriptError",[a,b]))});c.type="text/javascript";c.charset="utf-8";c.src=a;Aa.insertBefore(c,ia);return c};n.log=l;n.trace=l;Q=function(b,c,f){var j=arguments.length,e=["require","exports","module"],m=[0,b,c];1==j?m=[0,h(b)?e:[],b]:2==j&&a(b)?m=[b,h(c)?e:[],c]:3==j&&(m=[b,c,f]);
n.trace("loader-define",m.slice(0,2));if((j=m[0]&&Z(m[0]))&&!G[j.mid])H(za(j,m[1],m[2]));else if(!r("ie-event-behavior")||R)D.push(m);else{j=j||Ga;if(!j)for(b in G)if((e=B[b])&&e.node&&"interactive"===e.node.readyState){j=e;break}j?(J(j),H(za(j,m[1],m[2]))):v("error",q("ieDefineFailed",m[0]));A()}};Q.amd={vendor:"dojotoolkit.org"};m(m(n,d.loaderPatch),c.loaderPatch);L("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(c){}});m(n,{uid:o,cache:N,packs:aa});if(!u.define)u.define=
Q,u.require=n,j(ma,function(a){O(a)}),L=t.deps||c.deps||d.deps,t=t.callback||c.callback||d.callback,n.boot=L||t?[L||[],t]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"./",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../frozen-editor",name:"frozen-editor"},{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../frozen",main:"GameCore",name:"frozen"},
{location:"../lodash",main:"lodash",name:"lodash"},{location:"../game",main:"game",name:"game"}]});
require({cache:{"dist/game":function(){define([],1)},"game/game":function(){define("./state,./handleInput,./draw,frozen/box2d/BoxGame,./ui/CanvasDND,./ui/events".split(","),function(c,d,b,i,g){d=new i({canvasId:"canvas",handleInput:d,draw:b});c.game=d;new g;d.run()})},"game/state":function(){define(["./StateManager","dojo/dom","dojo/domReady!"],function(c,d){return new c({entities:[],joints:[],undoObjs:[],geometries:[],tool:"rectangle",toolType:"static",showStatic:!0,backImg:null,game:null,codeMirror:CodeMirror.fromTextArea(d.byId("output"),
{theme:"frozen",matchBrackets:!0,lineWrapping:!0,mode:"application/json"})})})},"game/StateManager":function(){define(["dcl","dcl/bases/Mixer"],function(c,d){return c(d,{})})},"dcl/dcl":function(){(function(c){"undefined"!=typeof define?define(["./mini"],c):"undefined"!=typeof module?module.exports=c(require("./mini")):dcl=c(dcl)})(function(c){function d(){}function b(b,c,g){var h=b||d,a=c||d,f=g||d,j=function(){var b;h.apply(this,arguments);try{b=f.apply(this,arguments)}catch(c){b=c}a.call(this,
arguments,b);if(b instanceof Error)throw b;return b};j.advices={b:b,a:c,f:g};return j}function i(b){return function(e,d){var h=e._m,a;h&&((a=+h.w[d]||0)&&a!=b&&c._e("set chaining",d,e,b,a),h.w[d]=b)}}var g=c(c.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});c.mix(c,{Advice:g,advise:function(b){return new g(b)},before:function(b){return new g({before:b})},after:function(b){return new g({after:b})},around:c.superCall,chainBefore:i(1),chainAfter:i(2),isInstanceOf:function(b,
c){if(b instanceof c)return!0;var d=b.constructor._m,h;if(d)for(d=d.b,h=d.length-1;0<=h;--h)if(d[h]===c)return!0;return!1},_sb:function(d,e,g,h){var h=h[g]=c._ec(e,g,"f"),a=c._ec(e,g,"b").reverse(),e=c._ec(e,g,"a"),h=d?c._st(h,1==d?function(a){return c._sc(a.reverse())}:c._sc,g):c._ss(h,g);return!a.length&&!e.length?h||function(){}:b(c._sc(a),c._sc(e),h)}});return c})},"dcl/mini":function(){(function(c){"undefined"!=typeof define?define([],c):"undefined"!=typeof module?module.exports=c():dcl=c()})(function(){function c(a,
f){var j=[0],e,m,d,k,r,s,t,z,x=0,v;if(a)if(a instanceof Array){k={};t=a.slice(0).reverse();for(z=t.length-1;0<=z;--z)if(m=t[z],m._u=m._u||i++,e=m._m){for(s=e.b,x=s.length-1;0<x;--x)v=s[x]._u,k[v]=(k[v]||0)+1;t[z]=s.slice(0)}else t[z]=[m];r={};a:for(;t.length;){for(z=0;z<t.length;++z)if(s=t[z],m=s[0],v=m._u,!k[v]){r[v]||(j.push(m),r[v]=1);s.shift();s.length?--k[s[0]._u]:t.splice(z,1);continue a}c._e("cycle",f,t)}a=a[0];x=j.length-((k=a._m)&&a===j[j.length-(x=k.b.length)]?x:1)-1}else a._u=a._u||i++,
j=j.concat((k=a._m)?k.b:a);e=a?c.delegate(a[l]):{};for(s=a&&(k=a._m)?c.delegate(k.w):{constructor:2};0<x;--x)if(m=j[x],k=m._m,h(e,k&&k.h||m[l]),k)for(v in t=k.w)s[v]=(+s[v]||0)|t[v];for(v in f)b(k=f[v])?s[v]=+s[v]||0:e[v]=k;r={b:j,h:f,w:s,c:{}};j[0]={_m:r,prototype:e};m=e;k=r.w;s=r.b;t=r.c;for(d in k)m[d]=c._sb(k[d],s,d,t);d=e[g];d._m=r;d[l]=e;j[0]=d;return c._p(d)}function d(a){this.f=a}function b(a){return a instanceof d}var i=0,g="constructor",l="prototype",e=function(){},k={},h,a,f,j,m;(h=function(a,
b){for(var c in b)a[c]=b[c]})(c,{mix:h,delegate:function(a){e[l]=a;a=new e;e[l]=null;return a},Super:d,superCall:function(a){return new d(a)},_p:function(a){return a},_e:function(a){throw Error("dcl: "+a);},_f:function(a,b){var c=a.f(b);c.ctr=a.ctr;return c},_ec:a=function(a,c,f){for(var j=a.length-1,e=[],m,d,h="f"==f;m=a[j];--j)if((d=m._m)?(d=d.h).hasOwnProperty(c)&&(b(d=d[c])?h?d.f:d=d[f]:h):h&&(d=m[l][c])&&d!==k[c])d.ctr=m,e.push(d);return e},_sc:j=function(a){var b=a.length,c;return!b?0:1==b?
(c=a[0],function(){c.apply(this,arguments)}):function(){for(var c=0;c<b;++c)a[c].apply(this,arguments)}},_ss:f=function(a,f){for(var j=0,e,m=k[f];e=a[j];++j)m=b(e)?a[j]=c._f(e,m,f):e;return f!=g?m:function(){m.apply(this,arguments)}},_st:m=function(a,f,j){for(var e=0,m,d,h=0;m=a[e];++e)b(m)&&(d=e-h,a[e]=c._f(m,!d?0:1==d?a[h]:f(a.slice(h,e)),j),h=e);d=e-h;return!d?0:1==d&&j!=g?a[h]:f(h?a.slice(h):a)},_sb:function(b,c,e,d){c=d[e]=a(c,e,"f");return(b?m(c,j,e):f(c,e))||function(){}}});return c})},"dcl/bases/Mixer":function(){(function(c){"undefined"!=
typeof define?define(["../mini"],c):"undefined"!=typeof module?module.exports=c(require("../mini")):dclBasesMixer=c(dcl)})(function(c){return c(null,{declaredClass:"dcl/bases/Mixer",constructor:function(d){c.mix(this,d)}})})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(c,d){if(7>=c("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(b){}var i={};i.byId=c("ie")?function(b,c){if("string"!=typeof b)return b;var g=c||d.doc,h=b&&g.getElementById(b);if(h&&(h.attributes.id.value==
b||h.id==b))return h;g=g.all[b];if(!g||g.nodeName)g=[g];for(var a=0;h=g[a++];)if(h.attributes&&h.attributes.id&&h.attributes.id.value==b||h.id==b)return h}:function(b,c){return("string"==typeof b?(c||d.doc).getElementById(b):b)||null};i.isDescendant=function(b,c){try{b=i.byId(b);for(c=i.byId(c);b;){if(b==c)return!0;b=b.parentNode}}catch(d){}return!1};c.add("css-user-select",function(b,c,d){if(!d)return!1;var b=d.style,c=["Khtml","O","ms","Moz","Webkit"],d=c.length,h="userSelect";do if("undefined"!==
typeof b[h])return h;while(d--&&(h=c[d]+"UserSelect"));return!1});var g=c("css-user-select");i.setSelectable=g?function(b,c){i.byId(b).style[g]=c?"":"none"}:function(b,c){var b=i.byId(b),d=b.getElementsByTagName("*"),h=d.length;if(c)for(b.removeAttribute("unselectable");h--;)d[h].removeAttribute("unselectable");else for(b.setAttribute("unselectable","on");h--;)d[h].setAttribute("unselectable","on")};return i})},"dojo/sniff":function(){define(["./has"],function(c){var d=navigator,b=d.userAgent,d=d.appVersion,
i=parseFloat(d);c.add("air",0<=b.indexOf("AdobeAIR"));c.add("khtml",0<=d.indexOf("Konqueror")?i:void 0);c.add("webkit",parseFloat(b.split("WebKit/")[1])||void 0);c.add("chrome",parseFloat(b.split("Chrome/")[1])||void 0);c.add("safari",0<=d.indexOf("Safari")&&!c("chrome")?parseFloat(d.split("Version/")[1]):void 0);c.add("mac",0<=d.indexOf("Macintosh"));c.add("quirks","BackCompat"==document.compatMode);c.add("ios",/iPhone|iPod|iPad/.test(b));c.add("android",parseFloat(b.split("Android ")[1])||void 0);
if(!c("webkit")){0<=b.indexOf("Opera")&&c.add("opera",9.8<=i?parseFloat(b.split("Version/")[1])||i:i);0<=b.indexOf("Gecko")&&!c("khtml")&&!c("webkit")&&c.add("mozilla",i);c("mozilla")&&c.add("ff",parseFloat(b.split("Firefox/")[1]||b.split("Minefield/")[1])||void 0);if(document.all&&!c("opera"))b=parseFloat(d.split("MSIE ")[1])||void 0,(d=document.documentMode)&&5!=d&&Math.floor(b)!=d&&(b=d),c.add("ie",b);c.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return c})},"dojo/has":function(){define(["require",
"module"],function(c){var d=c.has||function(){};d.add("touch","ontouchstart"in document);d.add("device-width",screen.availWidth||innerWidth);c=document.createElement("form");d.add("dom-attributes-explicit",0==c.attributes.length);d.add("dom-attributes-specified-flag",0<c.attributes.length&&40>c.attributes.length);d.clearElement=function(b){b.innerHTML="";return b};d.normalize=function(b,c){var g=b.match(/[\?:]|[^:\?]*/g),l=0,e=function(b){var c=g[l++];if(":"==c)return 0;if("?"==g[l++]){if(!b&&d(c))return e();
e(!0);return e(b)}return c||0};return(b=e())&&c(b)};d.load=function(b,c,d){b?c([b],d):d()};return d})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(c,d,b){var i={global:c.global,doc:this.document||null,body:function(b){b=b||c.doc;return b.body||b.getElementsByTagName("body")[0]},setContext:function(b,d){c.global=i.global=b;c.doc=i.doc=d},withGlobal:function(b,d,e,k){var h=c.global;try{return c.global=i.global=b,i.withDoc.call(null,b.document,d,e,k)}finally{c.global=
i.global=h}},withDoc:function(d,l,e,k){var h=i.doc,a=b("quirks"),f=b("ie"),j,m,q;try{c.doc=i.doc=d;c.isQuirks=b.add("quirks","BackCompat"==c.doc.compatMode,!0,!0);if(b("ie")&&(q=d.parentWindow)&&q.navigator)j=parseFloat(q.navigator.appVersion.split("MSIE ")[1])||void 0,(m=d.documentMode)&&5!=m&&Math.floor(j)!=m&&(j=m),c.isIE=b.add("ie",j,!0,!0);e&&"string"==typeof l&&(l=e[l]);return l.apply(e,k||[])}finally{c.doc=i.doc=h,c.isQuirks=b.add("quirks",a,!0,!0),c.isIE=b.add("ie",f,!0,!0)}}};d.mixin(c,i);
return i})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(c,d,b,i){var g,c={},l={},e={config:d,global:this,dijit:c,dojox:l},c={dojo:["dojo",e],dijit:["dijit",c],dojox:["dojox",l]},i=b.map&&b.map[i.id.match(/[^\/]+/)[0]];for(g in i)c[g]?c[g][0]=i[g]:c[g]=[i[g],{}];for(g in c)i=c[g],i[1]._scopeName=i[0],d.noGlobals||(this[i[0]]=i[1]);e.scopeMap=c;e.baseUrl=e.config.baseUrl=b.baseUrl;e.isAsync=b.async;e.locale=d.locale;d="$Rev: 30226 $".match(/\d+/);e.version=
{major:1,minor:8,patch:3,flag:"",revision:d?+d[0]:NaN,toString:function(){var b=e.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);e.exit=function(){};e.deprecated=e.experimental=function(){};e._hasResource={};return e})},"dojo/_base/config":function(){define(["../has","require"],function(c,d){var b={},i=d.rawConfig,g;for(g in i)b[g]=i[g];return b})},"dojo/_base/lang":function(){define(["./kernel",
"../has","../sniff"],function(c,d){d.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var b=d("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],i=b.length,g=function(a,b,j){var d,e=0,h=c.global;if(!j)if(a.length){d=a[e++];try{j=c.scopeMap[d]&&c.scopeMap[d][1]}catch(g){}j=j||(d in h?h[d]:b?h[d]={}:void 0)}else return h;for(;j&&(d=a[e++]);)j=d in j?j[d]:b?j[d]={}:void 0;return j},
l=Object.prototype.toString,e=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},k=/\{([^\}]+)\}/g,h={_extraNames:b,_mixin:function(a,c,j){var e,h,g,k={};for(e in c)if(h=c[e],!(e in a)||a[e]!==h&&(!(e in k)||k[e]!==h))a[e]=j?j(h):h;if(d("bug-for-in-skips-shadowed")&&c)for(g=0;g<i;++g)if(e=b[g],h=c[e],!(e in a)||a[e]!==h&&(!(e in k)||k[e]!==h))a[e]=j?j(h):h;return a},mixin:function(a,b){a||(a={});for(var c=1,e=arguments.length;c<e;c++)h._mixin(a,arguments[c]);return a},setObject:function(a,
b,c){var e=a.split("."),a=e.pop();return(c=g(e,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return g(a.split("."),b,c)},exists:function(a,b){return void 0!==h.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===l.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||h.isArray(a)||h.isFunction(a))},isArrayLike:function(a){return a&&
void 0!==a&&!h.isString(a)&&!h.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(h.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!h.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,b){for(var c=1,e=arguments.length;c<e;c++)h._mixin(a.prototype,arguments[c]);return a},_hitchArgs:function(a,b){var j=h._toArray(arguments,2),e=h.isString(b);return function(){var d=h._toArray(arguments),g=e?(a||c.global)[b]:b;return g&&g.apply(a||this,j.concat(d))}},
hitch:function(a,b){if(2<arguments.length)return h._hitchArgs.apply(c,arguments);b||(b=a,a=null);if(h.isString(b)){a=a||c.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope="',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return!a?b:function(){return b.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,c){a.prototype=b;var e=new a;a.prototype=null;c&&h._mixin(e,c);return e}}(),_toArray:d("ie")?function(){function a(a,b,c){c=c||[];for(b=
b||0;b<a.length;b++)c.push(a[b]);return c}return function(b){return(b.item?a:e).apply(this,arguments)}}():e,partial:function(a){return h.hitch.apply(c,[null].concat(h._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||h.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,c,e;if(h.isArray(a)){b=[];for(c=0,e=a.length;c<e;++c)c in a&&b.push(h.clone(a[c]))}else b=a.constructor?
new a.constructor:{};return h._mixin(b,a,h.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,c){return a.replace(c||k,h.isFunction(b)?b:function(a,c){return h.getObject(c,!1,b)})}};h.mixin(c,h);return h})},"dojo/domReady":function(){define(["./has"],function(){function c(a){l?a(b):e.push(a)}var d=this,b=document,i={loaded:1,complete:1},g="string"!=typeof b.readyState,l=!!i[b.readyState];if(g)b.readyState=
"loading";if(!l){var e=[],k=[],h=function(a){a=a||d.event;if(!(l||"readystatechange"==a.type&&!i[b.readyState])){l=1;if(g)b.readyState="complete";for(;e.length;)e.shift()(b)}},a=function(a,b){a.addEventListener(b,h,!1);e.push(function(){a.removeEventListener(b,h,!1)})};a(b,"DOMContentLoaded");a(d,"load");"onreadystatechange"in b?a(b,"readystatechange"):g||k.push(function(){return i[b.readyState]});if(k.length){var f=function(){if(!l){for(var a=k.length;a--;)if(k[a]()){h("poller");return}setTimeout(f,
30)}};f()}}c.load=function(a,b,f){c(f)};return c})},"game/handleInput":function(){define("./state,./createBodies,./createJSON/main,./utils/insideCanvas,dojo/dom,frozen/utils".split(","),function(c,d,b,i,g,l){var e=g.byId("xdisp"),k=g.byId("ydisp"),h;return function(a){if(a.mouseAction.position)e.innerHTML=a.mouseAction.position.x,k.innerHTML=a.mouseAction.position.y;if(a.mouseAction.isPressed()&&i(a.mouseAction.startPosition,this)&&!h)h=a.mouseAction.startPosition,c.geometries.push(h);if(!a.mouseAction.isPressed()&&
a.mouseAction.endPosition&&h){h=a.mouseAction.endPosition;if(!("polygon"===c.tool&&10!==c.geometries.length&&(1>=c.geometries.length||4<l.distance(c.geometries[0],h))))c.geometries.push(h),c.entities.push(b[c.tool](c.geometries)),d(),c.geometries=[],a.mouseAction.endPosition=null;h=null}}})},"game/createBodies":function(){define("./state,./Entities,./Joints,./ui/getGravity,./ui/displayJSON,./ui/toggleUndo,lodash,dojo/dom-class,frozen/box2d/Box".split(","),function(c,d,b,i,g,l,e,k,h){var a=0;return function(){var f=
!1,j=i();c.game.box=new h({gravityX:j.x,gravityY:j.y});c.game.entities={};(j=e.chain(c.entities).map(function(a){a=parseInt(a.id,10);return"undefined"===typeof a||null===a||isNaN(a)?-1:a}).max().value())&&(a=j+1);e.forEach(c.entities,function(b){if(!b.staticBody&&!b.zone)b.fillStyle=b.fillStyle||"rgba(0,255,0,0.4)";if(b.zone)b.fillStyle=b.fillStyle||"rgba(255,0,0,0.2)";if("undefined"===typeof b.id||null===b.id)b.id=a,a++;if(c.game.entities[b.id])f=!0;else{var e=new d[b.type](b);c.game.entities[b.id]=
e;b.zone||c.game.box.addBody(e)}});e.forEach(c.joints,function(a){a=new b[a.type](a);c.game.box.addJoint(a)});f?k.remove("duplicate-ids","hide"):k.add("duplicate-ids","hide");g(c.entities);l()}})},"game/Entities":function(){define(["frozen/box2d/RectangleEntity","frozen/box2d/PolygonEntity","frozen/box2d/CircleEntity"],function(c,d,b){return{Rectangle:c,Polygon:d,Circle:b}})},"frozen/box2d/RectangleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(c,d,b){return c([d,b],{halfWidth:1,
halfHeight:1,draw:c.superCall(function(b){return function(c,d){var d=d||this.scale||1,e=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*d,this.y*d);c.rotate(this.angle);c.translate(-this.x*d,-this.y*d);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.fillRect((this.x-this.halfWidth)*d,(this.y-this.halfHeight)*d,2*this.halfWidth*d,2*this.halfHeight*d);c.strokeRect((this.x-this.halfWidth)*d,(this.y-this.halfHeight)*d,2*this.halfWidth*d,2*this.halfHeight*d);c.restore();
c.lineWidth=e;b.apply(this,[c,d])}}),scaleShape:c.superCall(function(b){return function(c){this.halfHeight*=c;this.halfWidth*=c;b.apply(this,[c])}}),pointInShape:function(b){return b.x>=this.x-this.halfWidth&&b.x<=this.x+this.halfWidth&&b.y>=this.y-this.halfHeight&&b.y<=this.y+this.halfHeight}})})},"frozen/box2d/Entity":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(c,d,b){return c(d,{id:0,x:0,y:0,scale:null,angle:0,center:null,restitution:0.3,density:1,friction:0.9,linearDamping:0,
linearVelocity:null,angularVelocity:0,angularDamping:0,staticBody:!1,fillStyle:"rgba(128,128,128,0.5)",strokeStyle:"#000",lineWidth:1,hidden:!1,maskBits:null,categoryBits:null,groupIndex:null,update:function(c){b.mixin(this,c)},draw:function(b,c){var c=c||this.scale||1,d=b.lineWidth;b.lineWidth=this.lineWidth;b.fillStyle=this.strokeStyle;b.beginPath();b.arc(this.x*c,this.y*c,4,0,2*Math.PI,!0);b.closePath();b.fill();if(this.center)b.fillStyle="yellow",b.beginPath(),b.arc(this.center.x*c,this.center.y*
c,2,0,2*Math.PI,!0),b.closePath(),b.fill();b.lineWidth=d},scaleShape:function(b){this.x*=b;this.y*=b;this.alreadyScaled=!0}})})},"frozen/box2d/PolygonEntity":function(){define("dcl,dcl/bases/Mixer,./Entity,../utils/scalePoints,../utils/pointInPolygon,../utils/translatePoints".split(","),function(c,d,b,i,g,l){return c([d,b],{points:[],draw:c.superCall(function(b){return function(c,d){var d=d||this.scale||1,a=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*d,this.y*d);c.rotate(this.angle);
c.translate(-this.x*d,-this.y*d);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.moveTo((this.x+this.points[0].x)*d,(this.y+this.points[0].y)*d);for(var f=1;f<this.points.length;f++)c.lineTo((this.points[f].x+this.x)*d,(this.points[f].y+this.y)*d);c.lineTo((this.x+this.points[0].x)*d,(this.y+this.points[0].y)*d);c.closePath();c.fill();c.stroke();c.restore();c.lineWidth=a;b.apply(this,[c,d])}}),scaleShape:c.superCall(function(b){return function(c){this.points=i(this.points,
c);b.apply(this,[c])}}),pointInShape:function(b){return g(b,l(this.points,this))}})})},"frozen/utils/scalePoints":function(){define(["dojo/_base/lang"],function(c){var d=function(b,i){if(c.isArray(b)){var g=[];b.forEach(function(b){g.push(d(b,i))});b=g}else b="object"===typeof i?{x:b.x*i.x,y:b.y*i.y}:{x:b.x*i,y:b.y*i};return b};return d})},"frozen/utils/pointInPolygon":function(){define(function(){return function(c,d){if(!c||!d)return!1;for(var b=d.points||d,i=!1,g=b.length-1,l=0;l<b.length;g=l++){var e=
b[l].x,k=b[l].y,h=b[g].x,g=b[g].y;k>c.y!==g>c.y&&c.x<(h-e)*(c.y-k)/(g-k)+e&&(i=!i)}return i}})},"frozen/utils/translatePoints":function(){define(["dojo/_base/lang"],function(c){var d=function(b,i){if(c.isArray(b)){var g=[];b.forEach(function(b){g.push(d(b,i))});b=g}else b={x:b.x,y:b.y},i.hasOwnProperty("x")&&(b.x+=i.x),i.hasOwnProperty("y")&&(b.y+=i.y);return b};return d})},"frozen/box2d/CircleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity","../utils/distance"],function(c,d,b,i){return c([d,
b],{radius:1,draw:c.superCall(function(b){return function(c,d){var d=d||this.scale||1,i=c.lineWidth;c.lineWidth=this.lineWidth;c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.arc(this.x*d,this.y*d,this.radius*d,0,2*Math.PI,!0);c.closePath();c.fill();c.stroke();this.staticBody||(c.save(),c.translate(this.x*d,this.y*d),c.rotate(this.angle),c.translate(-this.x*d,-this.y*d),c.beginPath(),c.moveTo(this.x*d,this.y*d),c.lineTo(this.x*d,this.y*d-this.radius*d),c.closePath(),c.stroke(),
c.restore());c.lineWidth=i;b.apply(this,[c,d])}}),scaleShape:c.superCall(function(b){return function(c){this.radius*=c;b.apply(this,[c])}}),pointInShape:function(b){return i(b,this)<=this.radius}})})},"frozen/utils/distance":function(){define(function(){return function(c,d){return Math.sqrt((d.x-c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y))}})},"game/Joints":function(){define(["frozen/box2d/joints/Distance","frozen/box2d/joints/Prismatic","frozen/box2d/joints/Revolute"],function(c,d,b){return{Distance:c,Prismatic:d,
Revolute:b}})},"frozen/box2d/joints/Distance":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(c,d,b,i){var g=Box2D.Common.Math.b2Vec2,l=Box2D.Dynamics.Joints.b2DistanceJointDef;return c([d,i],{bodyPoint2:null,scaleJointLocation:c.superCall(function(b){return function(c){if(c&&this.bodyPoint2)this.bodyPoint2.x*=c,this.bodyPoint2.y*=c,this.alreadyScaled=!0;b.apply(this,[c])}}),createB2Joint:function(c){if(c&&c.bodiesMap&&c.b2World&&c.jointsMap&&!c.jointsMap[this.id]){var d=
c.bodiesMap[this.bodyId1],h=c.bodiesMap[this.bodyId2];if(d&&h){var a,f;this.bodyPoint1&&(a=new g(this.bodyPoint1.x,this.bodyPoint1.y));this.bodyPoint2&&(f=new g(this.bodyPoint2.x,this.bodyPoint2.y));a=a||d.GetWorldCenter();f=f||h.GetWorldCenter();var j=new l;j.Initialize(d,h,a,f);this.jointAttributes&&b.mixin(j,this.jointAttributes);return c.b2World.CreateJoint(j)}}}})})},"frozen/box2d/joints/Joint":function(){define(["dcl","dcl/bases/Mixer"],function(c,d){return c(d,{bodyId1:null,bodyId2:null,bodyPoint1:null,
jointAttributes:null,scaleJointLocation:function(b){if(b&&this.bodyPoint1)this.bodyPoint1.x*=b,this.bodyPoint1.y*=b,this.alreadyScaled=!0}})})},"frozen/box2d/joints/Prismatic":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(c,d,b,i){var g=Box2D.Common.Math.b2Vec2,l=Box2D.Dynamics.Joints.b2PrismaticJointDef;return c([d,i],{axisScale:null,createB2Joint:function(c){if(c&&c.bodiesMap&&c.b2World&&c.jointsMap&&!c.jointsMap[this.id]){var d=c.bodiesMap[this.bodyId1],h=c.bodiesMap[this.bodyId2];
if(d&&h){var a;this.bodyPoint1&&(a=new g(this.bodyPoint1.x,this.bodyPoint1.y));a=a||d.GetWorldCenter();var f=new l,j;j=this.axisScale?new g(this.axisScale.x,this.axisScale.y):new g(1,0);f.Initialize(d,h,a,j);this.jointAttributes&&b.mixin(f,this.jointAttributes);return c.b2World.CreateJoint(f)}}}})})},"frozen/box2d/joints/Revolute":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(c,d,b,i){var g=Box2D.Common.Math.b2Vec2,l=Box2D.Dynamics.Joints.b2RevoluteJointDef;return c([d,
i],{createB2Joint:function(c){if(c&&c.bodiesMap&&c.b2World&&c.jointsMap&&!c.jointsMap[this.id]){var d=c.bodiesMap[this.bodyId1],h=c.bodiesMap[this.bodyId2];if(d&&h){var a;this.bodyPoint1&&(a=new g(this.bodyPoint1.x,this.bodyPoint1.y));a=a||d.GetWorldCenter();var f=new l;f.Initialize(d,h,a,void 0);this.jointAttributes&&b.mixin(f,this.jointAttributes);return c.b2World.CreateJoint(f)}}}})})},"game/ui/getGravity":function(){define(["dojo/dom","dojo/domReady!"],function(c){var d=c.byId("gravityX"),b=c.byId("gravityY");
return function(){return{x:parseFloat(d.value,10),y:parseFloat(b.value,10)}}})},"game/ui/displayJSON":function(){define(["../state","dojo/dom"],function(c){return function(d){c.codeMirror.setValue(JSON.stringify({entities:d,joints:c.joints,canvas:{height:c.game?c.game.height:null,width:c.game?c.game.width:null},backImg:c.backImg?c.backImg.src:null},null,"  "))}})},"game/ui/toggleUndo":function(){define(["../state","dojo/dom"],function(c,d){var b=d.byId("undoBtn");return function(){b.disabled=c.entities.length?
!1:!0}})},"lodash/lodash":function(){(function(c,d){function b(a){if(a&&a.__wrapped__)return a;if(!(this instanceof b))return new b(a);this.__wrapped__=a}function i(a,b,c){b||(b=0);var d=a.length,f=d-b>=(c||Va);if(f)for(var j={},c=b-1;++c<d;){var e=a[c]+"";(E.call(j,e)?j[e]:j[e]=[]).push(a[c])}return function(c){if(f){var d=c+"";return E.call(j,d)&&-1<J(j[d],c)}return-1<J(a,c,b)}}function g(a){return a.charCodeAt(0)}function l(a,b){var c=a.index,f=b.index,a=a.criteria,b=b.criteria;if(a!==b){if(a>
b||a===d)return 1;if(a<b||b===d)return-1}return c<f?-1:1}function e(a,b,c){function d(){var m=arguments,g=e?this:b;f||(a=b[h]);c.length&&(m=m.length?c.concat(C.call(m)):c);return this instanceof d?(j.prototype=a.prototype,g=new j,m=a.apply(g,m),s(m)?m:g):a.apply(g,m)}var f=r(a),e=!c,h=b;e&&(c=b);f||(b=a);return d}function k(a,b){return!a?O:"function"!=typeof a?function(b){return b[a]}:b!==d?function(c,d,f){return a.call(b,c,d,f)}:a}function h(){for(var a={arrayLoop:"",bottom:"",hasDontEnumBug:Ta,
isKeysFast:kb,objectLoop:"",noArgsEnum:bb,noCharByIndex:cb,shadowed:Pa,top:"",useHas:!0},b,c=0;b=arguments[c];c++)for(var d in b)a[d]=b[d];b=a.args;a.firstArg=/^[^,]+/.exec(b)[0];return Function("createCallback, hasOwnProperty, isArguments, isString, objectTypes, nativeKeys, propertyIsEnumerable","return function("+b+") {\n"+eb(a)+"\n}")(k,E,q,t,fb,R,ea)}function a(a){return"\\"+mb[a]}function f(a){return gb[a]}function j(){}function m(a){return nb[a]}function q(a){return A.call(a)==ya}function p(a){var b=
!1;if(!(a&&"object"==typeof a)||q(a))return b;var c=a.constructor;if((!db||!("function"!=typeof a.toString&&"string"==typeof(a+"")))&&(!r(c)||c instanceof c)){if(ab)return Ba(a,function(a,c,d){b=!E.call(d,c);return!1}),!1===b;Ba(a,function(a,c){b=c});return!1===b||E.call(a,b)}return b}function o(a){var b=[];ja(a,function(a,c){b.push(c)});return b}function n(a,b,c,d,f){if(null==a)return a;c&&(b=!1);if(c=s(a)){var j=A.call(a);if(!S[j]||Ja&&q(a))return a;var e=j==oa,c=e||(j==ia?Ra(a):c)}if(!c||!b)return c?
e?C.call(a):Ya({},a):a;c=a.constructor;switch(j){case ta:case ha:return new c(+a);case qa:case Ca:return new c(a);case Aa:return c(a.source,Oa.exec(a))}d||(d=[]);f||(f=[]);for(j=d.length;j--;)if(d[j]==a)return f[j];var h=e?c(a.length):{};d.push(a);f.push(h);(e?w:ja)(a,function(a,c){h[c]=n(a,b,null,d,f)});return h}function u(a){var b=[];Ba(a,function(a,c){r(a)&&b.push(c)});return b.sort()}function I(a){var b={};ja(a,function(a,c){b[a]=c});return b}function F(a,b,c,d){if(a===b)return 0!==a||1/a==1/
b;if(null==a||null==b)return a===b;var f=A.call(a);if(f!=A.call(b))return!1;switch(f){case ta:case ha:return+a==+b;case qa:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Aa:case Ca:return a==b+""}var j=f==oa||f==ya;if(Ja&&!j&&(j=q(a))&&!q(b))return!1;if(!j){if(a.__wrapped__||b.__wrapped__)return F(a.__wrapped__||a,b.__wrapped__||b);if(f!=ia||db&&("function"!=typeof a.toString&&"string"==typeof(a+"")||"function"!=typeof b.toString&&"string"==typeof(b+"")))return!1;var f=a.constructor,e=b.constructor;
if(f!=e&&(!r(f)||!(f instanceof f&&r(e)&&e instanceof e)))return!1}c||(c=[]);d||(d=[]);for(f=c.length;f--;)if(c[f]==a)return d[f]==b;var f=-1,e=!0,h=0;c.push(a);d.push(b);if(j){h=a.length;if(e=h==b.length)for(;h--&&(e=F(a[h],b[h],c,d)););return e}for(var m in a)if(E.call(a,m)&&(h++,!E.call(b,m)||!F(a[m],b[m],c,d)))return!1;for(m in b)if(E.call(b,m)&&!h--)return!1;if(Ta)for(;7>++f;)if(m=Pa[f],E.call(a,m)&&(!E.call(b,m)||!F(a[m],b[m],c,d)))return!1;return!0}function r(a){return"function"==typeof a}
function s(a){return a?fb[typeof a]:!1}function t(a){return A.call(a)==Ca}function z(a,b,c){var d=arguments,f=0,j=2,e=d[3],h=d[4];if(c!==pa&&(e=[],h=[],"number"!=typeof c))j=d.length;for(;++f<j;)ja(d[f],function(b,c){var d,f,j;if(b&&((f=V(b))||Ra(b))){for(var m=e.length;m--&&!(d=e[m]==b););d?a[c]=h[m]:(e.push(b),h.push(j=(j=a[c],f)?V(j)?j:[]:Ra(j)?j:{}),a[c]=z(j,b,pa,e,h))}else null!=b&&(a[c]=b)});return a}function x(a){var b=[];ja(a,function(a){b.push(a)});return b}function v(a,b,c){var d=-1,f=a?
a.length:0,j=!1,c=(0>c?xa(0,f+c):c)||0;"number"==typeof f?j=-1<(t(a)?a.indexOf(b,c):J(a,b,c)):w(a,function(a){if(++d>=c)return!(j=a===b)});return j}function L(a,b,c){var d=!0,b=k(b,c);if(V(a))for(var c=-1,f=a.length;++c<f&&(d=!!b(a[c],c,a)););else w(a,function(a,c,f){return d=!!b(a,c,f)});return d}function y(a,b,c){var d=[],b=k(b,c);if(V(a))for(var c=-1,f=a.length;++c<f;){var j=a[c];b(j,c,a)&&d.push(j)}else w(a,function(a,c,f){b(a,c,f)&&d.push(a)});return d}function $(a,b,c){var d,b=k(b,c);w(a,function(a,
c,f){if(b(a,c,f))return d=a,!1});return d}function la(a,b,c){var d=-1,f=a?a.length:0,j=Array("number"==typeof f?f:0),b=k(b,c);if(V(a))for(;++d<f;)j[d]=b(a[d],d,a);else w(a,function(a,c,f){j[++d]=b(a,c,f)});return j}function aa(a,b,c){var d=-Infinity,f=-1,j=a?a.length:0,e=d;if(b||!V(a))b=!b&&t(a)?g:k(b,c),w(a,function(a,c,f){c=b(a,c,f);c>d&&(d=c,e=a)});else for(;++f<j;)a[f]>e&&(e=a[f]);return e}function W(a,b){var c=[];w(a,function(a){c.push(a[b])});return c}function P(a,b,c,d){var f=3>arguments.length,
b=k(b,d);w(a,function(a,d,j){c=f?(f=!1,a):b(c,a,d,j)});return c}function B(a,b,c,d){var f=a,j=a?a.length:0,e=3>arguments.length;if("number"!=typeof j)var h=Sa(a),j=h.length;else cb&&t(a)&&(f=a.split(""));w(a,function(a,m,g){m=h?h[--j]:--j;c=e?(e=!1,f[m]):b.call(d,c,f[m],m,g)});return c}function X(a,b,c){var d,b=k(b,c);if(V(a))for(var c=-1,f=a.length;++c<f&&!(d=b(a[c],c,a)););else w(a,function(a,c,f){return!(d=b(a,c,f))});return!!d}function N(a,b,c){if(a)return null==b||c?a[0]:C.call(a,0,b)}function Y(a,
b){for(var c=-1,d=a?a.length:0,f=[];++c<d;){var j=a[c];V(j)?na.apply(f,b?j:Y(j)):f.push(j)}return f}function J(a,b,c){var d=-1,f=a?a.length:0;if("number"==typeof c)d=(0>c?xa(0,f+c):c||0)-1;else if(c)return d=ca(a,b),a[d]===b?d:-1;for(;++d<f;)if(a[d]===b)return d;return-1}function ba(a,b,c){return a?C.call(a,null==b||c?1:b):[]}function ca(a,b,c,d){for(var f=0,j=a?a.length:f,c=c?k(c,d):O,b=c(b);f<j;)d=f+j>>>1,c(a[d])<b?f=d+1:j=d;return f}function da(a,b,c,d){var f=-1,j=a?a.length:0,e=[],h=e;"function"==
typeof b&&(d=c,c=b,b=!1);var m=!b&&74<j;if(m)var g={};c&&(h=[],c=k(c,d));for(;++f<j;){var d=a[f],i=c?c(d,f,a):d;m&&(h=E.call(g,i+"")?g[i]:g[i]=[]);if(b?!f||h[h.length-1]!==i:0>J(h,i))(c||m)&&h.push(i),e.push(d)}return e}function ma(a,b){return jb||T&&2<arguments.length?T.call.apply(T,arguments):e(a,b,C.call(arguments,2))}function O(a){return a}function H(a){w(u(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this.__wrapped__];na.apply(a,arguments);a=d.apply(b,a);if(this.__chain__)a=
new b(a),a.__chain__=!0;return a}})}function ka(c,d,f){c||(c="");f||(f={});var j,e,h=b.templateSettings,m=0,g=f.interpolate||h.interpolate||Q,i="__p += '",q=f.variable||h.variable,n=q;c.replace(RegExp((f.escape||h.escape||Q).source+"|"+g.source+"|"+(g===Ea?Ia:Q).source+"|"+(f.evaluate||h.evaluate||Q).source+"|$","g"),function(b,d,f,e,h,g){f||(f=e);i+=c.slice(m,g).replace(Xa,a);i+=d?"' +\n__e("+d+") +\n'":h?"';\n"+h+";\n__p += '":f?"' +\n((__t = ("+f+")) == null ? '' : __t) +\n'":"";j||(j=h||La.test(d||
f));m=g+b.length});i+="';\n";n||(q="obj",i=j?"with ("+q+") {\n"+i+"\n}\n":i.replace(Z,"$&"+q+".").replace(RegExp("(\\(\\s*)"+q+"\\."+q+"\\b","g"),"$1__d"));i=(j?i.replace(Ma,""):i).replace(ra,"$1").replace(Na,"$1;");i="function("+q+") {\n"+(n?"":q+" || ("+q+" = {});\n")+"var __t, __p = '', __e = _.escape"+(j?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(n?"":", __d = "+q+"."+q+" || "+q)+";\n")+i+"return __p\n}";f=lb?"\n//@ sourceURL="+(f.sourceURL||"/lodash/template/source["+
ua++ +"]"):"";try{e=Function("_","return "+i+f)(b)}catch(k){throw k.source=i,k;}if(d)return e(d);e.source=i;return e}var M="object"==typeof exports&&exports,K="object"==typeof global&&global;K.global===K&&(c=K);var D=[],G=new function(){},Ua=0,pa=G,Va=30,Da=c._,La=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,sa=/&(?:amp|lt|gt|quot|#x27);/g,Ma=/\b__p \+= '';/g,ra=/\b(__p \+=) '' \+/g,Na=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oa=/\w*$/,Z=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,
fa=RegExp("^"+(G.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Ia=/\$\{((?:(?=\\?)\\?[\s\S])*?)}/g,Ea=/<%=([\s\S]+?)%>/g,Q=/($^)/,Wa=/[&<>"']/g,Xa=/['\n\r\t\u2028\u2029\\]/g,Pa="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ua=0,Fa=Math.ceil,ga=D.concat,Qa=Math.floor,U=fa.test(U=Object.getPrototypeOf)&&U,E=G.hasOwnProperty,na=D.push,ea=G.propertyIsEnumerable,C=D.slice,A=G.toString,T=fa.test(T=
C.bind)&&T,va=fa.test(va=Array.isArray)&&va,wa=c.isFinite,Ga=c.isNaN,R=fa.test(R=Object.keys)&&R,xa=Math.max,Ka=Math.min,za=Math.random,ya="[object Arguments]",oa="[object Array]",ta="[object Boolean]",ha="[object Date]",qa="[object Number]",ia="[object Object]",Aa="[object RegExp]",Ca="[object String]",Ta,ab,Ha=(Ha={"0":1,length:1},D.splice.call(Ha,0,1),Ha[0]),bb=!0;(function(){function a(){this.x=1}var b=[];a.prototype={valueOf:1,y:1};for(var c in new a)b.push(c);for(c in arguments)bb=!c;Ta=!/valueOf/.test(b);
ab="x"!=b[0]})(1);var Ja=!q(arguments),ib="x"!=C.call("x")[0],cb="xx"!="x"[0]+Object("x")[0];try{var db=A.call(c.document||0)==ia}catch(pb){}var jb=T&&/\n|Opera/.test(T+A.call(c.opera)),kb=R&&/^.+$|true/.test(R+!!c.attachEvent);try{var lb=(Function("//@")(),!c.attachEvent)}catch(qb){}var S={};S[ya]=S["[object Function]"]=!1;S[oa]=S[ta]=S[ha]=S[qa]=S[ia]=S[Aa]=S[Ca]=!0;var fb={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},mb={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028",
"\u2029":"u2029"};b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ea,variable:""};var eb=ka("<% if (obj.useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result = <%= firstArg %>;\nif (!<%= firstArg %>) return result;\n<%= top %>;\n<% if (arrayLoop) { %>var length = iteratee.length; index = -1;\nif (typeof length == 'number') {  <% if (noCharByIndex) { %>\n  if (isString(iteratee)) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayLoop %>\n  }\n}\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  for (index in iteratee) {<%    if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectLoop %>;    <% if (!hasDontEnumBug || useHas) { %>\n    }<% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectLoop %>\n  }    <% } %>  <% } %>  <% if (arrayLoop || noArgsEnum) { %>\n}<% } %>\n<%= bottom %>;\nreturn result"),
Za={args:"object, source, guard",top:"for (var argsIndex = 1, argsLength = typeof guard == 'number' ? 2 : arguments.length; argsIndex < argsLength; argsIndex++) {\n  if ((iteratee = arguments[argsIndex])) {",objectLoop:"result[index] = value",bottom:"  }\n}"},$a={args:"collection, callback, thisArg",top:"callback = createCallback(callback, thisArg)",arrayLoop:"if (callback(value, index, collection) === false) return result",objectLoop:"if (callback(value, index, collection) === false) return result"},
hb={arrayLoop:null},Ya=h(Za);Ja&&(q=function(a){return a?E.call(a,"callee"):!1});var Ba=h($a,hb,{useHas:!1}),ja=h($a,hb),gb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},nb=I(gb),ob=h(Za,{objectLoop:"if (result[index] == null) "+Za.objectLoop}),V=va||function(a){return A.call(a)==oa};r(/x/)&&(r=function(a){return"[object Function]"==A.call(a)});var Ra=!U?p:function(a){if(!(a&&"object"==typeof a))return!1;var b=a.valueOf,c="function"==typeof b&&(c=U(b))&&U(c);return c?a==c||U(a)==c&&
!q(a):p(a)},Sa=!R?o:function(a){return"function"==typeof a&&ea.call(a,"prototype")?o(a):s(a)?R(a):[]},w=h($a);b.VERSION="0.10.0";b.assign=Ya;b.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}};b.bind=ma;b.bindAll=function(a){for(var b=arguments,c=1<b.length?0:(b=u(a),-1),d=b.length;++c<d;){var f=b[c];a[f]=ma(a[f],a)}return a};b.bindKey=function(a,b){return e(a,b,C.call(arguments,2))};b.chain=function(a){a=new b(a);a.__chain__=!0;return a};b.clone=n;b.compact=
function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var f=a[b];f&&d.push(f)}return d};b.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}};b.contains=v;b.countBy=function(a,b,c){var d={},b=k(b,c);w(a,function(a,c,f){c=b(a,c,f);E.call(d,c)?d[c]++:d[c]=1});return d};b.debounce=function(a,b,c){function d(){h=null;c||(j=a.apply(e,f))}var f,j,e,h;return function(){var m=c&&!h;f=arguments;e=this;clearTimeout(h);h=setTimeout(d,b);
m&&(j=a.apply(e,f));return j}};b.defaults=ob;b.defer=function(a){var b=C.call(arguments,1);return setTimeout(function(){a.apply(d,b)},1)};b.delay=function(a,b){var c=C.call(arguments,2);return setTimeout(function(){a.apply(d,c)},b)};b.difference=function(a){for(var b=-1,c=a?a.length:0,d=ga.apply(D,arguments),d=i(d,c),f=[];++b<c;){var j=a[b];d(j)||f.push(j)}return f};b.escape=function(a){return null==a?"":(a+"").replace(Wa,f)};b.every=L;b.filter=y;b.find=$;b.first=N;b.flatten=Y;b.forEach=w;b.forIn=
Ba;b.forOwn=ja;b.functions=u;b.groupBy=function(a,b,c){var d={},b=k(b,c);w(a,function(a,c,f){c=b(a,c,f);(E.call(d,c)?d[c]:d[c]=[]).push(a)});return d};b.has=function(a,b){return a?E.call(a,b):!1};b.identity=O;b.indexOf=J;b.initial=function(a,b,c){return a?C.call(a,0,-(null==b||c?1:b)):[]};b.intersection=function(a){var b=arguments,c=b.length,d={},f=[];w(a,function(a){if(0>J(f,a)){for(var j=c;--j;)if(!(d[j]||(d[j]=i(b[j])))(a))return;f.push(a)}});return f};b.invert=I;b.invoke=function(a,b){var c=C.call(arguments,
2),d="function"==typeof b,f=[];w(a,function(a){f.push((d?b:a[b]).apply(a,c))});return f};b.isArguments=q;b.isArray=V;b.isBoolean=function(a){return!0===a||!1===a||A.call(a)==ta};b.isDate=function(a){return A.call(a)==ha};b.isElement=function(a){return a?1===a.nodeType:!1};b.isEmpty=function(a){var b=!0;if(!a)return b;var c=A.call(a),d=a.length;if(c==oa||c==Ca||c==ya||Ja&&q(a)||c==ia&&"number"==typeof d&&r(a.splice))return!d;ja(a,function(){return b=!1});return b};b.isEqual=F;b.isFinite=function(a){return wa(a)&&
!Ga(parseFloat(a))};b.isFunction=r;b.isNaN=function(a){return A.call(a)==qa&&a!=+a};b.isNull=function(a){return null===a};b.isNumber=function(a){return A.call(a)==qa};b.isObject=s;b.isPlainObject=Ra;b.isRegExp=function(a){return A.call(a)==Aa};b.isString=t;b.isUndefined=function(a){return a===d};b.keys=Sa;b.last=function(a,b,c){if(a){var d=a.length;return null==b||c?a[d-1]:C.call(a,-b||d)}};b.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?xa(0,d+c):Ka(c,d-1))+1);d--;)if(a[d]===
b)return d;return-1};b.map=la;b.max=aa;b.memoize=function(a,b){var c={};return function(){var d=b?b.apply(this,arguments):arguments[0];return E.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}};b.merge=z;b.min=function(a,b,c){var d=Infinity,f=-1,j=a?a.length:0,e=d;if(b||!V(a))b=!b&&t(a)?g:k(b,c),w(a,function(a,c,f){c=b(a,c,f);c<d&&(d=c,e=a)});else for(;++f<j;)a[f]<e&&(e=a[f]);return e};b.mixin=H;b.noConflict=function(){c._=Da;return this};b.object=function(a,b){for(var c=-1,d=a?a.length:0,f={};++c<d;){var j=
a[c];b?f[j]=b[c]:f[j[0]]=j[1]}return f};b.omit=function(a,b,c){var d="function"==typeof b,f={};if(d)b=k(b,c);else var j=ga.apply(D,arguments);Ba(a,function(a,c,e){if(d?!b(a,c,e):0>J(j,c,1))f[c]=a});return f};b.once=function(a){var b,c=!1;return function(){if(c)return b;c=!0;b=a.apply(this,arguments);a=null;return b}};b.pairs=function(a){var b=[];ja(a,function(a,c){b.push([c,a])});return b};b.partial=function(a){return e(a,C.call(arguments,1))};b.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var f=
0,j=ga.apply(D,arguments),e=j.length;++f<e;){var h=j[f];h in a&&(d[h]=a[h])}else b=k(b,c),Ba(a,function(a,c,f){b(a,c,f)&&(d[c]=a)});return d};b.pluck=W;b.random=function(a,b){null==a&&null==b&&(b=1);a=+a||0;null==b&&(b=a,a=0);return a+Qa(za()*((+b||0)-a+1))};b.range=function(a,b,c){a=+a||0;c=+c||1;null==b&&(b=a,a=0);for(var d=-1,b=xa(0,Fa((b-a)/c)),f=Array(b);++d<b;)f[d]=a,a+=c;return f};b.reduce=P;b.reduceRight=B;b.reject=function(a,b,c){b=k(b,c);return y(a,function(a,c,d){return!b(a,c,d)})};b.rest=
ba;b.result=function(a,b){var c=a?a[b]:null;return r(c)?a[b]():c};b.shuffle=function(a){var b=-1,c=Array(a?a.length:0);w(a,function(a){var d=Qa(za()*(++b+1));c[b]=c[d];c[d]=a});return c};b.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Sa(a).length};b.some=X;b.sortBy=function(a,b,c){var d=[],b=k(b,c);w(a,function(a,c,f){d.push({criteria:b(a,c,f),index:c,value:a})});a=d.length;for(d.sort(l);a--;)d[a]=d[a].value;return d};b.sortedIndex=ca;b.tap=function(a,b){b(a);return a};b.template=
ka;b.throttle=function(a,b){function c(){h=new Date;e=null;f=a.apply(j,d)}var d,f,j,e,h=0;return function(){var m=new Date,g=b-(m-h);d=arguments;j=this;0>=g?(clearTimeout(e),h=m,f=a.apply(j,d)):e||(e=setTimeout(c,g));return f}};b.times=function(a,b,c){for(var a=+a||0,d=-1,f=Array(a);++d<a;)f[d]=b.call(c,d);return f};b.toArray=function(a){return a&&"number"==typeof a.length?(ib?t(a):"string"==typeof a)?a.split(""):C.call(a):x(a)};b.unescape=function(a){return null==a?"":(a+"").replace(sa,m)};b.union=
function(){return da(ga.apply(D,arguments))};b.uniq=da;b.uniqueId=function(a){var b=Ua++;return a?a+b:b};b.values=x;b.where=function(a,b){var c=Sa(b);return y(a,function(a){for(var d=c.length;d--;){var f=a[c[d]]===b[c[d]];if(!f)break}return!!f})};b.without=function(a){for(var b=-1,c=a?a.length:0,d=i(arguments,1,20),f=[];++b<c;){var j=a[b];d(j)||f.push(j)}return f};b.wrap=function(a,b){return function(){var c=[a];na.apply(c,arguments);return b.apply(this,c)}};b.zip=function(a){for(var b=-1,c=a?aa(W(arguments,
"length")):0,d=Array(c);++b<c;)d[b]=W(arguments,b);return d};b.all=L;b.any=X;b.collect=la;b.detect=$;b.drop=ba;b.each=w;b.extend=Ya;b.foldl=P;b.foldr=B;b.head=N;b.include=v;b.inject=P;b.methods=u;b.select=y;b.tail=ba;b.take=N;b.unique=da;b._iteratorTemplate=eb;H(b);b.prototype.chain=function(){this.__chain__=!0;return this};b.prototype.value=function(){return this.__wrapped__};w("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var c=D[a];b.prototype[a]=function(){var a=this.__wrapped__;
c.apply(a,arguments);Ha&&0===a.length&&delete a[0];if(this.__chain__)a=new b(a),a.__chain__=!0;return a}});w(["concat","join","slice"],function(a){var c=D[a];b.prototype[a]=function(){var a=c.apply(this.__wrapped__,arguments);if(this.__chain__)a=new b(a),a.__chain__=!0;return a}});"function"==typeof define&&"object"==typeof define.amd&&define.amd?(c._=b,define(function(){return b})):M?"object"==typeof module&&module&&module.exports==M?(module.exports=b)._=b:M._=b:c._=b})(this)},"dojo/dom-class":function(){define(["./_base/lang",
"./_base/array","./dom"],function(c,d,b){function i(b){if("string"==typeof b||b instanceof String){if(b&&!l.test(b))return e[0]=b,e;b=b.split(l);b.length&&!b[0]&&b.shift();b.length&&!b[b.length-1]&&b.pop();return b}return!b?[]:d.filter(b,function(a){return a})}var g,l=/\s+/,e=[""],k={};return g={contains:function(c,a){return 0<=(" "+b.byId(c).className+" ").indexOf(" "+a+" ")},add:function(c,a){var c=b.byId(c),a=i(a),d=c.className,j,d=d?" "+d+" ":" ";j=d.length;for(var e=0,g=a.length,k;e<g;++e)(k=
a[e])&&0>d.indexOf(" "+k+" ")&&(d+=k+" ");j<d.length&&(c.className=d.substr(1,d.length-2))},remove:function(d,a){var d=b.byId(d),f;if(void 0!==a){a=i(a);f=" "+d.className+" ";for(var j=0,e=a.length;j<e;++j)f=f.replace(" "+a[j]+" "," ");f=c.trim(f)}else f="";d.className!=f&&(d.className=f)},replace:function(c,a,d){c=b.byId(c);k.className=c.className;g.remove(k,d);g.add(k,a);c.className!==k.className&&(c.className=k.className)},toggle:function(c,a,d){c=b.byId(c);if(void 0===d)for(var a=i(a),j=0,e=a.length,
q;j<e;++j)q=a[j],g[g.contains(c,q)?"remove":"add"](c,q);else g[d?"add":"remove"](c,a);return d}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(c,d,b){function i(a){return e[a]=new Function("item","index","array",a)}function g(a){var b=!a;return function(c,d,h){var g=0,k=c&&c.length||0,n;k&&"string"==typeof c&&(c=c.split(""));"string"==typeof d&&(d=e[d]||i(d));if(h)for(;g<k;++g){if(n=!d.call(h,c[g],g,c),a^n)return!n}else for(;g<k;++g)if(n=!d(c[g],g,c),a^n)return!n;
return b}}function l(a){var b=1,c=0,d=0;a||(b=c=d=-1);return function(e,g,i,n){if(n&&0<b)return h.lastIndexOf(e,g,i);var n=e&&e.length||0,l=a?n+d:c;i===k?i=a?c:n+d:0>i?(i=n+i,0>i&&(i=c)):i=i>=n?n+d:i;for(n&&"string"==typeof e&&(e=e.split(""));i!=l;i+=b)if(e[i]==g)return i;return-1}}var e={},k,h={every:g(!1),some:g(!0),indexOf:l(!0),lastIndexOf:l(!1),forEach:function(a,b,c){var d=0,h=a&&a.length||0;h&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=e[b]||i(b));if(c)for(;d<h;++d)b.call(c,
a[d],d,a);else for(;d<h;++d)b(a[d],d,a)},map:function(a,b,c,d){var h=0,g=a&&a.length||0,d=new (d||Array)(g);g&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=e[b]||i(b));if(c)for(;h<g;++h)d[h]=b.call(c,a[h],h,a);else for(;h<g;++h)d[h]=b(a[h],h,a);return d},filter:function(a,b,c){var d=0,h=a&&a.length||0,g=[],k;h&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=e[b]||i(b));if(c)for(;d<h;++d)k=a[d],b.call(c,k,d,a)&&g.push(k);else for(;d<h;++d)k=a[d],b(k,d,a)&&g.push(k);return g},
clearCache:function(){e={}}};b.mixin(c,h);return h})},"frozen/box2d/Box":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(c,d){var b=Box2D.Common.Math.b2Vec2,i=Box2D.Dynamics.b2BodyDef,g=Box2D.Dynamics.b2Body,l=Box2D.Dynamics.b2FixtureDef,e=Box2D.Dynamics.b2World,k=Box2D.Collision.Shapes.b2PolygonShape,h=Box2D.Collision.Shapes.b2CircleShape;return c(d,{intervalRate:60,adaptive:!1,bodiesMap:null,fixturesMap:null,jointsMap:null,b2World:null,gravityX:0,gravityY:9.8,allowSleep:!0,
resolveCollisions:!1,contactListener:null,collisions:null,scale:30,constructor:function(a){if(a&&a.intervalRate)this.intervalRate=parseInt(a.intervalRate,10);this.bodiesMap={};this.fixturesMap={};this.jointsMap={};this.b2World=new e(new b(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(a){if(this.resolveCollisions)this.collisions={};var b=Date.now();a?this.b2World.Step(a/1E3,10,10):this.b2World.Step(this.adaptive?
(b-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.b2World.ClearForces();return Date.now()-b},getState:function(){for(var a={},b=this.b2World.GetBodyList();b;b=b.m_next)if(b.IsActive()&&"undefined"!==typeof b.GetUserData()&&null!==b.GetUserData()&&(a[b.GetUserData()]={x:b.GetPosition().x,y:b.GetPosition().y,angle:b.GetAngle(),center:{x:b.GetWorldCenter().x,y:b.GetWorldCenter().y},linearVelocity:b.m_linearVelocity,angularVelocity:b.m_angularVelocity},this.resolveCollisions))a[b.GetUserData()].collisions=
this.collisions[b.GetUserData()]||null;return a},updateExternalState:function(a){var b=this.getState(),c;for(c in b){var d=a[c];d&&!d.staticBody&&d.update(b[c])}},setBodies:function(a){for(var b in a)this.addBody(a[b]);this.ready=!0},addBody:function(a){if(!a.alreadyScaled)a.scaleShape(1/this.scale),a.scale=this.scale;var c=new i,d=new l,e,q,p,o;d.restitution=a.restitution;d.density=a.density;d.friction=a.friction;if(a.hasOwnProperty("maskBits"))d.filter.maskBits=a.maskBits;if(a.hasOwnProperty("categoryBits"))d.filter.categoryBits=
a.categoryBits;if(a.hasOwnProperty("groupIndex"))d.filter.groupIndex=a.groupIndex;c.type=a.staticBody?g.b2_staticBody:g.b2_dynamicBody;c.position.x=a.x;c.position.y=a.y;c.userData=a.id;c.angle=a.angle;c.linearDamping=a.linearDamping;c.angularDamping=a.angularDamping;var n=this.b2World.CreateBody(c);if(a.radius)d.shape=new h(a.radius),n.CreateFixture(d);else if(a.points){q=[];for(c=0;c<a.points.length;c++)p=new b,p.Set(a.points[c].x,a.points[c].y),q[c]=p;d.shape=new k;d.shape.SetAsArray(q,q.length);
n.CreateFixture(d)}else if(a.polys)for(e=0;e<a.polys.length;e++){q=a.polys[e];o=[];for(c=0;c<q.length;c++)p=new b,p.Set(q[c].x,q[c].y),o[c]=p;d.shape=new k;d.shape.SetAsArray(o,o.length);n.CreateFixture(d)}else d.shape=new k,d.shape.SetAsBox(a.halfWidth,a.halfHeight),n.CreateFixture(d);this.bodiesMap[a.id]=n},setPosition:function(a,c,d){this.bodiesMap[a].SetPosition(new b(c,d))},setAngle:function(a,b){this.bodiesMap[a].SetAngle(b)},setLinearVelocity:function(a,c,d){this.bodiesMap[a].SetLinearVelocity(new b(c,
d))},applyImpulseDegrees:function(a,c,d){a=this.bodiesMap[a];a.ApplyImpulse(new b(Math.sin(c*(Math.PI/180))*d,-1*Math.cos(c*(Math.PI/180))*d),a.GetWorldCenter())},applyForceDegrees:function(a,c,d){a=this.bodiesMap[a];a.ApplyForce(new b(Math.sin(c*(Math.PI/180))*d,-1*Math.cos(c*(Math.PI/180))*d),a.GetWorldCenter())},applyImpulse:function(a,c,d){a=this.bodiesMap[a];a.ApplyImpulse(new b(Math.sin(c)*d,-1*Math.cos(c)*d),a.GetWorldCenter())},applyForce:function(a,c,d){a=this.bodiesMap[a];a.ApplyForce(new b(Math.sin(c)*
d,-1*Math.cos(c)*d),a.GetWorldCenter())},applyTorque:function(a,b){this.bodiesMap[a].ApplyTorque(b)},setGravity:function(a){this.b2World.SetGravity(new b(a.x,a.y))},removeBody:function(a){this.bodiesMap[a]&&(this.fixturesMap[a]&&this.bodiesMap[a].DestroyFixture(this.fixturesMap[a]),this.b2World.DestroyBody(this.bodiesMap[a]),delete this.bodiesMap[a])},wakeUpBody:function(a){this.bodiesMap[a]&&this.bodiesMap[a].SetAwake(!0)},addContactListener:function(a){var b=new Box2D.Dynamics.b2ContactListener;
if(a.beginContact)b.BeginContact=function(b){a.beginContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.EndContact)b.endContact=function(b){a.endContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.postSolve)b.PostSolve=function(b,c){a.postSolve(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData(),c.normalImpulses[0])};this.b2World.SetContactListener(b)},destroyJoint:function(a){this.jointsMap[a]&&
(this.b2World.DestroyJoint(this.jointsMap[a]),delete this.jointsMap[a])},addJoint:function(a){if(a&&a.id&&!this.jointsMap[a.id]){if(!a.alreadyScaled&&a.scaleJointLocation)a.scaleJointLocation(1/this.scale),a.scale=this.scale;var b=a.createB2Joint(this);b&&(this.jointsMap[a.id]=b)}},beginContact:function(){},endContact:function(){},postSolve:function(a,b,c){this.collisions[a]=this.collisions[a]||[];this.collisions[a].push({id:b,impulse:c});this.collisions[b]=this.collisions[b]||[];this.collisions[b].push({id:a,
impulse:c})}})})},"game/createJSON/main":function(){define(["./poly","./circle","./rect"],function(c,d,b){return{polygon:c,circle:d,rectangle:b}})},"game/createJSON/poly":function(){define(["../state","../utils/convexHull","frozen/utils"],function(c,d,b){return function(i){if(i&&2<i.length){var i={points:d(i)},g=b.averagePoints(i.points);i.x=g.x;i.y=g.y;i.points=b.translatePoints(i.points,{x:-i.x,y:-i.y});i.staticBody="static"===c.toolType;i.zone="zone"===c.toolType;i.type="Polygon";return i}}})},
"game/utils/convexHull":function(){define(function(){return function(c){var d,b,i,g,l=[],e=function(a,b){var c;l.push(a);var d=[];c=0;var h=null,g=[],i;for(i in b){var k=b[i],u=(a[0].y-a[1].y)*(k.x-a[0].x)+(a[1].x-a[0].x)*(k.y-a[0].y);0<u&&(g.push(k),u>c&&(c=u,h=k))}return(c=h)?(d=d.concat(e([a[0],c],g)),d=d.concat(e([c,a[1]],g))):[a]},k;for(k in c){var h=c[k];if(h.x>d||!d)i=h,d=h.x;if(h.x<b||!b)g=h,b=h.x}c=[].concat(e([g,i],c),e([i,g],c));d=[];for(b=0;b<c.length;b++)d.push(c[b][0]);d.reverse();return d}})},
"frozen/utils":function(){define("./utils/averagePoints,./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints,./utils/insideCanvas".split(","),function(c,d,b,i,g,l,e,k,h,a){return{averagePoints:c,degreesToRadians:d,radiansToDegrees:b,pointInPolygon:i,distance:g,degreesFromCenter:l,radiansFromCenter:e,scalePoints:k,translatePoints:h,insideCanvas:a}})},"frozen/utils/averagePoints":function(){define(function(){return function(c){var d=
{x:0,y:0};c.forEach(function(b){d.x+=b.x;d.y+=b.y});d.x/=c.length;d.y/=c.length;return d}})},"frozen/utils/degreesToRadians":function(){define(function(){var c=Math.PI/180;return function(d){return d*c}})},"frozen/utils/radiansToDegrees":function(){define(function(){var c=180/Math.PI;return function(d){return d*c}})},"frozen/utils/degreesFromCenter":function(){define(["./radiansToDegrees","./radiansFromCenter"],function(c,d){return function(b,i){return c(d(b,i))}})},"frozen/utils/radiansFromCenter":function(){define(function(){var c=
{x:0,y:0};return function(d,b){d=d||c;return d.x===b.x&&d.y===b.y?0:d.x===b.x?d.y>b.y?0:Math.PI:d.y===b.y?d.x>b.x?1.5*Math.PI:Math.PI/2:d.x<b.x&&d.y>b.y?Math.atan((b.x-d.x)/(d.y-b.y)):d.x<b.x&&d.y<b.y?Math.PI/2+Math.atan((b.y-d.y)/(b.x-d.x)):d.x>b.x&&d.y<b.y?Math.PI+Math.atan((d.x-b.x)/(b.y-d.y)):1.5*Math.PI+Math.atan((d.y-b.y)/(d.x-b.x))}})},"frozen/utils/insideCanvas":function(){define(function(){return function(c,d){return 0>c.x||c.x>d.width||0>c.y||c.y>d.height?!1:!0}})},"game/createJSON/circle":function(){define(["../state",
"frozen/utils"],function(c,d){return function(b){if(b&&2===b.length){var i=d.distance(b[0],b[1]),b={x:b[0].x,y:b[0].y,radius:i};b.staticBody="static"===c.toolType;b.zone="zone"===c.toolType;b.type="Circle";return b}}})},"game/createJSON/rect":function(){define(["../state","../utils/orderRectPts"],function(c,d){return function(b){if(b&&2===b.length)return b=d(b),b={x:(b[1].x-b[0].x)/2+b[0].x,y:(b[1].y-b[0].y)/2+b[0].y,halfWidth:Math.abs((b[1].x-b[0].x)/2)||0.5,halfHeight:Math.abs((b[1].y-b[0].y)/2)||
0.5},b.staticBody="static"===c.toolType,b.zone="zone"===c.toolType,b.type="Rectangle",b}})},"game/utils/orderRectPts":function(){define(function(){return function(c){var d=[],b;c[1].x<c[0].x?(b=c[1],c=c[0]):(b=c[0],c=c[1]);d.push(b);d.push(c);return d}})},"game/utils/insideCanvas":function(){define(function(){return function(c,d){return 0>c.x||c.x>d.width||0>c.y||c.y>d.height?!1:!0}})},"game/draw":function(){define(["./draw/shape","./state","lodash"],function(c,d,b){return function(i){d.backImg?i.drawImage(d.backImg,
0,0,this.canvas.width,d.backImg.height):i.clearRect(0,0,this.canvas.width,this.canvas.height);b.forEach(this.entities,function(b){(!b.staticBody||d.showStatic)&&b.draw(i)},this);if(d.geometries.length)c[d.tool](i,this.inputManager,d.geometries)}})},"game/draw/shape":function(){define(["./poly","./circle","./rect"],function(c,d,b){return{polygon:c,circle:d,rectangle:b}})},"game/draw/poly":function(){define(["lodash","frozen/utils"],function(c,d){return function(b,i,g){b.fillStyle="white";b.strokeStyle=
"black";c.forEach(g,function(c){b.beginPath();b.arc(c.x,c.y,4,0,2*Math.PI,!0);b.closePath();b.fill();b.stroke()});if(1<g.length&&i.mouseAction.position&&4>=d.distance(g[0],i.mouseAction.position))b.strokeStyle="yellow",b.fillStyle="black",b.lineWidth=4,b.beginPath(),b.arc(g[0].x,g[0].y,4,0,2*Math.PI,!0),b.closePath(),b.fill(),b.stroke(),b.lineWidth=1;b.strokeStyle="red";b.beginPath();c.forEach(g,function(c,d){0<d&&(b.moveTo(g[d-1].x,g[d-1].y),b.lineTo(c.x,c.y))});i.mouseAction.position&&(b.moveTo(g[g.length-
1].x,g[g.length-1].y),b.lineTo(i.mouseAction.position.x,i.mouseAction.position.y));b.stroke();b.closePath()}})},"game/draw/circle":function(){define(["frozen/utils"],function(c){return function(d,b,i){b=c.distance(i[0],b.mouseAction.position);d.strokeStyle="red";d.beginPath();d.arc(i[0].x,i[0].y,b,0,2*Math.PI,!0);d.closePath();d.stroke()}})},"game/draw/rect":function(){define(["../utils/orderRectPts"],function(c){return function(d,b,i){b=c([i[0],b.mouseAction.position]);d.strokeStyle="red";d.strokeRect(b[0].x,
b[0].y,b[1].x-b[0].x,b[1].y-b[0].y)}})},"frozen/box2d/BoxGame":function(){define(["../GameCore","./Box","dcl","dcl/bases/Mixer"],function(c,d,b,i){return b([c,i],{box:null,boxUpdating:!0,entities:null,constructor:function(){if(!this.box)this.box=new d;if(!this.entities)this.entities={}},preUpdate:function(b){this.boxUpdating&&(this.box.update(b),this.box.updateExternalState(this.entities))}})})},"frozen/GameCore":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),
function(c,d,b,i,g,l){return c(d,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,setHeight:function(b){this.height=b;this.canvas.height=b},setWidth:function(b){this.width=b;this.canvas.width=b},stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),
this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=i.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.setHeight(this.height||this.canvas.height);this.setWidth(this.width||this.canvas.width);if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new g({canvas:this.canvas,gameArea:i.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new g({canvas:this.canvas});
this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new l;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=
Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||(this.preUpdate(this.elapsedTime),this.update(this.elapsedTime)),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var c=Date.now();this.prevTime=this.currTime=
c;this.loopRunner=b.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},preUpdate:function(){},update:function(){},updateLoadingScreen:function(){},draw:function(b){if("2d"===this.contextType)b.font="14px sans-serif",b.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(b){if(this.resourceManager&&"2d"===this.contextType)b.fillStyle=this.loadingBackground,
b.fillRect(0,0,this.width,this.height),b.fillStyle=this.loadingForeground,b.strokeStyle=this.loadingForeground,b.font="bold "+Math.floor(this.height/12)+"px sans-serif",b.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),b.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),b.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),b.lineWidth=4}})})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,./utils/insideCanvas,dcl,dcl/bases/Mixer,dojo/has,dojo/on,dojo/dom-style,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),
function(c,d,b,i,g,l,e,k,h,a){return i(g,{keyActions:[],mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){this.handleKeys&&(e(document,"keydown",a.hitch(this,"keyDown")),e(document,"keyup",a.hitch(this,"keyReleased")));this.handleMouse&&!l("touch")&&(e(document,"mousedown",a.hitch(this,"mouseDown")),e(document,"mousemove",a.hitch(this,"mouseMove")),e(document,"mouseup",a.hitch(this,"mouseUp")));this.handleTouch&&
l("touch")&&(e(document,"touchstart",a.hitch(this,"touchStart")),e(document,"touchmove",a.hitch(this,"touchMove")),e(document,"touchend",a.hitch(this,"touchEnd")));if(!this.mouseAction)this.mouseAction=new d;if(!this.touchAction)this.touchAction=new d;this.gameArea&&this.canvasPercentage&&(e(window,"resize",a.hitch(this,"resize")),e(window,"orientationchange",a.hitch(this,"resize")))},mapToKey:function(a,b){if(!this.keyActions)this.keyActions=[];this.keyActions[b]=a},addKeyAction:function(a,b){var d=
new c;if(b)d.behavior=d.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(d,a);return d},setMouseAction:function(a){this.mouseAction=a},setTouchAction:function(a){this.touchAction=a},mouseUp:function(a){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},mouseDown:function(a){a=this.getMouseLoc(a);this.mouseAction.endPosition=null;this.mouseAction.insideCanvas=b(a,this.canvas);this.mouseAction.insideCanvas?(this.mouseAction.press(),this.mouseAction.startPosition=a,this.mouseAction.position=
a):this.mouseAction.startPosition=null},mouseMove:function(a){this.mouseAction.position=this.getMouseLoc(a)},touchStart:function(a){a=this.getMouseLoc(a.changedTouches[0]);this.touchAction.endPosition=null;this.touchAction.insideCanvas=b(a,this.canvas);this.touchAction.insideCanvas?(this.touchAction.press(),this.touchAction.startPosition=a,this.touchAction.position=a):this.touchAction.startPosition=null},touchEnd:function(a){this.touchAction.release();this.touchAction.endPosition=this.getMouseLoc(a.changedTouches[0])},
touchMove:function(a){this.touchAction.position=this.getMouseLoc(a.changedTouches[0]);this.touchAction.startPosition&&a.preventDefault()},getKeyAction:function(a){return this.keyActions.length?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyDown:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyReleased:function(a){(a=this.getKeyAction(a))&&a.release()},getMouseLoc:function(a){var b=
h.position(this.canvas);return this.zoomRatio?{x:Math.round((a.clientX-b.x)/this.zoomRatio),y:Math.round((a.clientY-b.y)/this.zoomRatio)}:{x:Math.round(a.clientX-b.x),y:Math.round(a.clientY-b.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var a=this.canvas.width,b=this.canvas.height,c=h.getMarginExtents(document.body),d=window.innerWidth-c.w,c=window.innerHeight-c.h,b=a/b,e="",g="";d/c>b?(d=c*b,e=d+"px"):g=Math.round(d/b)+"px";this.zoomRatio=d/a*this.canvasPercentage;
k.set(this.gameArea,{width:e,height:g});a=Math.floor(100*this.canvasPercentage)+"%";k.set(this.canvas,{width:a,height:a,display:"block",marginLeft:"auto",marginRight:"auto"})}}})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(c,d){return c(d,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},getName:function(){return this.name},
reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(b){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=b,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?
!0:!1},getAmount:function(){var b=this.amount;if(0!==b)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return b}})})},"frozen/MouseAction":function(){define(["dcl","dcl/bases/Mixer","./GameAction"],function(c,d,b){return c([d,b],{startPosition:null,endPosition:null,position:null})})},"dojo/on":function(){define(["require","./_base/kernel","./has"],function(c,d,b){function i(a,
c,d,j,h){if(j=c.match(/(.*):(.*)/))return c=j[2],j=j[1],e.selector(j,c).call(h,a,d);b("touch")&&(k.test(c)&&(d=o(d)),!b("event-orientationchange")&&"orientationchange"==c&&(c="resize",a=window,d=o(d)));m&&(d=m(d));if(a.addEventListener){var g=c in f,i=g?f[c]:c;a.addEventListener(i,d,g);return{remove:function(){a.removeEventListener(i,d,g)}}}c="on"+c;throw Error("Target must be an event emitter");}function g(){this.cancelable=!1}function l(){this.bubbles=!1}c=window.ScriptEngineMajorVersion;b.add("jscript",
c&&c()+ScriptEngineMinorVersion()/10);b.add("event-orientationchange",b("touch")&&!b("android"));b.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var e=function(a,b,c,d){return"function"==typeof a.on&&"function"!=typeof b?a.on(b,c):e.parse(a,b,c,i,d,this)};e.pausable=function(a,b,c,d){var f,a=e(a,b,function(){if(!f)return c.apply(this,arguments)},d);a.pause=function(){f=!0};a.resume=function(){f=!1};return a};e.once=
function(a,b,c){var d=e(a,b,function(){d.remove();return c.apply(this,arguments)});return d};e.parse=function(a,b,c,d,f,e){if(b.call)return b.call(e,a,c);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),j=[],h=0,g;g=b[h++];)j.push(d(a,g,c,f,e));j.remove=function(){for(var a=0;a<j.length;a++)j[a].remove()};return j}return d(a,b,c,f,e)};var k=/^touch/;e.selector=function(a,b,c){return function(f,j){function h(b){for(g=g&&g.matches?g:d.query;!g.matches(b,a,f);)if(b==f||!1===c||!(b=b.parentNode)||1!=
b.nodeType)return;return b}var g="function"==typeof a?{matches:a}:this,i=b.bubble;return i?e(f,i(h),j):e(f,b,function(a){var b=h(a.target);return b&&j.call(b,a)})}};var h=[].slice,a=e.emit=function(a,b,c){var d=h.call(arguments,2),f="on"+b;if("parentNode"in a){var e=d[0]={},j;for(j in c)e[j]=c[j];e.preventDefault=g;e.stopPropagation=l;e.target=a;e.type=b;c=e}do a[f]&&a[f].apply(a,d);while(c&&c.bubbles&&(a=a.parentNode));return c&&c.cancelable&&c},f={};if(!b("event-stopimmediatepropagation"))var j=
function(){this.modified=this.immediatelyStopped=!0},m=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=j,a.apply(this,arguments)}};f={focusin:"focus",focusout:"blur"};e.emit=function(b,c,d){if(b.dispatchEvent&&document.createEvent){var f=b.ownerDocument.createEvent("HTMLEvents");f.initEvent(c,!!d.bubbles,!!d.cancelable);for(var j in d)j in f||(f[j]=d[j]);return b.dispatchEvent(f)&&f}return a.apply(e,arguments)};if(b("touch"))var q=function(){},p=window.orientation,
o=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(f){}b.type?(q.prototype=b,c=new q,c.preventDefault=function(){b.preventDefault()},c.stopPropagation=function(){b.stopPropagation()}):(c=b,c.type=d);b.corrected=c;if("resize"==d){if(p==window.orientation)return null;p=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],e;for(e in d)delete c[e],c[e]=d[e]}return a.call(this,
c)}};return e})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(c,d){function b(b,d,e){d=d.toLowerCase();if(c("ie")){if("auto"==e){if("height"==d)return b.offsetHeight;if("width"==d)return b.offsetWidth}if("fontweight"==d)switch(e){case 700:return"bold";default:return"normal"}}d in a||(a[d]=f.test(d));return a[d]?l(b,e):e}var i,g={};i=c("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);if(!b&&a.style)a.style.display=
"",b=c.getComputedStyle(a,null)}return b||{}}:c("ie")&&(9>c("ie")||c("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};g.getComputedStyle=i;var l;l=c("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,f=c.left,e=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(j){b=0}c.left=
f;d.left=e;return b}:function(a,b){return parseFloat(b)||0};g.toPixelValue=l;var e=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},k=9>c("ie")||10>c("ie")&&c("quirks")?function(a){try{return e(a).Opacity/100}catch(b){return 1}}:function(a){return i(a).opacity},h=9>c("ie")||10>c("ie")&&c("quirks")?function(a,b){var c=100*b,d=1==b;a.style.zoom=d?"":1;if(e(a))e(a,1).Opacity=c;else{if(d)return b;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+
c+")"}e(a,1).Enabled=!d;if("tr"==a.tagName.toLowerCase())for(c=a.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&h(c,b);return b}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},f=/margin|padding|width|height|max|min|offset/,j=c("ie")?"styleFloat":"cssFloat",m={cssFloat:j,styleFloat:j,"float":j};g.get=function(a,c){var f=d.byId(a),e=arguments.length;if(2==e&&"opacity"==c)return k(f);var c=m[c]||c,j=g.getComputedStyle(f);return 1==e?j:b(f,c,j[c]||f.style[c])};g.set=function(a,
b,c){var f=d.byId(a),e=arguments.length,j="opacity"==b,b=m[b]||b;if(3==e)return j?h(f,c):f.style[b]=c;for(var i in b)g.set(a,i,b[i]);return g.getComputedStyle(f)};return g})},"dojo/dom-geometry":function(){define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(c,d,b,i){function g(a,b,c,d,e,h){h=h||"px";a=a.style;if(!isNaN(b))a.left=b+h;if(!isNaN(c))a.top=c+h;if(0<=d)a.width=d+h;if(0<=e)a.height=e+h}function l(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&
"button"==(a.getAttribute("type")||"").toLowerCase()}function e(a){return"border-box"==k.boxModel||"table"==a.tagName.toLowerCase()||l(a)}var k={boxModel:"content-box"};if(c("ie"))k.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";k.getPadExtents=function(a,c){var a=b.byId(a),d=c||i.getComputedStyle(a),e=i.toPixelValue,h=e(a,d.paddingLeft),g=e(a,d.paddingTop),k=e(a,d.paddingRight),d=e(a,d.paddingBottom);return{l:h,t:g,r:k,b:d,w:h+k,h:g+d}};k.getBorderExtents=function(a,c){var a=
b.byId(a),d=i.toPixelValue,e=c||i.getComputedStyle(a),h="none"!=e.borderLeftStyle?d(a,e.borderLeftWidth):0,g="none"!=e.borderTopStyle?d(a,e.borderTopWidth):0,k="none"!=e.borderRightStyle?d(a,e.borderRightWidth):0,d="none"!=e.borderBottomStyle?d(a,e.borderBottomWidth):0;return{l:h,t:g,r:k,b:d,w:h+k,h:g+d}};k.getPadBorderExtents=function(a,c){var a=b.byId(a),d=c||i.getComputedStyle(a),e=k.getPadExtents(a,d),d=k.getBorderExtents(a,d);return{l:e.l+d.l,t:e.t+d.t,r:e.r+d.r,b:e.b+d.b,w:e.w+d.w,h:e.h+d.h}};
k.getMarginExtents=function(a,c){var a=b.byId(a),d=c||i.getComputedStyle(a),e=i.toPixelValue,h=e(a,d.marginLeft),g=e(a,d.marginTop),k=e(a,d.marginRight),d=e(a,d.marginBottom);return{l:h,t:g,r:k,b:d,w:h+k,h:g+d}};k.getMarginBox=function(a,d){var a=b.byId(a),e=d||i.getComputedStyle(a),h=k.getMarginExtents(a,e),g=a.offsetLeft-h.l,l=a.offsetTop-h.t,o=a.parentNode,n=i.toPixelValue;if(c("mozilla")){var u=parseFloat(e.left),e=parseFloat(e.top);!isNaN(u)&&!isNaN(e)?(g=u,l=e):o&&o.style&&(o=i.getComputedStyle(o),
"visible"!=o.overflow&&(g+="none"!=o.borderLeftStyle?n(a,o.borderLeftWidth):0,l+="none"!=o.borderTopStyle?n(a,o.borderTopWidth):0))}else if((c("opera")||8==c("ie")&&!c("quirks"))&&o)o=i.getComputedStyle(o),g-="none"!=o.borderLeftStyle?n(a,o.borderLeftWidth):0,l-="none"!=o.borderTopStyle?n(a,o.borderTopWidth):0;return{l:g,t:l,w:a.offsetWidth+h.w,h:a.offsetHeight+h.h}};k.getContentBox=function(a,d){var a=b.byId(a),e=d||i.getComputedStyle(a),h=a.clientWidth,g=k.getPadExtents(a,e),l=k.getBorderExtents(a,
e);h?(e=a.clientHeight,l.w=l.h=0):(h=a.offsetWidth,e=a.offsetHeight);c("opera")&&(g.l+=l.l,g.t+=l.t);return{l:g.l,t:g.t,w:h-g.w-l.w,h:e-g.h-l.h}};k.setContentSize=function(a,c,d){var a=b.byId(a),h=c.w,c=c.h;e(a)&&(d=k.getPadBorderExtents(a,d),0<=h&&(h+=d.w),0<=c&&(c+=d.h));g(a,NaN,NaN,h,c)};var h={l:0,t:0,w:0,h:0};k.setMarginBox=function(a,d,j){var a=b.byId(a),m=j||i.getComputedStyle(a),j=d.w,q=d.h,p=e(a)?h:k.getPadBorderExtents(a,m),m=k.getMarginExtents(a,m);if(c("webkit")&&l(a)){var o=a.style;if(0<=
j&&!o.width)o.width="4px";if(0<=q&&!o.height)o.height="4px"}0<=j&&(j=Math.max(j-p.w-m.w,0));0<=q&&(q=Math.max(q-p.h-m.h,0));g(a,d.l,d.t,j,q)};k.isBodyLtr=function(a){a=a||d.doc;return"ltr"==(d.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};k.docScroll=function(a){var a=a||d.doc,b=d.doc.parentWindow||d.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=c("quirks")?d.body(a):a.documentElement)&&{x:k.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};if(c("ie"))k.getIeDocumentElementOffset=
function(a){a=a||d.doc;a=a.documentElement;if(8>c("ie")){var b=a.getBoundingClientRect(),e=b.left,b=b.top;7>c("ie")&&(e+=a.clientLeft,b+=a.clientTop);return{x:0>e?0:e,y:0>b?0:b}}return{x:0,y:0}};k.fixIeBiDiScrollLeft=function(a,b){var b=b||d.doc,e=c("ie");if(e&&!k.isBodyLtr(b)){var h=c("quirks"),g=h?d.body(b):b.documentElement,i=d.global;6==e&&!h&&i.frameElement&&g.scrollHeight>g.clientHeight&&(a+=g.clientLeft);return 8>e||h?a+g.clientWidth-g.scrollWidth:-a}return a};k.position=function(a,e){var a=
b.byId(a),h=d.body(a.ownerDocument),g=a.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};if(9>c("ie")){var i=k.getIeDocumentElementOffset(a.ownerDocument);g.x-=i.x+(c("quirks")?h.clientLeft+h.offsetLeft:0);g.y-=i.y+(c("quirks")?h.clientTop+h.offsetTop:0)}e&&(h=k.docScroll(a.ownerDocument),g.x+=h.x,g.y+=h.y);return g};k.getMarginSize=function(a,c){var a=b.byId(a),d=k.getMarginExtents(a,c||i.getComputedStyle(a)),e=a.getBoundingClientRect();return{w:e.right-e.left+d.w,h:e.bottom-
e.top+d.h}};k.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=a.offsetY};return k})},"frozen/ResourceManager":function(){define(["./sounds/Sound!","dcl","dcl/bases/Mixer","dojo/_base/lang","dojo/on"],function(c,d,b,i,g){function l(b,c){var d=c;b&&(d=[b,c].join("/"));return d.replace(/\/{2,}/g,"/")}return d(b,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundDir:null,resourceList:{},loadImage:function(b){var c=!1;if(!Array.isArray(b))if("string"===typeof b)c=!0,
b=[b];else if("object"!==typeof b)return;for(var d in b)if(b.hasOwnProperty(d)){var a=l(this.imageDir,b[d]);if(this.resourceList[a])b[d]=this.resourceList[a].img;else{this.allLoaded=!1;var f=new Image,j={name:a,img:f,complete:!1},m=i.partial(function(a){a.complete=!0},j);g(f,"load",m);f.src=a;this.resourceList[a]=j;b[d]=f}}return c?b[0]:b},loadSound:function(b){var d=!1;if(!Array.isArray(b))if("string"===typeof b)d=!0,b=[b];else if("object"!==typeof b)return;for(var h in b)if(b.hasOwnProperty(h)){var a=
l(this.soundDir,b[h]);if(this.resourceList[a])b[h]=this.resourceList[a];else{this.allLoaded=!1;var f=new c(a);this.resourceList[a]=f;b[h]=f}}return d?b[0]:b},playSound:function(b,c,d,a){b&&(c?b.loop(a):b.play(a,d||0))},resourcesReady:function(){if(!this.allLoaded){for(var b in this.resourceList)if(!this.resourceList[b].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){var b=0,c=0,d;for(d in this.resourceList){var a=this.resourceList[d];c++;a.complete&&(b+=1)}return 0===c?
0:Math.round(100*(b/c))}})})},"frozen/sounds/Sound":function(){define(["require","dojo/has","../shims/AudioContext"],function(c,d){d.add("WebAudio",function(b){return!!b.AudioContext});return{load:function(b,i,g){c([d("WebAudio")?"./WebAudio":"./HTML5Audio"],function(b){g(b)})}}})},"frozen/shims/AudioContext":function(){define(function(){for(var c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.AudioContext;++d)window.AudioContext=window[c[d]+"AudioContext"]})},"frozen/shims/RAF":function(){define(function(){for(var c=
0,d=["ms","moz","webkit","o"],b=0;b<d.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[d[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[b]+"CancelAnimationFrame"]||window[d[b]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(b){var d=(new Date).getTime(),l=Math.max(0,16-(d-c)),e=window.setTimeout(function(){b(d+l)},l);c=d+l;return e};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(b){clearTimeout(b)}})},
"game/ui/CanvasDND":function(){define(["../state","../createBodies","./DNDFileController","dcl"],function(c,d,b,i){return i([b],{id:"canvas",drop:function(b){try{var i=b.dataTransfer.files;if(i&&1===i.length&&i[0].type.match(/image.*/)){var e=i[0],k=new FileReader;k.onerror=function(){};k.onload=function(a){if(a.target.readyState===FileReader.DONE){var b=new Image;b.onload=function(){c.game.stop();c.backImg=b;c.game.setHeight(b.height);c.game.setWidth(b.width);d();c.game.run()};b.src=a.target.result}};
k.readAsDataURL(e);this.dragleave(b)}}catch(h){}}})})},"game/ui/DNDFileController":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/on,dojo/dom,dojo/domReady!".split(","),function(c,d,b,i,g){return c([d],{node:null,borderStyle:null,borderDropStyle:"3px dashed red",constructor:function(){if(!this.node)this.node=g.byId(this.id);i(this.node,"dragenter",b.hitch(this,"dragenter"));i(this.node,"dragover",b.hitch(this,"dragover"));i(this.node,"dragleave",b.hitch(this,"dragleave"));i(this.node,
"drop",b.hitch(this,"drop"));this.borderStyle=this.node.style.border},dragenter:function(b){b.stopPropagation();b.preventDefault();this.node.style.border=this.borderDropStyle},dragover:function(b){b.stopPropagation();b.preventDefault()},dragleave:function(b){b.stopPropagation();b.preventDefault();this.node.style.border=this.borderStyle},preDrop:function(b){this.node.style.border=this.borderStyle;b.stopPropagation();b.preventDefault();this.drop(b)},drop:function(b){var c=function(){},d=function(){return function(){}};
try{for(var h=b.dataTransfer.files,b=0;b<h.length;b++){var a=new FileReader;a.onerror=c;a.onload=d(h[b]);a.readAsDataURL(h[b])}return!1}catch(f){}}})})},"game/ui/events":function(){define("../state,../createBodies,./toggleRedo,lodash,dojo/on,dojo/dom,dojo/query,dojo/request".split(","),function(c,d,b,i,g,l,e,k){g(document,"#toolForm:change",function(b){c.geometries=[];if("tool"===b.target.name)c.tool=b.target.value;if("toolType"===b.target.name)c.toolType=b.target.value});g(document,"#load:click",
function(){try{var b=JSON.parse(c.codeMirror.getValue());c.entities=b.entities||b.objs;if(b.joints)c.joints=b.joints;if(b.backImg)c.backImg=new Image,c.backImg.src=b.backImg;c.game.setHeight(b.canvas.height);c.game.setWidth(b.canvas.width);d()}catch(a){}});g(document,"#save:click",function(){var b=l.byId("saved-gist"),a="";try{a=JSON.stringify({"public":!0,files:{"world.json":{content:c.codeMirror.getValue()}}})}catch(d){}k.post("https://api.github.com/gists",{method:"POST",data:a}).then(function(a){a=
JSON.parse(a);b.innerHTML='Data Saved: <a href="'+a.html_url+'">'+a.html_url+"</a>"},function(){b.innerHTML='<span class="error">Error Saving Data - Please Try Again</span>'})});g(document,"#undoBtn:click",function(){c.entities.length&&(c.undoObjs.push(c.entities.pop()),d());b()});g(document,"#redoBtn:click",function(){c.undoObjs.length&&(c.entities.push(c.undoObjs.pop()),d());b()});g(document,".gravity:change",i.debounce(d,500));g(document,"#runSimulation:change",function(b){c.game.boxUpdating=b.target.checked});
g(document,"#showStatic:change",function(b){c.showStatic=b.target.checked});g(document,"selectstart",function(b){b.preventDefault()})})},"game/ui/toggleRedo":function(){define(["../state","dojo/dom"],function(c,d){var b=d.byId("redoBtn");return function(){b.disabled=c.undoObjs.length?!1:!0}})},"dojo/query":function(){define("dojo/query","./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),function(c,d,b,i,g,l,e,k){function h(a,c){var d=
function(d,e){if("string"==typeof e&&(e=b.byId(e),!e))return new c([]);var f="string"==typeof d?a(d,e):d?d.orphan?d:[d]:[];return f.orphan?f:new c(f)};d.matches=a.match||function(a,b,c){return 0<d.filter([a],b,c).length};d.filter=a.filter||function(a,b,c){return d(b,c).filter(function(b){return-1<g.indexOf(a,b)})};if("function"!=typeof a)var e=a.search,a=function(a,b){return e(b||document,a)};return d}d.add("array-extensible",function(){return 1==l.delegate([],{length:1}).length&&!d("bug-for-in-skips-shadowed")});
var a=Array.prototype,f=a.slice,j=a.concat,m=g.forEach,q=function(a,b,d){b=[0].concat(f.call(b,0));d=d||c.global;return function(c){b[0]=c;return a.apply(d,b)}},p=function(a){var b=this instanceof o&&d("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var e=b?this:[],f=e.length=c.length,g=0;g<f;g++)e[g]=c[g];if(b)return e;c=e}l._mixin(c,n);c._NodeListCtor=function(a){return o(a)};return c},o=p,n=o.prototype=d("array-extensible")?[]:{};o._wrap=
n._wrap=function(a,b,c){a=new (c||this._NodeListCtor||o)(a);return b?a._stash(b):a};o._adaptAsMap=function(a,b){return function(){return this.map(q(a,arguments,b))}};o._adaptAsForEach=function(a,b){return function(){this.forEach(q(a,arguments,b));return this}};o._adaptAsFilter=function(a,b){return function(){return this.filter(q(a,arguments,b))}};o._adaptWithCondition=function(a,b,d){return function(){var e=arguments,f=q(a,e,d);if(b.call(d||c.global,e))return this.map(f);this.forEach(f);return this}};
m(["slice","splice"],function(b){var c=a[b];n[b]=function(){return this._wrap(c.apply(this,arguments),"slice"==b?this:null)}});m(["indexOf","lastIndexOf","every","some"],function(a){var b=g[a];n[a]=function(){return b.apply(c,[this].concat(f.call(arguments,0)))}});l.extend(p,{constructor:o,_NodeListCtor:o,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return i(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};
return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=f.call(this,0),c=g.map(arguments,function(a){return f.call(a,0)});return this._wrap(j.apply(b,c),this)},map:function(a,b){return this._wrap(g.map(this,a,b),this)},forEach:function(a,b){m(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=u._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(g.filter(c,b[d],b[d+1]),
this)},instantiate:function(a,b){var c=l.isFunction(a)?a:l.getObject(a),b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);m(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var u=h(k,p);c.query=h(k,function(a){return p(a)});u.load=function(a,b,c){e.load(a,b,function(a){c(h(a,p))})};c._filterQueryResult=u._filterResult=function(a,b,c){return new p(u.filter(a,b,c))};c.NodeList=u.NodeList=p;return u})},
"dojo/selector/_loader":function(){define(["../has","require"],function(c,d){var b=document.createElement("div");c.add("dom-qsa2.1",!!b.querySelectorAll);c.add("dom-qsa3",function(){try{return b.innerHTML="<p class='TEST'></p>",1==b.querySelectorAll(".TEST:empty").length}catch(c){}});var i;return{load:function(b,l,e){var k=d,b="default"==b?c("config-selectorEngine")||"css3":b,b="css2"==b||"lite"==b?"./lite":"css2.1"==b?c("dom-qsa2.1")?"./lite":"./acme":"css3"==b?c("dom-qsa3")?"./lite":"./acme":"acme"==
b?"./acme":(k=l)&&b;if("?"==b.charAt(b.length-1))var b=b.substring(0,b.length-1),h=!0;if(h&&(c("dom-compliant-qsa")||i))return e(i);k([b],function(a){"./lite"!=b&&(i=a);e(a)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(c,d,b,i,g){var l=i.trim,e=b.forEach,k="BackCompat"==g.doc.compatMode,h=!1,a=function(){return!0},f=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",b=function(b,c){return l(a.slice(b,
c))},c=[],d=-1,e=-1,f=-1,g=-1,j=-1,i=-1,k=-1,m,n="",o="",q,p=0,u=a.length,r=null,s=null,t=function(){if(0<=i)r.id=b(i,p).replace(/\\/g,""),i=-1;if(0<=k){var a=k==p?null:b(k,p);r[0>">~+".indexOf(a)?"tag":"oper"]=a;k=-1}0<=j&&(r.classes.push(b(j+1,p).replace(/\\/g,"")),j=-1)};n=o,o=a.charAt(p),p<u;p++)if("\\"!=n)if(r||(q=p,r={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return h?this.otag:this.tag}},k=p),m)o==m&&(m=null);else if("'"==o||'"'==o)m=o;else if(0<=
d)if("]"==o){s.attr?s.matchFor=b(f||d+1,p):s.attr=b(d+1,p);if((d=s.matchFor)&&('"'==d.charAt(0)||"'"==d.charAt(0)))s.matchFor=d.slice(1,-1);if(s.matchFor)s.matchFor=s.matchFor.replace(/\\/g,"");r.attrs.push(s);s=null;d=f=-1}else{if("="==o)f=0<="|~^$*".indexOf(n)?n:"",s.type=f+o,s.attr=b(d+1,p-f.length),f=p+1}else if(0<=e){if(")"==o){if(0<=g)s.value=b(e+1,p);g=e=-1}}else if("#"==o)t(),i=p+1;else if("."==o)t(),j=p;else if(":"==o)t(),g=p;else if("["==o)t(),d=p,s={};else if("("==o)0<=g&&(s={name:b(g+
1,p),value:null},r.pseudos.push(s)),e=p;else if(" "==o&&n!=o){t();0<=g&&r.pseudos.push({name:b(g+1,p)});r.loops=r.pseudos.length||r.attrs.length||r.classes.length;r.oquery=r.query=b(q,p);r.otag=r.tag=r.oper?null:r.tag||"*";if(r.tag)r.tag=r.tag.toUpperCase();if(c.length&&c[c.length-1].oper)r.infixOper=c.pop(),r.query=r.infixOper.query+" "+r.query;c.push(r);r=null}return c},j=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},m=function(a,b){var c=
b||[];a&&c.push(a);return c},q=function(a){return 1==a.nodeType},p=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(h?a.getAttribute(b):a.getAttribute(b,2))||""},o={"*=":function(a,b){return function(c){return 0<=p(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==p(c,a).indexOf(b)}},"$=":function(a,b){return function(c){var c=" "+p(c,a),d=c.lastIndexOf(b);return-1<d&&d==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";
return function(b){return 0<=(" "+p(b,a)+" ").indexOf(c)}},"|=":function(a,b){var c=b+"-";return function(d){d=p(d,a);return d==b||0==d.indexOf(c)}},"=":function(a,b){return function(c){return p(c,a)==b}}},n="undefined"==typeof g.doc.firstChild.nextElementSibling,u=!n?"nextElementSibling":"nextSibling",I=!n?"previousElementSibling":"previousSibling",F=n?q:a,r=function(a){for(;a=a[I];)if(F(a))return!1;return!0},s=function(a){for(;a=a[u];)if(F(a))return!1;return!0},t=function(a){var b=a.parentNode,
b=7!=b.nodeType?b:b.nextSibling,c=0,e=b.children||b.childNodes,f=a._i||a.getAttribute("_i")||-1,g=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!e)return-1;e=e.length;if(g==e&&0<=f&&0<=g)return f;d("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",e):b._l=e;f=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[u])if(F(b))d("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(f=c);return f},z=function(a){return!(t(a)%2)},x=function(a){return t(a)%2},v={checked:function(){return function(a){return!!("checked"in
a?a.checked:a.selected)}},disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return r},"last-child":function(){return s},"only-child":function(){return function(a){return r(a)&&s(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=
a.innerHTML.indexOf(b)}},not:function(a,b){var c=f(b)[0],d={el:1};if("*"!=c.tag)d.tag=1;if(!c.classes.length)d.classes=1;var e=y(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return x;if("even"==b)return z;if(-1!=b.indexOf("n")){var d=b.split("n",2),e=d[0]?"-"==d[0]?-1:c(d[0]):1,f=d[1]?c(d[1]):0,g=0,h=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(g=f-f%e),f%=e):0>e&&(e*=-1,0<f&&(h=f,f%=e));if(0<e)return function(a){a=t(a);return a>=g&&(0>h||a<=h)&&a%e==f};b=f}var j=
c(b);return function(a){return t(a)==j}}},L=9>d("ie")||9==d("ie")&&d("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return h?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},y=function(b,c){if(!b)return a;var c=c||{},d=null;"el"in c||(d=j(d,q));"tag"in c||"*"!=b.tag&&(d=j(d,function(a){return a&&(h?a.tagName:a.tagName.toUpperCase())==b.getTag()}));"classes"in c||e(b.classes,function(a,b){var c=RegExp("(?:^|\\s)"+
a+"(?:\\s|$)");d=j(d,function(a){return c.test(a.className)});d.count=b});"pseudos"in c||e(b.pseudos,function(a){var b=a.name;v[b]&&(d=j(d,v[b](b,a.value)))});"attrs"in c||e(b.attrs,function(a){var b,c=a.attr;a.type&&o[a.type]?b=o[a.type](c,a.matchFor):c.length&&(b=L(c));b&&(d=j(d,b))});"id"in c||b.id&&(d=j(d,function(a){return!!a&&a.id==b.id}));d||"default"in c||(d=a);return d},$=function(a){return function(b,c,d){for(;b=b[u];)if(!n||q(b)){(!d||M(b,d))&&a(b)&&c.push(b);break}return c}},la=function(a){return function(b,
c,d){for(b=b[u];b;){if(F(b)){if(d&&!M(b,d))break;a(b)&&c.push(b)}b=b[u]}return c}},aa=function(b){b=b||a;return function(a,c,d){for(var e=0,f=a.children||a.childNodes;a=f[e++];)F(a)&&(!d||M(a,d))&&b(a,e)&&c.push(a);return c}},W={},P=function(b){var d=W[b.query];if(d)return d;var e=b.infixOper,e=e?e.oper:"",f=y(b,{el:1}),h="*"==b.tag,j=g.doc.getElementsByClassName;if(e){j={el:1};if(h)j.tag=1;f=y(b,j);"+"==e?d=$(f):"~"==e?d=la(f):">"==e&&(d=aa(f))}else if(b.id)f=!b.loops&&h?a:y(b,{el:1,id:1}),d=function(a,
d){var e=c.byId(b.id,a.ownerDocument||a);if(e&&f(e)){if(9==a.nodeType)return m(e,d);for(var g=e.parentNode;g&&!(g==a);)g=g.parentNode;if(g)return m(e,d)}};else if(j&&/\{\s*\[native code\]\s*\}/.test(""+j)&&b.classes.length&&!k)var f=y(b,{el:1,classes:1,id:1}),i=b.classes.join(" "),d=function(a,b,c){for(var b=m(0,b),d,e=0,g=a.getElementsByClassName(i);d=g[e++];)f(d,a)&&M(d,c)&&b.push(d);return b};else!h&&!b.loops?d=function(a,c,d){for(var c=m(0,c),e=0,f=b.getTag(),f=f?a.getElementsByTagName(f):[];a=
f[e++];)M(a,d)&&c.push(a);return c}:(f=y(b,{el:1,tag:1,id:1}),d=function(a,c,d){for(var c=m(0,c),e,g=0,h=(e=b.getTag())?a.getElementsByTagName(e):[];e=h[g++];)f(e,a)&&M(e,d)&&c.push(e);return c});return W[b.query]=d},B={},X={},N=function(a){var b=f(l(a));if(1==b.length){var c=P(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=m(a),c,d,e=b.length,f,g,h=0;h<e;h++){g=[];c=b[h];d=a.length-1;if(0<d)f={},g.nozip=!0;d=P(c);for(var j=0;c=a[j];j++)d(c,g,f);if(!g.length)break;
a=g}return g}},Y=d("ie")?"commentStrip":"nozip",J=!!g.doc.querySelectorAll,ba=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,ca=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},da=/([^[]*)([^\]]*])?/g,ma=function(a,b,c){return b.replace(ba,ca)+(c||"")},O=function(a,b){a=a.replace(da,ma);if(J){var c=X[a];if(c&&!b)return c}if(c=B[a])return c;var c=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(b=!0);if(J&&!b&&-1==">~+".indexOf(c)&&(!d("ie")||-1==a.indexOf(":"))&&!(k&&0<=a.indexOf("."))&&
-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return X[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(f);c[Y]=!0;return c}catch(d){return O(a,!0)(b)}}}var g=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return B[a]=2>g.length?N(a):function(a){for(var b=0,c=[],d;d=g[b++];)c=c.concat(N(d)(a));return c}},H=0,ka=d("ie")?function(a){return h?a.getAttribute("_uid")||a.setAttribute("_uid",
++H)||H:a.uniqueID}:function(a){return a._uid||(a._uid=++H)},M=function(a,b){if(!b)return 1;var c=ka(a);return!b[c]?b[c]=1:0},K=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;H++;var c,e;if(d("ie")&&h){var f=H+"";a[0].setAttribute("_zipIdx",f);for(c=1;e=a[c];c++)a[c].getAttribute("_zipIdx")!=f&&b.push(e),e.setAttribute("_zipIdx",f)}else if(d("ie")&&a.commentStrip)try{for(c=1;e=a[c];c++)q(e)&&b.push(e)}catch(g){}else{a[0]&&(a[0]._zipIdx=
H);for(c=1;e=a[c];c++)a[c]._zipIdx!=H&&b.push(e),e._zipIdx=H}return b},D=function(a,b){b=b||g.doc;h="div"===(b.ownerDocument||b).createElement("div").tagName;var c=O(a)(b);return c&&c.nozip?c:K(c)};D.filter=function(a,d,e){for(var g=[],h=f(d),h=1==h.length&&!/[^\w#\.]/.test(d)?y(h[0]):function(a){return-1!=b.indexOf(D(d,c.byId(e)),a)},j=0,i;i=a[j];j++)h(i)&&g.push(i);return g};return D})},"dojo/request":function(){define(["./request/default!"],function(c){return c})},"dojo/request/default":function(){define(["exports",
"require","../has"],function(c,d,b){var i=b("config-requestProvider");i||(i="./xhr");c.getPlatformDefaultId=function(){return"./xhr"};c.load=function(b,c,e){d(["platform"==b?"./xhr":i],function(b){e(b)})}})},"frozen/sounds/WebAudio":function(){define(["dcl","dojo/on","dojo/_base/lang"],function(c,d,b){var i=null;window.AudioContext&&(i=new window.AudioContext);return c(null,{declaredClass:"frozen/sounds/WebAudio",name:null,complete:!1,audioContext:i,buffer:null,constructor:function(b){"string"===
typeof b&&this.load(b)},load:function(c){this.name=c;var i=b.partial(function(b){b.audioContext.decodeAudioData(this.response,function(c){b.buffer=c;b.complete=!0},function(){})},this),e=new XMLHttpRequest;e.open("GET",c,!0);e.responseType="arraybuffer";d(e,"load",i);e.send()},loop:function(b){this._initAudio(b,!0).noteOn(0)},play:function(b,c){this._initAudio(b,!1).noteOn(c||0)},_initAudio:function(b,c){var c="boolean"===typeof c?c:!1,d=this.audioContext.createBufferSource();d.buffer=this.buffer;
d.loop=c;if(b){var i=this.audioContext.createGainNode();i.gain.value=b;d.connect(i);i.connect(this.audioContext.destination)}else d.connect(this.audioContext.destination);return d}})})},"frozen/sounds/HTML5Audio":function(){define(["dcl","dojo/on","dojo/_base/lang"],function(c,d,b){return c(null,{declaredClass:"frozen/sounds/HTML5Audio",name:null,complete:!1,audio:null,constructor:function(b){this.audio=new Audio;"string"===typeof b&&this.load(b)},load:function(c){this.name=c;this.audio.pause();this.audio.preload=
"auto";this.audio.src=c;d(this.audio,"loadeddata",b.hitch(this,function(){this.complete=!0}))},loop:function(b){var c=this._initAudio(b,!0);d(c,"loadeddata",function(){c.play()})},play:function(b,c){var c=c||0,l=this._initAudio(b,!1);d(l,"loadeddata",function(){l.currentTime=c/1E3;l.play()})},_initAudio:function(b,c){var c="boolean"===typeof c?c:!1,d=new Audio;d.pause();d.volume=b||1;d.loop=c;d.preload="auto";d.mozLoadFrom?d.mozLoadFrom(this.audio):d.src=this.name;return d}})})},"frozen/plugins/loadImage":function(){define(["../ResourceManager",
"../utils/parseString"],function(c,d){var b=new c;return{load:function(c,g,l){c=d(c);c=b.loadImage(c);l(c)}}})},"frozen/utils/parseString":function(){define(function(){return function(c){0===c.indexOf("{")&&c.lastIndexOf("}")===c.length-1?c=JSON.parse(c.replace(/,/g,'","').replace(/:/g,'":"').replace(/\{/,'{"').replace(/\}/,'"}')):0===c.indexOf("[")&&c.lastIndexOf("]")===c.length-1&&(c=JSON.parse(c.replace(/,/g,'","').replace(/\[/g,'["').replace(/\]/g,'"]')));return c}})},"frozen/plugins/loadSound":function(){define(["../ResourceManager",
"../utils/parseString"],function(c,d){var b=new c;return{load:function(c,g,l){c=d(c);c=b.loadSound(c);l(c)}}})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(c,d,b,i,g){function l(a,d){var e=a.xhr;a.status=a.xhr.status;a.text=e.responseText;if("xml"===a.options.handleAs)a.data=e.responseXML;if(!d)try{b(a)}catch(f){d=f}d?this.reject(d):i.checkStatus(e.status)?this.resolve(a):(d=new c("Unable to load "+a.url+" status: "+e.status,a),
this.reject(d))}function e(b,n,q){var p=i.parseArgs(b,i.deepCreate(m,n),g("native-formdata")&&n&&n.data&&n.data instanceof FormData),b=p.url,n=p.options,F,r=i.deferred(p,f,k,h,l,function(){F&&F()}),s=p.xhr=e._create();if(!s)return r.cancel(new c("XHR was not created")),q?r:r.promise;p.getHeader=function(a){return this.xhr.getResponseHeader(a)};a&&(F=a(s,r,p));var t=n.data,z=!n.sync,x=n.method;try{s.open(x,b,z,n.user||j,n.password||j);if(n.withCredentials)s.withCredentials=n.withCredentials;var v=
n.headers,L;if(v)for(var y in v)"content-type"===y.toLowerCase()?L=v[y]:v[y]&&s.setRequestHeader(y,v[y]);L&&!1!==L&&s.setRequestHeader("Content-Type",L);(!v||!("X-Requested-With"in v))&&s.setRequestHeader("X-Requested-With","XMLHttpRequest");i.notify&&i.notify.emit("send",p,r.promise.cancel);s.send(t)}catch($){r.reject($)}d(r);s=null;return q?r:r.promise}g.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});g.add("dojo-force-activex-xhr",function(){return g("activex")&&!document.addEventListener&&
"file:"===window.location.protocol});g.add("native-xhr2",function(){if(g("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});g.add("native-formdata",function(){return"function"===typeof FormData});var k,h,a,f;g("native-xhr2")?(k=function(){return!this.isFulfilled()},f=function(a,b){b.xhr.abort()},a=function(a,b,d){function e(){b.handleResponse(d)}function f(a){a=new c("Unable to load "+d.url+" status: "+
a.target.status,d);b.handleResponse(d,a)}function h(a){if(a.lengthComputable)d.loaded=a.loaded,d.total=a.total,b.progress(d)}a.addEventListener("load",e,!1);a.addEventListener("error",f,!1);a.addEventListener("progress",h,!1);return function(){a.removeEventListener("load",e,!1);a.removeEventListener("error",f,!1);a.removeEventListener("progress",h,!1)}}):(k=function(a){return a.xhr.readyState},h=function(a){return 4===a.xhr.readyState},f=function(a,b){var c=b.xhr,d=typeof c.abort;("function"===d||
"object"===d||"unknown"===d)&&c.abort()});var j,m={data:null,query:null,sync:!1,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};e._create=function(){throw Error("XMLHTTP not available");};if(g("native-xhr")&&!g("dojo-force-activex-xhr"))e._create=function(){return new XMLHttpRequest};else if(g("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),e._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(q){try{new ActiveXObject("Microsoft.XMLHTTP"),e._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(p){}}i.addCommonMethods(e);
return e})},"dojo/errors/RequestError":function(){define(["./create"],function(c){return c("RequestError",function(c,b){this.response=b})})},"dojo/errors/create":function(){define(["../_base/lang"],function(c){return function(d,b,i,g){var i=i||Error,l=function(c){if(i===Error){Error.captureStackTrace&&Error.captureStackTrace(this,l);var d=Error.call(this,c),h;for(h in d)d.hasOwnProperty(h)&&(this[h]=d[h]);this.message=c;this.stack=d.stack}else i.apply(this,arguments);b&&b.apply(this,arguments)};l.prototype=
c.delegate(i.prototype,g);l.prototype.name=d;return l.prototype.constructor=l}})},"dojo/request/watch":function(){define("./util,../errors/RequestTimeoutError,../errors/CancelError,../_base/array,../_base/window,require".split(","),function(c,d,b,i,g,l){function e(){for(var b=+new Date,c=0,e;c<a.length&&(e=a[c]);c++){var g=e.response,i=g.options;if(e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(g))a.splice(c--,1),k._onAction&&k._onAction();else if(e.isReady&&e.isReady(g))a.splice(c--,1),e.handleResponse(g),
k._onAction&&k._onAction();else if(e.startTime&&e.startTime+(i.timeout||0)<b)a.splice(c--,1),e.cancel(new d("Timeout exceeded",g)),k._onAction&&k._onAction()}k._onInFlight&&k._onInFlight(e);a.length||(clearInterval(h),h=null)}function k(b){if(b.response.options.timeout)b.startTime=+new Date;b.isFulfilled()||(a.push(b),h||(h=setInterval(e,50)),b.response.options.sync&&e())}var h=null,a=[];k.cancelAll=function(){try{i.forEach(a,function(a){try{a.cancel(new b("All requests canceled."))}catch(c){}})}catch(c){}};
g&&l&&g.doc.attachEvent&&l(g.global,"unload",function(){k.cancelAll()});return k})},"dojo/request/util":function(){define("exports,../errors/RequestError,../errors/CancelError,../Deferred,../io-query,../_base/array,../_base/lang".split(","),function(c,d,b,i,g,l,e){function k(a){return h(a)}c.deepCopy=function(a,b){for(var d in b){var e=a[d],h=b[d];e!==h&&(e&&"object"===typeof e&&h&&"object"===typeof h?c.deepCopy(e,h):a[d]=h)}return a};c.deepCreate=function(a,b){var b=b||{},d=e.delegate(a),h,g;for(h in a)(g=
a[h])&&"object"===typeof g&&(d[h]=c.deepCreate(g,b[h]));return c.deepCopy(d,b)};var h=Object.freeze||function(a){return a};c.deferred=function(a,f,g,m,l,p){var o=new i(function(c){f&&f(o,a);return!c||!(c instanceof d)&&!(c instanceof b)?new b("Request canceled",a):c});o.response=a;o.isValid=g;o.isReady=m;o.handleResponse=l;g=o.then(k).otherwise(function(b){b.response=a;throw b;});c.notify&&g.then(e.hitch(c.notify,"emit","load"),e.hitch(c.notify,"emit","error"));m=g.then(function(a){return a.data||
a.text});g=h(e.delegate(m,{response:g}));p&&o.then(function(a){p.call(o,a)},function(b){p.call(o,a,b)});o.promise=g;o.then=g.then;return o};c.addCommonMethods=function(a,b){l.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,d){d=e.delegate(d||{});d.method=b;return a(c,d)}})};c.parseArgs=function(a,b,c){var d=b.data,e=b.query;if(d&&!c&&"object"===typeof d)b.data=g.objectToQuery(d);e?("object"===typeof e&&(e=g.objectToQuery(e)),b.preventCache&&
(e+=(e?"&":"")+"request.preventCache="+ +new Date)):b.preventCache&&(e="request.preventCache="+ +new Date);a&&e&&(a+=(~a.indexOf("?")?"&":"?")+e);return{url:a,options:b,getHeader:function(){return null}}};c.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/CancelError":function(){define(["./create"],function(c){return c("CancelError",null,null,{dojoType:"cancel"})})},"dojo/Deferred":function(){define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError",
"./promise/Promise","require"],function(c,d,b,i,g){var l=Object.freeze||function(){},e=function(a,b,c,d){for(var e=0;e<a.length;e++)k(a[e],b,c,d)},k=function(b,c,d){var e=b[c],f=b.deferred;if(e)try{var g=e(d);0===c?"undefined"!==typeof g&&a(f,c,g):g&&"function"===typeof g.then?(b.cancel=g.cancel,g.then(h(f,1),h(f,2),h(f,0))):a(f,1,g)}catch(i){a(f,2,i)}else a(f,c,d)},h=function(b,c){return function(d){a(b,c,d)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);
break;case 2:a.reject(c)}},f=function(a){var c=this.promise=new i,d=this,g,h,n=!1,u=[];this.isResolved=c.isResolved=function(){return 1===g};this.isRejected=c.isRejected=function(){return 2===g};this.isFulfilled=c.isFulfilled=function(){return!!g};this.isCanceled=c.isCanceled=function(){return n};this.progress=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");return c}e(u,0,a,null,d);return c};this.resolve=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");
return c}e(u,g=1,h=a,null,d);u=null;return c};var I=this.reject=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");return c}e(u,g=2,h=a,void 0,d);u=null;return c};this.then=c.then=function(a,b,d){var e=[d,a,b];e.cancel=c.cancel;e.deferred=new f(function(a){return e.cancel&&e.cancel(a)});g&&!u?k(e,g,h,void 0):u.push(e);return e.deferred.promise};this.cancel=c.cancel=function(c,d){if(g){if(!0===d)throw Error("This deferred has already been fulfilled.");}else{if(a)var e=
a(c),c="undefined"===typeof e?c:e;n=!0;if(g){if(2===g&&h===c)return c}else return"undefined"===typeof c&&(c=new b),I(c),c}};l(c)};f.prototype.toString=function(){return"[object Deferred]"};g&&g(f);return f})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(c){function d(){throw new TypeError("abstract");}return c.extend(function(){},{then:function(){d()},cancel:function(){d()},isResolved:function(){d()},isRejected:function(){d()},isFulfilled:function(){d()},isCanceled:function(){d()},
always:function(b){return this.then(b,b)},otherwise:function(b){return this.then(null,b)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/io-query":function(){define("dojo/io-query",["./_base/lang"],function(c){var d={};return{objectToQuery:function(b){var i=encodeURIComponent,g=[],l;for(l in b){var e=b[l];if(e!=d[l]){var k=i(l)+"=";if(c.isArray(e))for(var h=0,a=e.length;h<a;++h)g.push(k+i(e[h]));else g.push(k+i(e))}}return g.join("&")},
queryToObject:function(b){for(var d=decodeURIComponent,b=b.split("&"),g={},l,e,k=0,h=b.length;k<h;++k)if(e=b[k],e.length){var a=e.indexOf("=");0>a?(l=d(e),e=""):(l=d(e.slice(0,a)),e=d(e.slice(a+1)));"string"==typeof g[l]&&(g[l]=[g[l]]);c.isArray(g[l])?g[l].push(e):g[l]=e}return g}}})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(c,d){return c("RequestTimeoutError",null,d,{dojoType:"timeout"})})},"dojo/request/handlers":function(){define(["../json","../_base/kernel",
"../_base/array","../has"],function(c,d,b,i){function g(b){var a=k[b.options.handleAs];b.data=a?a(b):b.data||b.text;return b}i.add("activex","undefined"!==typeof ActiveXObject);var l;if(i("activex")){var e=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];l=function(c){var a=c.data;if(!a||!a.documentElement){var d=c.text;b.some(e,function(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(d);a=c}catch(e){return!1}return!0})}return a}}var k={javascript:function(b){return d.eval(b.text||
"")},json:function(b){return c.parse(b.text||null)},xml:l};g.register=function(b,a){k[b]=a};return g})},"dojo/json":function(){define(["./has"],function(c){var d="undefined"!=typeof JSON;c.add("json-parse",d);c.add("json-stringify",d&&'{"a":1}'==JSON.stringify({a:0},function(b,c){return c||1}));if(c("json-stringify"))return JSON;var b=function(b){return('"'+b.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,
"\\r")};return{parse:c("json-parse")?JSON.parse:function(b,c){if(c&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(b))throw new SyntaxError("Invalid characters in JSON");return eval("("+b+")")},stringify:function(c,d,l){function e(c,a,f){d&&(c=d(f,c));var j;j=typeof c;if("number"==j)return isFinite(c)?c+"":"null";if("boolean"==j)return c+"";if(null===c)return"null";if("string"==typeof c)return b(c);if("function"==j||"undefined"==j)return k;
if("function"==typeof c.toJSON)return e(c.toJSON(f),a,f);if(c instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,d){a=c["getUTC"+b]()+(d?1:0);return 10>a?"0"+a:a});if(c.valueOf()!==c)return e(c.valueOf(),a,f);var i=l?a+l:"",q=l?" ":"",p=l?"\n":"";if(c instanceof Array){for(var q=c.length,o=[],f=0;f<q;f++)j=e(c[f],i,f),"string"!=typeof j&&(j="null"),o.push(p+i+j);return"["+o.join(",")+p+a+"]"}o=[];for(f in c){var n;if(c.hasOwnProperty(f)){if("number"==
typeof f)n='"'+f+'"';else if("string"==typeof f)n=b(f);else continue;j=e(c[f],i,f);"string"==typeof j&&o.push(p+i+n+":"+q+j)}}return"{"+o.join(",")+p+a+"}"}var k;"string"==typeof d&&(l=d,d=null);return e(c,"","")}}})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();