//>>built
(function(b,c){var a,g,e,k=function(){},j=function(a){for(var d in a)return 0;return 1},l={}.toString,h=function(a){return"[object Function]"==l.call(a)},d=function(a){return"[object String]"==l.call(a)},m=function(a){return"[object Array]"==l.call(a)},f=function(a,d){if(a)for(var b=0;b<a.length;)d(a[b++])},i=function(a,d){for(var b in d)a[b]=d[b];return a},o=function(a,d){return i(Error(a),{src:"dojoLoader",info:d})},t=1,v=function(){return"_"+t++},n=function(a,d,b){return ja(a,d,b,0,n)},r=this,
A=r.document,u=A&&A.createElement("DiV"),x=n.has=function(a){return h(p[a])?p[a]=p[a](r,A,u):p[a]},p=x.cache=c.hasCache;x.add=function(a,d,b,f){(void 0===p[a]||f)&&(p[a]=d);return b&&x(a)};for(var q in b.has)x.add(q,b.has[q],0,1);n.async=1;var F=new Function("return eval(arguments[0]);");n.eval=function(a,d){return F(a+"\r\n////@ sourceURL="+d)};var B={},w=n.signal=function(a,d){var b=B[a];f(b&&b.slice(0),function(a){a.apply(null,m(d)?d:[d])})},V=n.on=function(a,d){var b=B[a]||(B[a]=[]);b.push(d);
return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===d){b.splice(a,1);break}}}},I=[],qa={},ka=[],$={},W=n.map={},O=[],C={},X="",M={},Y={};q={};var J=function(a){var d,b,f,i;for(d in Y)b=Y[d],(f=d.match(/^url\:(.+)/))?M["url:"+Ia(f[1],a)]=b:"*now"==d?i=b:"*noref"!=d&&(f=ra(d,a),M[f.mid]=M["url:"+f.url]=b);i&&i(L(a));Y={}},aa=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},ba=function(a,d){d.splice(0,d.length);for(var b in a)d.push([b,a[b],RegExp("^"+
aa(b)+"(/|$)"),b.length]);d.sort(function(a,d){return d[3]-a[3]});return d},ca=function(a){var d=a.name;d||(d=a,a={name:d});a=i({main:"main"},a);a.location=a.location?a.location:d;if(a.packageMap)W[d]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);$[d]=a},la=[],N=function(a,b,o){for(var c in a){if("waitSeconds"==c)n.waitms=1E3*(a[c]||0);"cacheBust"==c&&(X=a[c]?d(a[c])?a[c]:(new Date).getTime()+"":"");if("baseUrl"==c||"combo"==c)n[c]=a[c];a[c]!==p&&(n.rawConfig[c]=a[c],"has"!=c&&
x.add("config-"+c,a[c],0,b))}if(!n.baseUrl)n.baseUrl="./";/\/$/.test(n.baseUrl)||(n.baseUrl+="/");for(c in a.has)x.add(c,a.has[c],0,b);f(a.packages,ca);for(e in a.packagePaths)f(a.packagePaths[e],function(a){var b=e+"/"+a;d(a)&&(a={name:a});a.location=b;ca(a)});ba(i(W,a.map),O);f(O,function(a){a[1]=ba(a[1],[]);if("*"==a[0])O.star=a});ba(i(qa,a.paths),ka);f(a.aliases,function(a){d(a[0])&&(a[0]=RegExp("^"+aa(a[0])+"$"));I.push(a)});if(b)la.push({config:a.config});else for(c in a.config)b=Z(c,o),b.config=
i(b.config||{},a.config[c]);if(a.cache)J(),Y=a.cache,a.cache["*noref"]&&J();w("config",[a,n.rawConfig])};n.rawConfig={};N(c,1);N(b,1);N(q,1);var H=function(a){D(function(){f(a.deps,Ka)})},ja=function(a,b,f,c,e){var h;if(d(a)){if((h=Z(a,c,!0))&&h.executed)return h.result;throw o("undefinedModule",a);}m(a)||(N(a,0,c),a=b,b=f);if(m(a))if(a.length){for(var f="require*"+v(),g,t=[],j=0;j<a.length;)g=a[j++],t.push(Z(g,c));h=i(sa("",f,0,""),{injected:2,deps:t,def:b||k,require:c?c.require:n,gc:1});C[h.mid]=
h;H(h);var s=da&&0!="sync";D(function(){ma(h,s)});h.executed||K.push(h);z()}else b&&b();return e},L=function(a){if(!a)return n;var d=a.require;if(!d)d=function(b,f,i){return ja(b,f,i,a,d)},a.require=i(d,n),d.module=a,d.toUrl=function(d){return Ia(d,a)},d.toAbsMid=function(d){return ea(d,a)};return d},K=[],E=[],s={},Va=function(a){a.injected=1;s[a.mid]=1;a.url&&(s[a.url]=a.pack||1);ta()},oa=function(a){a.injected=2;delete s[a.mid];a.url&&delete s[a.url];j(s)&&na()},Wa=n.idle=function(){return!E.length&&
j(s)&&!K.length&&!da},Da=function(a,d){if(d)for(var b=0;b<d.length;b++)if(d[b][2].test(a))return d[b];return 0},La=function(a){for(var d=[],b,f,a=a.replace(/\\/g,"/").split("/");a.length;)b=a.shift(),".."==b&&d.length&&".."!=f?(d.pop(),f=d[d.length-1]):"."!=b&&d.push(f=b);return d.join("/")},sa=function(a,d,b,f){return{pid:a,mid:d,pack:b,url:f,executed:0,def:0}},Ma=function(d,b,i,c,e,k,g,m){var t,j,s,n;n=/^\./.test(d);if(/(^\/)|(\:)|(\.js$)/.test(d)||n&&!b)return sa(0,d,0,d);d=La(n?b.mid+"/../"+d:
d);if(/^\./.test(d))throw o("irrationalPath",d);b&&(s=Da(b.mid,k));(s=(s=s||k.star)&&Da(d,s[1]))&&(d=s[1]+d.substring(s[3]));b=(a=d.match(/^([^\/]+)(\/(.+))?$/))?a[1]:"";(t=i[b])?d=b+"/"+(j=a[3]||t.main):b="";var l=0;f(I,function(a){var b=d.match(a[0]);b&&0<b.length&&(l=h(a[1])?d.replace(a[0],a[1]):a[1])});if(l)return Ma(l,0,i,c,e,k,g,m);if(i=c[d])return m?sa(i.pid,i.mid,i.pack,i.url):c[d];c=(s=Da(d,g))?s[1]+d.substring(s[3]):b?t.location+"/"+j:d;/(^\/)|(\:)/.test(c)||(c=e+c);return sa(b,d,t,La(c+
".js"))},ra=function(a,d){return Ma(a,d,$,C,n.baseUrl,O,ka)},Na=function(a,d,b){return a.normalize?a.normalize(d,function(a){return ea(a,b)}):ea(d,b)},Oa=0,Z=function(a,d,b){var f,i;(f=a.match(/^(.+?)\!(.*)$/))?(i=Z(f[1],d,b),5===i.executed&&!i.load&&fa(i),i.load?(f=Na(i,f[2],d),a=i.mid+"!"+(i.dynamic?++Oa+"!":"")+f):(f=f[2],a=i.mid+"!"+ ++Oa+"!waitingForPlugin"),a={plugin:i,mid:a,req:L(d),prid:f}):a=ra(a,d);return C[a.mid]||!b&&(C[a.mid]=a)},ea=n.toAbsMid=function(a,d){return ra(a,d).mid},Ia=n.toUrl=
function(a,d){var b=ra(a+"/x",d),f=b.url;return S(0===b.pid?a:f.substring(0,f.length-5))},Ea={injected:2,executed:5,def:3,result:3},P=function(a){return C[a]=i({mid:a},Ea)},Xa=P("require"),Ya=P("exports"),Pa=P("module"),ua={},Fa=0,fa=function(a){var d=a.result;a.dynamic=d.dynamic;a.normalize=d.normalize;a.load=d.load;return a},Qa=function(a){var d={};f(a.loadQ,function(b){var f=Na(a,b.prid,b.req.module),c=a.dynamic?b.mid.replace(/waitingForPlugin$/,f):a.mid+"!"+f,f=i(i({},b),{mid:c,prid:f,injected:0});
C[c]||va(C[c]=f);d[b.mid]=C[c];oa(b);delete C[b.mid]});a.loadQ=0;var b=function(a){for(var b=a.deps||[],f=0;f<b.length;f++)(a=d[b[f].mid])&&(b[f]=a)},c;for(c in C)b(C[c]);f(K,b)},T=function(a){n.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Fa++;a.loadQ&&(fa(a),Qa(a));for(g=0;g<K.length;)K[g]===a?K.splice(g,1):g++;/^require\*/.test(a.mid)&&delete C[a.mid]},G=[],ma=function(a,d){if(4===a.executed)return n.trace("loader-circular-dependency",[G.concat(a.mid).join("->")]),!a.def||d?ua:a.cjs&&
a.cjs.exports;if(!a.executed){if(!a.def)return ua;var b=a.mid,f=a.deps||[],i,c=[],o=0;for(a.executed=4;o<f.length;){i=f[o++];i=i===Xa?L(a):i===Ya?a.cjs.exports:i===Pa?a.cjs:ma(i,d);if(i===ua)return a.executed=0,n.trace("loader-exec-module",["abort",b]),ua;c.push(i)}n.trace("loader-run-factory",[a.mid]);b=a.def;c=h(b)?b.apply(null,c):b;a.result=void 0===c&&a.cjs?a.cjs.exports:c;T(a)}return a.result},da=0,D=function(a){try{da++,a()}finally{da--}Wa()&&w("idle",[])},z=function(){da||D(function(){for(var a,
d,b=0;b<K.length;)a=Fa,d=K[b],ma(d),a!=Fa?b=0:b++})};void 0===x("dojo-loader-eval-hint-url")&&x.add("dojo-loader-eval-hint-url",1);var S=function(a){a+="";return a+(X?(/\?/.test(a)?"&":"?")+X:"")},va=function(a){var d=a.plugin;5===d.executed&&!d.load&&fa(d);var b=function(d){a.result=d;oa(a);T(a);z()};d.load?d.load(a.prid,a.req,b):d.loadQ?d.loadQ.push(a):(d.loadQ=[a],K.unshift(d),Ka(d))},wa=0,Ga=0,Q=0,xa=function(a,d){x("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Q=1;a===wa?wa.call(null):
n.eval(a,x("dojo-loader-eval-hint-url")?d.url:d.mid);Q=0},Ka=function(a){var d=a.mid,b=a.url;if(!a.executed&&!a.injected&&!(s[d]||a.url&&(a.pack&&s[a.url]===a.pack||1==s[a.url])))if(Va(a),a.plugin)va(a);else{var f=function(){ya(a);2!==a.injected&&(oa(a),i(a,Ea),n.trace("loader-define-nonmodule",[a.url]));z()};(wa=M[d]||M["url:"+a.url])?(n.trace("loader-inject",["cache",a.mid,b]),xa(wa,a),f()):(n.trace("loader-inject",["script",a.mid,b]),Ga=a,n.injectUrl(S(b),f,a),Ga=0)}},za=function(a,d,b){n.trace("loader-define-module",
[a.mid,d]);if(2===a.injected)return w("error",o("multipleDefine",a)),a;i(a,{deps:d,def:b,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(d){a.cjs.exports=d},config:function(){return a.config}}});for(var f=0;f<d.length;f++)d[f]=Z(d[f],a);oa(a);if(!h(b)&&!d.length)a.result=b,T(a);return a},ya=function(a,d){for(var b=[],i,c;E.length;)c=E.shift(),d&&(c[0]=d.shift()),i=c[0]&&Z(c[0])||a,b.push([i,c[1],c[2]]);J(a);f(b,function(a){H(za.apply(null,a))})},na=k,ta=k;x.add("ie-event-behavior",
!!A.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ga=function(a,d,b,f){if(x("ie-event-behavior"))return a.attachEvent(b,f),function(){a.detachEvent(b,f)};a.addEventListener(d,f,!1);return function(){a.removeEventListener(d,f,!1)}},pa=ga(window,"load","onload",function(){n.pageLoaded=1;"complete"!=A.readyState&&(A.readyState="complete");pa()}),ha=A.getElementsByTagName("script")[0],Aa=ha.parentNode;n.injectUrl=function(a,d,b){var b=b.node=A.createElement("script"),
f=ga(b,"load","onreadystatechange",function(a){var a=a||window.event,b=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(b.readyState))f(),i(),d&&d()}),i=ga(b,"error","onerror",function(d){f();i();w("error",o("scriptError",[a,d]))});b.type="text/javascript";b.charset="utf-8";b.src=a;Aa.insertBefore(b,ha);return b};n.log=k;n.trace=k;P=function(a,b,f){var i=arguments.length,c=["require","exports","module"],e=[0,a,b];1==i?e=[0,h(a)?c:[],a]:2==i&&d(a)?e=[a,h(b)?c:[],b]:3==i&&(e=[a,b,f]);
n.trace("loader-define",e.slice(0,2));if((i=e[0]&&Z(e[0]))&&!s[i.mid])H(za(i,e[1],e[2]));else if(!x("ie-event-behavior")||Q)E.push(e);else{i=i||Ga;if(!i)for(a in s)if((c=C[a])&&c.node&&"interactive"===c.node.readyState){i=c;break}i?(J(i),H(za(i,e[1],e[2]))):w("error",o("ieDefineFailed",e[0]));z()}};P.amd={vendor:"dojotoolkit.org"};i(i(n,c.loaderPatch),b.loaderPatch);V("error",function(a){try{if(console.error(a),a instanceof Error)for(var d in a);}catch(b){}});i(n,{uid:v,cache:M,packs:$});if(!r.define)r.define=
P,r.require=n,f(la,function(a){N(a)}),V=q.deps||b.deps||c.deps,q=q.callback||b.callback||c.callback,n.boot=V||q?[V||[],q]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"./",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../frozen-dev-boilerplate",name:"frozen-dev-boilerplate"},{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../frozen",main:"GameCore",
name:"frozen"},{location:"../lodash",main:"lodash",name:"lodash"},{location:"../game",main:"game",name:"game"}]});
require({cache:{"dist/game":function(){define([],1)},"game/game":function(){define("./state,./handleInput,./update,./draw,frozen/GameCore,./ui/CanvasDND,./ui/events".split(","),function(b,c,a,g,e,k){c=new e({canvasId:"canvas",handleInput:c,update:a,draw:g});b.game=c;new k;c.run()})},"game/state":function(){define(["./box","./StateManager","dojo/dom"],function(b,c,a){return new c({entities:{},jsonObjs:[],undoObjs:[],geometries:[],tool:"rectangle",toolType:"static",runSimulation:!0,showStatic:!0,box:b,
backImg:null,game:null,codeMirror:CodeMirror.fromTextArea(a.byId("output"),{theme:"frozen",matchBrackets:!0,lineWrapping:!0,mode:"application/json"})})})},"game/box":function(){define(["./ui/getGravity","frozen/box2d/Box"],function(b,c){var a=b();return new c({gravityY:a.y,gravityX:a.x})})},"game/ui/getGravity":function(){define(["dojo/dom","dojo/domReady!"],function(b){var c=b.byId("gravityX"),a=b.byId("gravityY");return function(){return{x:parseFloat(c.value,10),y:parseFloat(a.value,10)}}})},"dojo/dom":function(){define(["./sniff",
"./_base/window"],function(b,c){if(7>=b("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}var g={};g.byId=b("ie")?function(a,b){if("string"!=typeof a)return a;var e=b||c.doc,h=a&&e.getElementById(a);if(h&&(h.attributes.id.value==a||h.id==a))return h;e=e.all[a];if(!e||e.nodeName)e=[e];for(var d=0;h=e[d++];)if(h.attributes&&h.attributes.id&&h.attributes.id.value==a||h.id==a)return h}:function(a,b){return("string"==typeof a?(b||c.doc).getElementById(a):a)||null};g.isDescendant=function(a,
b){try{a=g.byId(a);for(b=g.byId(b);a;){if(a==b)return!0;a=a.parentNode}}catch(c){}return!1};b.add("css-user-select",function(a,b,c){if(!c)return!1;var a=c.style,b=["Khtml","O","ms","Moz","Webkit"],c=b.length,e="userSelect";do if("undefined"!==typeof a[e])return e;while(c--&&(e=b[c]+"UserSelect"));return!1});var e=b("css-user-select");g.setSelectable=e?function(a,b){g.byId(a).style[e]=b?"":"none"}:function(a,b){var a=g.byId(a),c=a.getElementsByTagName("*"),e=c.length;if(b)for(a.removeAttribute("unselectable");e--;)c[e].removeAttribute("unselectable");
else for(a.setAttribute("unselectable","on");e--;)c[e].setAttribute("unselectable","on")};return g})},"dojo/sniff":function(){define(["./has"],function(b){var c=navigator,a=c.userAgent,c=c.appVersion,g=parseFloat(c);b.add("air",0<=a.indexOf("AdobeAIR"));b.add("khtml",0<=c.indexOf("Konqueror")?g:void 0);b.add("webkit",parseFloat(a.split("WebKit/")[1])||void 0);b.add("chrome",parseFloat(a.split("Chrome/")[1])||void 0);b.add("safari",0<=c.indexOf("Safari")&&!b("chrome")?parseFloat(c.split("Version/")[1]):
void 0);b.add("mac",0<=c.indexOf("Macintosh"));b.add("quirks","BackCompat"==document.compatMode);b.add("ios",/iPhone|iPod|iPad/.test(a));b.add("android",parseFloat(a.split("Android ")[1])||void 0);if(!b("webkit")){0<=a.indexOf("Opera")&&b.add("opera",9.8<=g?parseFloat(a.split("Version/")[1])||g:g);0<=a.indexOf("Gecko")&&!b("khtml")&&!b("webkit")&&b.add("mozilla",g);b("mozilla")&&b.add("ff",parseFloat(a.split("Firefox/")[1]||a.split("Minefield/")[1])||void 0);if(document.all&&!b("opera"))a=parseFloat(c.split("MSIE ")[1])||
void 0,(c=document.documentMode)&&5!=c&&Math.floor(a)!=c&&(a=c),b.add("ie",a);b.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return b})},"dojo/has":function(){define("dojo/has",["require","module"],function(b){var c=b.has||function(){};c.add("touch","ontouchstart"in document);c.add("device-width",screen.availWidth||innerWidth);b=document.createElement("form");c.add("dom-attributes-explicit",0==b.attributes.length);c.add("dom-attributes-specified-flag",0<b.attributes.length&&40>b.attributes.length);
c.clearElement=function(a){a.innerHTML="";return a};c.normalize=function(a,b){var e=a.match(/[\?:]|[^:\?]*/g),k=0,j=function(a){var b=e[k++];if(":"==b)return 0;if("?"==e[k++]){if(!a&&c(b))return j();j(!0);return j(a)}return b||0};return(a=j())&&b(a)};c.load=function(a,b,c){a?b([a],c):c()};return c})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(b,c,a){var g={global:b.global,doc:this.document||null,body:function(a){a=a||b.doc;return a.body||a.getElementsByTagName("body")[0]},
setContext:function(a,c){b.global=g.global=a;b.doc=g.doc=c},withGlobal:function(a,c,j,l){var h=b.global;try{return b.global=g.global=a,g.withDoc.call(null,a.document,c,j,l)}finally{b.global=g.global=h}},withDoc:function(c,k,j,l){var h=g.doc,d=a("quirks"),m=a("ie"),f,i,o;try{b.doc=g.doc=c;b.isQuirks=a.add("quirks","BackCompat"==b.doc.compatMode,!0,!0);if(a("ie")&&(o=c.parentWindow)&&o.navigator)f=parseFloat(o.navigator.appVersion.split("MSIE ")[1])||void 0,(i=c.documentMode)&&5!=i&&Math.floor(f)!=
i&&(f=i),b.isIE=a.add("ie",f,!0,!0);j&&"string"==typeof k&&(k=j[k]);return k.apply(j,l||[])}finally{b.doc=g.doc=h,b.isQuirks=a.add("quirks",d,!0,!0),b.isIE=a.add("ie",m,!0,!0)}}};c.mixin(b,g);return g})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(b,c,a,g){var e,b={},k={},j={config:c,global:this,dijit:b,dojox:k},b={dojo:["dojo",j],dijit:["dijit",b],dojox:["dojox",k]},g=a.map&&a.map[g.id.match(/[^\/]+/)[0]];for(e in g)b[e]?b[e][0]=g[e]:b[e]=[g[e],{}];for(e in b)g=
b[e],g[1]._scopeName=g[0],c.noGlobals||(this[g[0]]=g[1]);j.scopeMap=b;j.baseUrl=j.config.baseUrl=a.baseUrl;j.isAsync=a.async;j.locale=c.locale;c="$Rev: 30226 $".match(/\d+/);j.version={major:1,minor:8,patch:3,flag:"",revision:c?+c[0]:NaN,toString:function(){var a=j.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(j);j.exit=function(){};j.deprecated=j.experimental=
function(){};j._hasResource={};return j})},"dojo/_base/config":function(){define(["../has","require"],function(b,c){var a={},g=c.rawConfig,e;for(e in g)a[e]=g[e];return a})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(b,c){c.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var a=c("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],g=a.length,
e=function(a,c,f){var i,o=0,e=b.global;if(!f)if(a.length){i=a[o++];try{f=b.scopeMap[i]&&b.scopeMap[i][1]}catch(h){}f=f||(i in e?e[i]:c?e[i]={}:void 0)}else return e;for(;f&&(i=a[o++]);)f=i in f?f[i]:c?f[i]={}:void 0;return f},k=Object.prototype.toString,j=function(a,b,f){return(f||[]).concat(Array.prototype.slice.call(a,b||0))},l=/\{([^\}]+)\}/g,h={_extraNames:a,_mixin:function(d,b,f){var i,o,e,h={};for(i in b)if(o=b[i],!(i in d)||d[i]!==o&&(!(i in h)||h[i]!==o))d[i]=f?f(o):o;if(c("bug-for-in-skips-shadowed")&&
b)for(e=0;e<g;++e)if(i=a[e],o=b[i],!(i in d)||d[i]!==o&&(!(i in h)||h[i]!==o))d[i]=f?f(o):o;return d},mixin:function(a,b){a||(a={});for(var f=1,c=arguments.length;f<c;f++)h._mixin(a,arguments[f]);return a},setObject:function(a,b,f){var c=a.split("."),a=c.pop();return(f=e(c,!0,f))&&a?f[a]=b:void 0},getObject:function(a,b,f){return e(a.split("."),b,f)},exists:function(a,b){return void 0!==h.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&
(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===k.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||h.isArray(a)||h.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!h.isString(a)&&!h.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(h.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!h.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,b){for(var f=1,c=arguments.length;f<
c;f++)h._mixin(a.prototype,arguments[f]);return a},_hitchArgs:function(a,c){var f=h._toArray(arguments,2),i=h.isString(c);return function(){var o=h._toArray(arguments),e=i?(a||b.global)[c]:c;return e&&e.apply(a||this,f.concat(o))}},hitch:function(a,c){if(2<arguments.length)return h._hitchArgs.apply(b,arguments);c||(c=a,a=null);if(h.isString(c)){a=a||b.global;if(!a[c])throw['lang.hitch: scope["',c,'"] is null (scope="',a,'")'].join("");return function(){return a[c].apply(a,arguments||[])}}return!a?
c:function(){return c.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,f){a.prototype=b;var c=new a;a.prototype=null;f&&h._mixin(c,f);return c}}(),_toArray:c("ie")?function(){function a(b,d,c){c=c||[];for(d=d||0;d<b.length;d++)c.push(b[d]);return c}return function(b){return(b.item?a:j).apply(this,arguments)}}():j,partial:function(a){return h.hitch.apply(b,[null].concat(h._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||h.isFunction(a))return a;if(a.nodeType&&
"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,f,c;if(h.isArray(a)){b=[];for(f=0,c=a.length;f<c;++f)f in a&&b.push(h.clone(a[f]))}else b=a.constructor?new a.constructor:{};return h._mixin(b,a,h.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,f){return a.replace(f||l,h.isFunction(b)?b:function(a,d){return h.getObject(d,
!1,b)})}};h.mixin(b,h);return h})},"dojo/domReady":function(){define("dojo/domReady",["./has"],function(){function b(b){k?b(a):j.push(b)}var c=this,a=document,g={loaded:1,complete:1},e="string"!=typeof a.readyState,k=!!g[a.readyState];if(e)a.readyState="loading";if(!k){var j=[],l=[],h=function(b){b=b||c.event;if(!(k||"readystatechange"==b.type&&!g[a.readyState])){k=1;if(e)a.readyState="complete";for(;j.length;)j.shift()(a)}},d=function(a,b){a.addEventListener(b,h,!1);j.push(function(){a.removeEventListener(b,
h,!1)})};d(a,"DOMContentLoaded");d(c,"load");"onreadystatechange"in a?d(a,"readystatechange"):e||l.push(function(){return g[a.readyState]});if(l.length){var m=function(){if(!k){for(var a=l.length;a--;)if(l[a]()){h("poller");return}setTimeout(m,30)}};m()}}b.load=function(a,d,c){b(c)};return b})},"frozen/box2d/Box":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(b,c,a){var g=Box2D.Common.Math.b2Vec2,e=Box2D.Dynamics.b2BodyDef,k=Box2D.Dynamics.b2Body,j=Box2D.Dynamics.b2FixtureDef,
l=Box2D.Dynamics.b2World,h=Box2D.Collision.Shapes.b2PolygonShape,d=Box2D.Collision.Shapes.b2CircleShape,m=Box2D.Dynamics.Joints.b2RevoluteJointDef;return b(c,{intervalRate:60,adaptive:!1,bodiesMap:[],fixturesMap:[],world:null,gravityX:0,gravityY:10,allowSleep:!0,resolveCollisions:!1,contactListener:null,collisions:null,constructor:function(a){if(a&&a.intervalRate)this.intervalRate=parseInt(a.intervalRate,10);this.world=new l(new g(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&
this.addContactListener(this.contactListener||this)},update:function(a){if(this.resolveCollisions)this.collisions={};var b=Date.now();a?this.world.Step(a/1E3,10,10):this.world.Step(this.adaptive?(b-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.world.ClearForces();return Date.now()-b},getState:function(){for(var a={},b=this.world.m_bodyList;b;b=b.m_next){var d=b.m_userData;if(b.IsActive()&&"undefined"!==typeof d&&null!==d&&(a[d]={x:b.m_xf.position.x,y:b.m_xf.position.y,angle:b.m_sweep.a,
center:{x:b.m_sweep.c.x,y:b.m_sweep.c.y},linearVelocity:b.m_linearVelocity,angularVelocity:b.m_angularVelocity},this.resolveCollisions))a[d].collisions=this.collisions[d]||null}return a},updateExternalState:function(a){var b=this.getState(),d;for(d in b){var c=a[d];c&&!c.staticBody&&c.update(b[d])}},setBodies:function(a){for(var b in a)this.addBody(a[b]);this.ready=!0},addBody:function(a){var b=new e,c=new j,t,m,n,l;c.restitution=a.restitution;c.density=a.density;c.friction=a.friction;b.type=a.staticBody?
k.b2_staticBody:k.b2_dynamicBody;b.position.x=a.x;b.position.y=a.y;b.userData=a.id;b.angle=a.angle;b.linearDamping=a.linearDamping;b.angularDamping=a.angularDamping;var A=this.world.CreateBody(b);if(a.radius)c.shape=new d(a.radius),A.CreateFixture(c);else if(a.points){m=[];for(b=0;b<a.points.length;b++)n=new g,n.Set(a.points[b].x,a.points[b].y),m[b]=n;c.shape=new h;c.shape.SetAsArray(m,m.length);A.CreateFixture(c)}else if(a.polys)for(t=0;t<a.polys.length;t++){m=a.polys[t];l=[];for(b=0;b<m.length;b++)n=
new g,n.Set(m[b].x,m[b].y),l[b]=n;c.shape=new h;c.shape.SetAsArray(l,l.length);A.CreateFixture(c)}else c.shape=new h,c.shape.SetAsBox(a.halfWidth,a.halfHeight),A.CreateFixture(c);this.bodiesMap[a.id]=A},setPosition:function(a,b,d){this.bodiesMap[a].SetPosition(new g(b,d))},setAngle:function(a,b){this.bodiesMap[a].SetAngle(b)},setLinearVelocity:function(a,b,d){this.bodiesMap[a].SetLinearVelocity(new g(b,d))},applyImpulseDegrees:function(a,b,d){a=this.bodiesMap[a];a.ApplyImpulse(new g(Math.sin(b*(Math.PI/
180))*d,-1*Math.cos(b*(Math.PI/180))*d),a.GetWorldCenter())},applyForceDegrees:function(a,b,d){a=this.bodiesMap[a];a.ApplyForce(new g(Math.sin(b*(Math.PI/180))*d,-1*Math.cos(b*(Math.PI/180))*d),a.GetWorldCenter())},applyImpulse:function(a,b,d){a=this.bodiesMap[a];a.ApplyImpulse(new g(Math.sin(b)*d,-1*Math.cos(b)*d),a.GetWorldCenter())},applyForce:function(a,b,d){a=this.bodiesMap[a];a.ApplyForce(new g(Math.sin(b)*d,-1*Math.cos(b)*d),a.GetWorldCenter())},applyTorque:function(a,b){this.bodiesMap[a].ApplyTorque(b)},
setGravity:function(a){this.world.SetGravity(new g(a.x,a.y))},removeBody:function(a){this.bodiesMap[a]&&(this.fixturesMap[a]&&this.bodiesMap[a].DestroyFixture(this.fixturesMap[a]),this.world.DestroyBody(this.bodiesMap[a]),delete this.bodiesMap[a])},wakeUpBody:function(a){this.bodiesMap[a]&&this.bodiesMap[a].SetAwake(!0)},addContactListener:function(a){var b=new Box2D.Dynamics.b2ContactListener;if(a.beginContact)b.BeginContact=function(b){a.beginContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};
if(a.EndContact)b.endContact=function(b){a.endContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.postSolve)b.PostSolve=function(b,d){a.postSolve(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData(),d.normalImpulses[0])};this.world.SetContactListener(b)},addRevoluteJoint:function(b,d,c){var b=this.bodiesMap[b],d=this.bodiesMap[d],e=new m;e.Initialize(b,d,b.GetWorldCenter());c&&a.mixin(e,c);this.world.CreateJoint(e)},beginContact:function(){},
endContact:function(){},postSolve:function(a,b,d){this.collisions[a]=this.collisions[a]||[];this.collisions[a].push({id:b,impulse:d});this.collisions[b]=this.collisions[b]||[];this.collisions[b].push({id:a,impulse:d})}})})},"dcl/dcl":function(){(function(b){"undefined"!=typeof define?define(["./mini"],b):"undefined"!=typeof module?module.exports=b(require("./mini")):dcl=b(dcl)})(function(b){function c(){}function a(a,b,e){var h=a||c,d=b||c,g=e||c,f=function(){var a;h.apply(this,arguments);try{a=g.apply(this,
arguments)}catch(b){a=b}d.call(this,arguments,a);if(a instanceof Error)throw a;return a};f.advices={b:a,a:b,f:e};return f}function g(a){return function(c,e){var h=c._m,d;h&&((d=+h.w[e]||0)&&d!=a&&b._e("set chaining",e,c,a,d),h.w[e]=a)}}var e=b(b.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});b.mix(b,{Advice:e,advise:function(a){return new e(a)},before:function(a){return new e({before:a})},after:function(a){return new e({after:a})},around:b.superCall,
chainBefore:g(1),chainAfter:g(2),isInstanceOf:function(a,b){if(a instanceof b)return!0;var c=a.constructor._m,e;if(c)for(c=c.b,e=c.length-1;0<=e;--e)if(c[e]===b)return!0;return!1},_sb:function(c,e,g,h){var h=h[g]=b._ec(e,g,"f"),d=b._ec(e,g,"b").reverse(),e=b._ec(e,g,"a"),h=c?b._st(h,1==c?function(a){return b._sc(a.reverse())}:b._sc,g):b._ss(h,g);return!d.length&&!e.length?h||function(){}:a(b._sc(d),b._sc(e),h)}});return b})},"dcl/mini":function(){(function(b){"undefined"!=typeof define?define([],
b):"undefined"!=typeof module?module.exports=b():dcl=b()})(function(){function b(d,c){var f=[0],i,m,j,u,l,p,q,F,B=0,w;if(d)if(d instanceof Array){u={};q=d.slice(0).reverse();for(F=q.length-1;0<=F;--F)if(m=q[F],m._u=m._u||g++,i=m._m){for(p=i.b,B=p.length-1;0<B;--B)w=p[B]._u,u[w]=(u[w]||0)+1;q[F]=p.slice(0)}else q[F]=[m];l={};a:for(;q.length;){for(F=0;F<q.length;++F)if(p=q[F],m=p[0],w=m._u,!u[w]){l[w]||(f.push(m),l[w]=1);p.shift();p.length?--u[p[0]._u]:q.splice(F,1);continue a}b._e("cycle",c,q)}d=d[0];
B=f.length-((u=d._m)&&d===f[f.length-(B=u.b.length)]?B:1)-1}else d._u=d._u||g++,f=f.concat((u=d._m)?u.b:d);i=d?b.delegate(d[k]):{};for(p=d&&(u=d._m)?b.delegate(u.w):{constructor:2};0<B;--B)if(m=f[B],u=m._m,h(i,u&&u.h||m[k]),u)for(w in q=u.w)p[w]=(+p[w]||0)|q[w];for(w in c)a(u=c[w])?p[w]=+p[w]||0:i[w]=u;l={b:f,h:c,w:p,c:{}};f[0]={_m:l,prototype:i};m=i;u=l.w;p=l.b;q=l.c;for(j in u)m[j]=b._sb(u[j],p,j,q);j=i[e];j._m=l;j[k]=i;f[0]=j;return b._p(j)}function c(a){this.f=a}function a(a){return a instanceof
c}var g=0,e="constructor",k="prototype",j=function(){},l={},h,d,m,f,i;(h=function(a,b){for(var d in b)a[d]=b[d]})(b,{mix:h,delegate:function(a){j[k]=a;a=new j;j[k]=null;return a},Super:c,superCall:function(a){return new c(a)},_p:function(a){return a},_e:function(a){throw Error("dcl: "+a);},_f:function(a,b){var d=a.f(b);d.ctr=a.ctr;return d},_ec:d=function(b,d,c){for(var e=b.length-1,f=[],i,h,g="f"==c;i=b[e];--e)if((h=i._m)?(h=h.h).hasOwnProperty(d)&&(a(h=h[d])?g?h.f:h=h[c]:g):g&&(h=i[k][d])&&h!==
l[d])h.ctr=i,f.push(h);return f},_sc:f=function(a){var b=a.length,d;return!b?0:1==b?(d=a[0],function(){d.apply(this,arguments)}):function(){for(var d=0;d<b;++d)a[d].apply(this,arguments)}},_ss:m=function(d,c){for(var f=0,i,h=l[c];i=d[f];++f)h=a(i)?d[f]=b._f(i,h,c):i;return c!=e?h:function(){h.apply(this,arguments)}},_st:i=function(d,c,f){for(var i=0,h,g,k=0;h=d[i];++i)a(h)&&(g=i-k,d[i]=b._f(h,!g?0:1==g?d[k]:c(d.slice(k,i)),f),k=i);g=i-k;return!g?0:1==g&&f!=e?d[k]:c(k?d.slice(k):d)},_sb:function(a,
b,c,e){b=e[c]=d(b,c,"f");return(a?i(b,f,c):m(b,c))||function(){}}});return b})},"dcl/bases/Mixer":function(){(function(b){"undefined"!=typeof define?define(["../mini"],b):"undefined"!=typeof module?module.exports=b(require("../mini")):dclBasesMixer=b(dcl)})(function(b){return b(null,{declaredClass:"dcl/bases/Mixer",constructor:function(c){b.mix(this,c)}})})},"game/StateManager":function(){define(["dcl","dcl/bases/Mixer"],function(b,c){return b(c,{})})},"game/handleInput":function(){define("./state,./createBodies,./createJSON/main,./utils/insideCanvas,dojo/dom,frozen/utils".split(","),
function(b,c,a,g,e,k){var j=e.byId("xdisp"),l=e.byId("ydisp"),h;return function(d){if(d.mouseAction.position)j.innerHTML=d.mouseAction.position.x,l.innerHTML=d.mouseAction.position.y;if(d.mouseAction.isPressed()&&g(d.mouseAction.startPosition,this)&&!h)h=d.mouseAction.startPosition,b.geometries.push(h);if(!d.mouseAction.isPressed()&&d.mouseAction.endPosition&&h){h=d.mouseAction.endPosition;if(!("polygon"===b.tool&&10!==b.geometries.length&&(1>=b.geometries.length||4<k.distance(b.geometries[0],h))))b.geometries.push(h),
b.jsonObjs.push(a[b.tool](b.geometries)),c(),b.geometries=[],d.mouseAction.endPosition=null;h=null}}})},"game/createBodies":function(){define("./state,./Entities,./ui/getGravity,./ui/displayJSON,./ui/toggleUndo,lodash,dojo/dom-class,frozen/box2d/Box".split(","),function(b,c,a,g,e,k,j,l){var h=0;return function(){var d=!1,m=a();b.box=new l({gravityX:m.x,gravityY:m.y});b.entities={};(m=k.chain(b.jsonObjs).map(function(a){a=parseInt(a.id,10);return"undefined"===typeof a||null===a||isNaN(a)?-1:a}).max().value())&&
(h=m+1);k.forEach(b.jsonObjs,function(a){if(!a.staticBody&&!a.zone)a.color=a.color||"rgba(0,255,0,0.4)";if(a.zone)a.color=a.color||"rgba(255,0,0,0.2)";if("undefined"===typeof a.id||null===a.id)a.id=h,h++;if(b.entities[a.id])d=!0;else{var e=new c[a.type](a);e.scaleShape(1/30);b.entities[a.id]=e;a.zone||b.box.addBody(e)}});d?j.remove("duplicate-ids","hide"):j.add("duplicate-ids","hide");g(b.jsonObjs);e()}})},"game/Entities":function(){define(["frozen/box2d/RectangleEntity","frozen/box2d/PolygonEntity",
"frozen/box2d/CircleEntity"],function(b,c,a){return{Rectangle:b,Polygon:c,Circle:a}})},"frozen/box2d/RectangleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(b,c,a){return b([c,a],{halfWidth:1,halfHeight:1,draw:b.superCall(function(a){return function(b,c){b.save();b.translate(this.x*c,this.y*c);b.rotate(this.angle);b.translate(-this.x*c,-this.y*c);b.fillStyle=this.color;b.strokeStyle=this.strokeColor;b.fillRect((this.x-this.halfWidth)*c,(this.y-this.halfHeight)*c,2*this.halfWidth*
c,2*this.halfHeight*c);b.strokeRect((this.x-this.halfWidth)*c,(this.y-this.halfHeight)*c,2*this.halfWidth*c,2*this.halfHeight*c);b.restore();a.apply(this,[b,c])}}),scaleShape:b.superCall(function(a){return function(b){this.halfHeight*=b;this.halfWidth*=b;a.apply(this,[b])}})})})},"frozen/box2d/Entity":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(b,c,a){return b(c,{id:0,x:0,y:0,angle:0,center:null,restitution:0.3,density:1,friction:0.9,linearDamping:0,linearVelocity:null,
angularVelocity:0,angularDamping:0,staticBody:!1,color:"rgba(128,128,128,0.5)",strokeColor:"#000",hidden:!1,update:function(b){a.mixin(this,b)},draw:function(a,b){a.fillStyle="black";a.beginPath();a.arc(this.x*b,this.y*b,4,0,2*Math.PI,!0);a.closePath();a.fill();if(this.center)a.fillStyle="yellow",a.beginPath(),a.arc(this.center.x*b,this.center.y*b,2,0,2*Math.PI,!0),a.closePath(),a.fill()},scaleShape:function(a){this.x*=a;this.y*=a}})})},"frozen/box2d/PolygonEntity":function(){define(["dcl","dcl/bases/Mixer",
"./Entity","../utils"],function(b,c,a,g){return b([c,a],{points:[],draw:b.superCall(function(a){return function(b,c){b.save();b.translate(this.x*c,this.y*c);b.rotate(this.angle);b.translate(-this.x*c,-this.y*c);b.fillStyle=this.color;b.beginPath();b.moveTo((this.x+this.points[0].x)*c,(this.y+this.points[0].y)*c);for(var g=1;g<this.points.length;g++)b.lineTo((this.points[g].x+this.x)*c,(this.points[g].y+this.y)*c);b.lineTo((this.x+this.points[0].x)*c,(this.y+this.points[0].y)*c);b.closePath();b.fill();
b.stroke();b.restore();a.apply(this,[b,c])}}),scaleShape:b.superCall(function(a){return function(b){this.points=g.scalePoints(this.points,b);a.apply(this,[b])}})})})},"frozen/utils":function(){define("./utils/averagePoints,./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints".split(","),function(b,c,a,g,e,k,j,l,h){return{averagePoints:b,degreesToRadians:c,radiansToDegrees:a,
pointInPolygon:g,distance:e,degreesFromCenter:k,radiansFromCenter:j,scalePoints:l,translatePoints:h}})},"frozen/utils/averagePoints":function(){define([],function(){return function(b){var c={x:0,y:0};b.forEach(function(a){c.x+=a.x;c.y+=a.y});c.x/=b.length;c.y/=b.length;return c}})},"frozen/utils/degreesToRadians":function(){define(function(){var b=Math.PI/180;return function(c){return c*b}})},"frozen/utils/radiansToDegrees":function(){define(function(){var b=180/Math.PI;return function(c){return c*
b}})},"frozen/utils/pointInPolygon":function(){define(function(){return function(b,c){for(var a=c.points||c,g=!1,e=-1,k=a.length,j=k-1;++e<k;j=e)(a[e].y<=b.y&&b.y<a[j].y||a[j].y<=b.y&&b.y<a[e].y)&&b.x<(a[j].x-a[e].x)*(b.y-a[e].y)/(a[j].y-a[e].y)+a[e].x&&(g=!g);return g}})},"frozen/utils/distance":function(){define(function(){return function(b,c){return Math.sqrt((c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y))}})},"frozen/utils/degreesFromCenter":function(){define(["./radiansToDegrees","./radiansFromCenter"],
function(b,c){return function(a,g){return b(c(a,g))}})},"frozen/utils/radiansFromCenter":function(){define(function(){var b={x:0,y:0};return function(c,a){c=c||b;return c.x===a.x&&c.y===a.y?0:c.x===a.x?c.y>a.y?0:Math.PI:c.y===a.y?c.x>a.x?1.5*Math.PI:Math.PI/2:c.x<a.x&&c.y>a.y?Math.atan((a.x-c.x)/(c.y-a.y)):c.x<a.x&&c.y<a.y?Math.PI/2+Math.atan((a.y-c.y)/(a.x-c.x)):c.x>a.x&&c.y<a.y?Math.PI+Math.atan((c.x-a.x)/(a.y-c.y)):1.5*Math.PI+Math.atan((c.y-a.y)/(c.x-a.x))}})},"frozen/utils/scalePoints":function(){define(["dojo/_base/lang"],
function(b){var c=function(a,g){if(b.isArray(a)){var e=[];a.forEach(function(a){e.push(c(a,g))});a=e}else a="object"===typeof g?{x:a.x*g.x,y:a.y*g.y}:{x:a.x*g,y:a.y*g};return a};return c})},"frozen/utils/translatePoints":function(){define(["dojo/_base/lang"],function(b){var c=function(a,g){if(b.isArray(a)){var e=[];a.forEach(function(a){e.push(c(a,g))});a=e}else a={x:a.x,y:a.y},g.hasOwnProperty("x")&&(a.x+=g.x),g.hasOwnProperty("y")&&(a.y+=g.y);return a};return c})},"frozen/box2d/CircleEntity":function(){define(["dcl",
"dcl/bases/Mixer","./Entity"],function(b,c,a){return b([c,a],{radius:1,draw:b.superCall(function(a){return function(b,c){b.fillStyle=this.color;b.strokeStyle=this.strokeColor;b.beginPath();b.arc(this.x*c,this.y*c,this.radius*c,0,2*Math.PI,!0);b.closePath();b.fill();b.stroke();this.staticBody||(b.save(),b.translate(this.x*c,this.y*c),b.rotate(this.angle),b.translate(-this.x*c,-this.y*c),b.beginPath(),b.moveTo(this.x*c,this.y*c),b.lineTo(this.x*c,this.y*c-this.radius*c),b.closePath(),b.stroke(),b.restore());
a.apply(this,[b,c])}}),scaleShape:b.superCall(function(a){return function(b){this.radius*=b;a.apply(this,[b])}})})})},"game/ui/displayJSON":function(){define(["../state","dojo/dom"],function(b){return function(c){b.codeMirror.setValue(JSON.stringify({objs:c,canvas:{height:b.game?b.game.height:null,width:b.game?b.game.width:null},backImg:b.backImg?b.backImg.src:null},null,"  "))}})},"game/ui/toggleUndo":function(){define(["../state","dojo/dom"],function(b,c){var a=c.byId("undoBtn");return function(){a.disabled=
b.jsonObjs.length?!1:!0}})},"lodash/lodash":function(){(function(b,c){function a(b){if(b&&b.__wrapped__)return b;if(!(this instanceof a))return new a(b);this.__wrapped__=b}function g(a,b,d){b||(b=0);var c=a.length,f=c-b>=(d||Wa);if(f)for(var e={},d=b-1;++d<c;){var i=a[d]+"";(G.call(e,i)?e[i]:e[i]=[]).push(a[d])}return function(d){if(f){var c=d+"";return G.call(e,c)&&-1<J(e[c],d)}return-1<J(a,d,b)}}function e(a){return a.charCodeAt(0)}function k(a,b){var d=a.index,f=b.index,a=a.criteria,b=b.criteria;
if(a!==b){if(a>b||a===c)return 1;if(a<b||b===c)return-1}return d<f?-1:1}function j(a,b,d){function c(){var g=arguments,s=i?this:b;e||(a=b[h]);d.length&&(g=g.length?d.concat(D.call(g)):d);return this instanceof c?(f.prototype=a.prototype,s=new f,g=a.apply(s,g),p(g)?g:s):a.apply(s,g)}var e=x(a),i=!d,h=b;i&&(d=b);e||(b=a);return c}function l(a,b){return!a?N:"function"!=typeof a?function(b){return b[a]}:b!==c?function(d,c,f){return a.call(b,d,c,f)}:a}function h(){for(var a={arrayLoop:"",bottom:"",hasDontEnumBug:Ua,
isKeysFast:lb,objectLoop:"",noArgsEnum:cb,noCharByIndex:db,shadowed:Pa,top:"",useHas:!0},b,d=0;b=arguments[d];d++)for(var c in b)a[c]=b[c];b=a.args;a.firstArg=/^[^,]+/.exec(b)[0];return Function("createCallback, hasOwnProperty, isArguments, isString, objectTypes, nativeKeys, propertyIsEnumerable","return function("+b+") {\n"+fb(a)+"\n}")(l,G,o,q,gb,Q,da)}function d(a){return"\\"+nb[a]}function m(a){return hb[a]}function f(){}function i(a){return ob[a]}function o(a){return z.call(a)==ya}function t(a){var b=
!1;if(!(a&&"object"==typeof a)||o(a))return b;var d=a.constructor;if((!eb||!("function"!=typeof a.toString&&"string"==typeof(a+"")))&&(!x(d)||d instanceof d)){if(bb)return Ba(a,function(a,d,c){b=!G.call(c,d);return!1}),!1===b;Ba(a,function(a,d){b=d});return!1===b||G.call(a,b)}return b}function v(a){var b=[];ia(a,function(a,d){b.push(d)});return b}function n(a,b,d,c,f){if(null==a)return a;d&&(b=!1);if(d=p(a)){var e=z.call(a);if(!R[e]||Ja&&o(a))return a;var i=e==na,d=i||(e==ha?Sa(a):d)}if(!d||!b)return d?
i?D.call(a):Za({},a):a;d=a.constructor;switch(e){case ta:case ga:return new d(+a);case pa:case Ca:return new d(a);case Aa:return d(a.source,Oa.exec(a))}c||(c=[]);f||(f=[]);for(e=c.length;e--;)if(c[e]==a)return f[e];var h=i?d(a.length):{};c.push(a);f.push(h);(i?y:ia)(a,function(a,d){h[d]=n(a,b,null,c,f)});return h}function r(a){var b=[];Ba(a,function(a,d){x(a)&&b.push(d)});return b.sort()}function A(a){var b={};ia(a,function(a,d){b[a]=d});return b}function u(a,b,d,c){if(a===b)return 0!==a||1/a==1/
b;if(null==a||null==b)return a===b;var f=z.call(a);if(f!=z.call(b))return!1;switch(f){case ta:case ga:return+a==+b;case pa:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Aa:case Ca:return a==b+""}var e=f==na||f==ya;if(Ja&&!e&&(e=o(a))&&!o(b))return!1;if(!e){if(a.__wrapped__||b.__wrapped__)return u(a.__wrapped__||a,b.__wrapped__||b);if(f!=ha||eb&&("function"!=typeof a.toString&&"string"==typeof(a+"")||"function"!=typeof b.toString&&"string"==typeof(b+"")))return!1;var f=a.constructor,i=b.constructor;
if(f!=i&&(!x(f)||!(f instanceof f&&x(i)&&i instanceof i)))return!1}d||(d=[]);c||(c=[]);for(f=d.length;f--;)if(d[f]==a)return c[f]==b;var f=-1,i=!0,h=0;d.push(a);c.push(b);if(e){h=a.length;if(i=h==b.length)for(;h--&&(i=u(a[h],b[h],d,c)););return i}for(var g in a)if(G.call(a,g)&&(h++,!G.call(b,g)||!u(a[g],b[g],d,c)))return!1;for(g in b)if(G.call(b,g)&&!h--)return!1;if(Ua)for(;7>++f;)if(g=Pa[f],G.call(a,g)&&(!G.call(b,g)||!u(a[g],b[g],d,c)))return!1;return!0}function x(a){return"function"==typeof a}
function p(a){return a?gb[typeof a]:!1}function q(a){return z.call(a)==Ca}function F(a,b,d){var c=arguments,f=0,e=2,i=c[3],h=c[4];if(d!==oa&&(i=[],h=[],"number"!=typeof d))e=c.length;for(;++f<e;)ia(c[f],function(b,d){var c,f,e;if(b&&((f=U(b))||Sa(b))){for(var g=i.length;g--&&!(c=i[g]==b););c?a[d]=h[g]:(i.push(b),h.push(e=(e=a[d],f)?U(e)?e:[]:Sa(e)?e:{}),a[d]=F(e,b,oa,i,h))}else null!=b&&(a[d]=b)});return a}function B(a){var b=[];ia(a,function(a){b.push(a)});return b}function w(a,b,d){var c=-1,f=a?
a.length:0,e=!1,d=(0>d?xa(0,f+d):d)||0;"number"==typeof f?e=-1<(q(a)?a.indexOf(b,d):J(a,b,d)):y(a,function(a){if(++c>=d)return!(e=a===b)});return e}function V(a,b,d){var c=!0,b=l(b,d);if(U(a))for(var d=-1,f=a.length;++d<f&&(c=!!b(a[d],d,a)););else y(a,function(a,d,f){return c=!!b(a,d,f)});return c}function I(a,b,d){var c=[],b=l(b,d);if(U(a))for(var d=-1,f=a.length;++d<f;){var e=a[d];b(e,d,a)&&c.push(e)}else y(a,function(a,d,f){b(a,d,f)&&c.push(a)});return c}function qa(a,b,d){var c,b=l(b,d);y(a,function(a,
d,f){if(b(a,d,f))return c=a,!1});return c}function ka(a,b,d){var c=-1,f=a?a.length:0,e=Array("number"==typeof f?f:0),b=l(b,d);if(U(a))for(;++c<f;)e[c]=b(a[c],c,a);else y(a,function(a,d,f){e[++c]=b(a,d,f)});return e}function $(a,b,d){var c=-Infinity,f=-1,i=a?a.length:0,h=c;if(b||!U(a))b=!b&&q(a)?e:l(b,d),y(a,function(a,d,f){d=b(a,d,f);d>c&&(c=d,h=a)});else for(;++f<i;)a[f]>h&&(h=a[f]);return h}function W(a,b){var d=[];y(a,function(a){d.push(a[b])});return d}function O(a,b,d,c){var f=3>arguments.length,
b=l(b,c);y(a,function(a,c,e){d=f?(f=!1,a):b(d,a,c,e)});return d}function C(a,b,d,c){var f=a,e=a?a.length:0,i=3>arguments.length;if("number"!=typeof e)var h=Ta(a),e=h.length;else db&&q(a)&&(f=a.split(""));y(a,function(a,Ra,g){Ra=h?h[--e]:--e;d=i?(i=!1,f[Ra]):b.call(c,d,f[Ra],Ra,g)});return d}function X(a,b,d){var c,b=l(b,d);if(U(a))for(var d=-1,f=a.length;++d<f&&!(c=b(a[d],d,a)););else y(a,function(a,d,f){return!(c=b(a,d,f))});return!!c}function M(a,b,d){if(a)return null==b||d?a[0]:D.call(a,0,b)}function Y(a,
b){for(var d=-1,c=a?a.length:0,f=[];++d<c;){var e=a[d];U(e)?ma.apply(f,b?e:Y(e)):f.push(e)}return f}function J(a,b,d){var c=-1,f=a?a.length:0;if("number"==typeof d)c=(0>d?xa(0,f+d):d||0)-1;else if(d)return c=ba(a,b),a[c]===b?c:-1;for(;++c<f;)if(a[c]===b)return c;return-1}function aa(a,b,d){return a?D.call(a,null==b||d?1:b):[]}function ba(a,b,d,c){for(var f=0,e=a?a.length:f,d=d?l(d,c):N,b=d(b);f<e;)c=f+e>>>1,d(a[c])<b?f=c+1:e=c;return f}function ca(a,b,d,c){var f=-1,e=a?a.length:0,i=[],h=i;"function"==
typeof b&&(c=d,d=b,b=!1);var g=!b&&74<e;if(g)var s={};d&&(h=[],d=l(d,c));for(;++f<e;){var c=a[f],m=d?d(c,f,a):c;g&&(h=G.call(s,m+"")?s[m]:s[m]=[]);if(b?!f||h[h.length-1]!==m:0>J(h,m))(d||g)&&h.push(m),i.push(c)}return i}function la(a,b){return kb||S&&2<arguments.length?S.call.apply(S,arguments):j(a,b,D.call(arguments,2))}function N(a){return a}function H(b){y(r(b),function(d){var c=a[d]=b[d];a.prototype[d]=function(){var b=[this.__wrapped__];ma.apply(b,arguments);b=c.apply(a,b);if(this.__chain__)b=
new a(b),b.__chain__=!0;return b}})}function ja(b,c,f){b||(b="");f||(f={});var e,i,h=a.templateSettings,g=0,s=f.interpolate||h.interpolate||P,m="__p += '",o=f.variable||h.variable,k=o;b.replace(RegExp((f.escape||h.escape||P).source+"|"+s.source+"|"+(s===Ea?Ia:P).source+"|"+(f.evaluate||h.evaluate||P).source+"|$","g"),function(a,c,f,i,h,s){f||(f=i);m+=b.slice(g,s).replace(Ya,d);m+=c?"' +\n__e("+c+") +\n'":h?"';\n"+h+";\n__p += '":f?"' +\n((__t = ("+f+")) == null ? '' : __t) +\n'":"";e||(e=h||La.test(c||
f));g=s+a.length});m+="';\n";k||(o="obj",m=e?"with ("+o+") {\n"+m+"\n}\n":m.replace(Z,"$&"+o+".").replace(RegExp("(\\(\\s*)"+o+"\\."+o+"\\b","g"),"$1__d"));m=(e?m.replace(Ma,""):m).replace(ra,"$1").replace(Na,"$1;");m="function("+o+") {\n"+(k?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(k?"":", __d = "+o+"."+o+" || "+o)+";\n")+m+"return __p\n}";f=mb?"\n//@ sourceURL="+(f.sourceURL||"/lodash/template/source["+
ua++ +"]"):"";try{i=Function("_","return "+m+f)(a)}catch(j){throw j.source=m,j;}if(c)return i(c);i.source=m;return i}var L="object"==typeof exports&&exports,K="object"==typeof global&&global;K.global===K&&(b=K);var E=[],s=new function(){},Va=0,oa=s,Wa=30,Da=b._,La=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,sa=/&(?:amp|lt|gt|quot|#x27);/g,Ma=/\b__p \+= '';/g,ra=/\b(__p \+=) '' \+/g,Na=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oa=/\w*$/,Z=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,
ea=RegExp("^"+(s.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Ia=/\$\{((?:(?=\\?)\\?[\s\S])*?)}/g,Ea=/<%=([\s\S]+?)%>/g,P=/($^)/,Xa=/[&<>"']/g,Ya=/['\n\r\t\u2028\u2029\\]/g,Pa="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ua=0,Fa=Math.ceil,fa=E.concat,Qa=Math.floor,T=ea.test(T=Object.getPrototypeOf)&&T,G=s.hasOwnProperty,ma=E.push,da=s.propertyIsEnumerable,D=E.slice,z=s.toString,S=ea.test(S=
D.bind)&&S,va=ea.test(va=Array.isArray)&&va,wa=b.isFinite,Ga=b.isNaN,Q=ea.test(Q=Object.keys)&&Q,xa=Math.max,Ka=Math.min,za=Math.random,ya="[object Arguments]",na="[object Array]",ta="[object Boolean]",ga="[object Date]",pa="[object Number]",ha="[object Object]",Aa="[object RegExp]",Ca="[object String]",Ua,bb,Ha=(Ha={"0":1,length:1},E.splice.call(Ha,0,1),Ha[0]),cb=!0;(function(){function a(){this.x=1}var b=[];a.prototype={valueOf:1,y:1};for(var d in new a)b.push(d);for(d in arguments)cb=!d;Ua=!/valueOf/.test(b);
bb="x"!=b[0]})(1);var Ja=!o(arguments),jb="x"!=D.call("x")[0],db="xx"!="x"[0]+Object("x")[0];try{var eb=z.call(b.document||0)==ha}catch(qb){}var kb=S&&/\n|Opera/.test(S+z.call(b.opera)),lb=Q&&/^.+$|true/.test(Q+!!b.attachEvent);try{var mb=(Function("//@")(),!b.attachEvent)}catch(rb){}var R={};R[ya]=R["[object Function]"]=!1;R[na]=R[ta]=R[ga]=R[pa]=R[ha]=R[Aa]=R[Ca]=!0;var gb={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},nb={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028",
"\u2029":"u2029"};a.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ea,variable:""};var fb=ja("<% if (obj.useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result = <%= firstArg %>;\nif (!<%= firstArg %>) return result;\n<%= top %>;\n<% if (arrayLoop) { %>var length = iteratee.length; index = -1;\nif (typeof length == 'number') {  <% if (noCharByIndex) { %>\n  if (isString(iteratee)) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayLoop %>\n  }\n}\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  for (index in iteratee) {<%    if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectLoop %>;    <% if (!hasDontEnumBug || useHas) { %>\n    }<% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectLoop %>\n  }    <% } %>  <% } %>  <% if (arrayLoop || noArgsEnum) { %>\n}<% } %>\n<%= bottom %>;\nreturn result"),
$a={args:"object, source, guard",top:"for (var argsIndex = 1, argsLength = typeof guard == 'number' ? 2 : arguments.length; argsIndex < argsLength; argsIndex++) {\n  if ((iteratee = arguments[argsIndex])) {",objectLoop:"result[index] = value",bottom:"  }\n}"},ab={args:"collection, callback, thisArg",top:"callback = createCallback(callback, thisArg)",arrayLoop:"if (callback(value, index, collection) === false) return result",objectLoop:"if (callback(value, index, collection) === false) return result"},
ib={arrayLoop:null},Za=h($a);Ja&&(o=function(a){return a?G.call(a,"callee"):!1});var Ba=h(ab,ib,{useHas:!1}),ia=h(ab,ib),hb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},ob=A(hb),pb=h($a,{objectLoop:"if (result[index] == null) "+$a.objectLoop}),U=va||function(a){return z.call(a)==na};x(/x/)&&(x=function(a){return"[object Function]"==z.call(a)});var Sa=!T?t:function(a){if(!(a&&"object"==typeof a))return!1;var b=a.valueOf,d="function"==typeof b&&(d=T(b))&&T(d);return d?a==d||T(a)==d&&
!o(a):t(a)},Ta=!Q?v:function(a){return"function"==typeof a&&da.call(a,"prototype")?v(a):p(a)?Q(a):[]},y=h(ab);a.VERSION="0.10.0";a.assign=Za;a.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}};a.bind=la;a.bindAll=function(a){for(var b=arguments,d=1<b.length?0:(b=r(a),-1),c=b.length;++d<c;){var f=b[d];a[f]=la(a[f],a)}return a};a.bindKey=function(a,b){return j(a,b,D.call(arguments,2))};a.chain=function(b){b=new a(b);b.__chain__=!0;return b};a.clone=n;a.compact=
function(a){for(var b=-1,d=a?a.length:0,c=[];++b<d;){var f=a[b];f&&c.push(f)}return c};a.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length;d--;)b=[a[d].apply(this,b)];return b[0]}};a.contains=w;a.countBy=function(a,b,d){var c={},b=l(b,d);y(a,function(a,d,f){d=b(a,d,f);G.call(c,d)?c[d]++:c[d]=1});return c};a.debounce=function(a,b,d){function c(){h=null;d||(e=a.apply(i,f))}var f,e,i,h;return function(){var g=d&&!h;f=arguments;i=this;clearTimeout(h);h=setTimeout(c,b);
g&&(e=a.apply(i,f));return e}};a.defaults=pb;a.defer=function(a){var b=D.call(arguments,1);return setTimeout(function(){a.apply(c,b)},1)};a.delay=function(a,b){var d=D.call(arguments,2);return setTimeout(function(){a.apply(c,d)},b)};a.difference=function(a){for(var b=-1,d=a?a.length:0,c=fa.apply(E,arguments),c=g(c,d),f=[];++b<d;){var e=a[b];c(e)||f.push(e)}return f};a.escape=function(a){return null==a?"":(a+"").replace(Xa,m)};a.every=V;a.filter=I;a.find=qa;a.first=M;a.flatten=Y;a.forEach=y;a.forIn=
Ba;a.forOwn=ia;a.functions=r;a.groupBy=function(a,b,d){var c={},b=l(b,d);y(a,function(a,d,f){d=b(a,d,f);(G.call(c,d)?c[d]:c[d]=[]).push(a)});return c};a.has=function(a,b){return a?G.call(a,b):!1};a.identity=N;a.indexOf=J;a.initial=function(a,b,d){return a?D.call(a,0,-(null==b||d?1:b)):[]};a.intersection=function(a){var b=arguments,d=b.length,c={},f=[];y(a,function(a){if(0>J(f,a)){for(var e=d;--e;)if(!(c[e]||(c[e]=g(b[e])))(a))return;f.push(a)}});return f};a.invert=A;a.invoke=function(a,b){var d=D.call(arguments,
2),c="function"==typeof b,f=[];y(a,function(a){f.push((c?b:a[b]).apply(a,d))});return f};a.isArguments=o;a.isArray=U;a.isBoolean=function(a){return!0===a||!1===a||z.call(a)==ta};a.isDate=function(a){return z.call(a)==ga};a.isElement=function(a){return a?1===a.nodeType:!1};a.isEmpty=function(a){var b=!0;if(!a)return b;var d=z.call(a),c=a.length;if(d==na||d==Ca||d==ya||Ja&&o(a)||d==ha&&"number"==typeof c&&x(a.splice))return!c;ia(a,function(){return b=!1});return b};a.isEqual=u;a.isFinite=function(a){return wa(a)&&
!Ga(parseFloat(a))};a.isFunction=x;a.isNaN=function(a){return z.call(a)==pa&&a!=+a};a.isNull=function(a){return null===a};a.isNumber=function(a){return z.call(a)==pa};a.isObject=p;a.isPlainObject=Sa;a.isRegExp=function(a){return z.call(a)==Aa};a.isString=q;a.isUndefined=function(a){return a===c};a.keys=Ta;a.last=function(a,b,d){if(a){var c=a.length;return null==b||d?a[c-1]:D.call(a,-b||c)}};a.lastIndexOf=function(a,b,d){var c=a?a.length:0;for("number"==typeof d&&(c=(0>d?xa(0,c+d):Ka(d,c-1))+1);c--;)if(a[c]===
b)return c;return-1};a.map=ka;a.max=$;a.memoize=function(a,b){var d={};return function(){var c=b?b.apply(this,arguments):arguments[0];return G.call(d,c)?d[c]:d[c]=a.apply(this,arguments)}};a.merge=F;a.min=function(a,b,d){var c=Infinity,f=-1,i=a?a.length:0,h=c;if(b||!U(a))b=!b&&q(a)?e:l(b,d),y(a,function(a,d,f){d=b(a,d,f);d<c&&(c=d,h=a)});else for(;++f<i;)a[f]<h&&(h=a[f]);return h};a.mixin=H;a.noConflict=function(){b._=Da;return this};a.object=function(a,b){for(var d=-1,c=a?a.length:0,f={};++d<c;){var e=
a[d];b?f[e]=b[d]:f[e[0]]=e[1]}return f};a.omit=function(a,b,d){var c="function"==typeof b,f={};if(c)b=l(b,d);else var e=fa.apply(E,arguments);Ba(a,function(a,d,i){if(c?!b(a,d,i):0>J(e,d,1))f[d]=a});return f};a.once=function(a){var b,d=!1;return function(){if(d)return b;d=!0;b=a.apply(this,arguments);a=null;return b}};a.pairs=function(a){var b=[];ia(a,function(a,d){b.push([d,a])});return b};a.partial=function(a){return j(a,D.call(arguments,1))};a.pick=function(a,b,d){var c={};if("function"!=typeof b)for(var f=
0,e=fa.apply(E,arguments),i=e.length;++f<i;){var h=e[f];h in a&&(c[h]=a[h])}else b=l(b,d),Ba(a,function(a,d,f){b(a,d,f)&&(c[d]=a)});return c};a.pluck=W;a.random=function(a,b){null==a&&null==b&&(b=1);a=+a||0;null==b&&(b=a,a=0);return a+Qa(za()*((+b||0)-a+1))};a.range=function(a,b,d){a=+a||0;d=+d||1;null==b&&(b=a,a=0);for(var c=-1,b=xa(0,Fa((b-a)/d)),f=Array(b);++c<b;)f[c]=a,a+=d;return f};a.reduce=O;a.reduceRight=C;a.reject=function(a,b,d){b=l(b,d);return I(a,function(a,d,c){return!b(a,d,c)})};a.rest=
aa;a.result=function(a,b){var d=a?a[b]:null;return x(d)?a[b]():d};a.shuffle=function(a){var b=-1,d=Array(a?a.length:0);y(a,function(a){var c=Qa(za()*(++b+1));d[b]=d[c];d[c]=a});return d};a.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Ta(a).length};a.some=X;a.sortBy=function(a,b,d){var c=[],b=l(b,d);y(a,function(a,d,f){c.push({criteria:b(a,d,f),index:d,value:a})});a=c.length;for(c.sort(k);a--;)c[a]=c[a].value;return c};a.sortedIndex=ba;a.tap=function(a,b){b(a);return a};a.template=
ja;a.throttle=function(a,b){function d(){h=new Date;i=null;f=a.apply(e,c)}var c,f,e,i,h=0;return function(){var g=new Date,s=b-(g-h);c=arguments;e=this;0>=s?(clearTimeout(i),h=g,f=a.apply(e,c)):i||(i=setTimeout(d,s));return f}};a.times=function(a,b,d){for(var a=+a||0,c=-1,f=Array(a);++c<a;)f[c]=b.call(d,c);return f};a.toArray=function(a){return a&&"number"==typeof a.length?(jb?q(a):"string"==typeof a)?a.split(""):D.call(a):B(a)};a.unescape=function(a){return null==a?"":(a+"").replace(sa,i)};a.union=
function(){return ca(fa.apply(E,arguments))};a.uniq=ca;a.uniqueId=function(a){var b=Va++;return a?a+b:b};a.values=B;a.where=function(a,b){var d=Ta(b);return I(a,function(a){for(var c=d.length;c--;){var f=a[d[c]]===b[d[c]];if(!f)break}return!!f})};a.without=function(a){for(var b=-1,d=a?a.length:0,c=g(arguments,1,20),f=[];++b<d;){var e=a[b];c(e)||f.push(e)}return f};a.wrap=function(a,b){return function(){var d=[a];ma.apply(d,arguments);return b.apply(this,d)}};a.zip=function(a){for(var b=-1,d=a?$(W(arguments,
"length")):0,c=Array(d);++b<d;)c[b]=W(arguments,b);return c};a.all=V;a.any=X;a.collect=ka;a.detect=qa;a.drop=aa;a.each=y;a.extend=Za;a.foldl=O;a.foldr=C;a.head=M;a.include=w;a.inject=O;a.methods=r;a.select=I;a.tail=aa;a.take=M;a.unique=ca;a._iteratorTemplate=fb;H(a);a.prototype.chain=function(){this.__chain__=!0;return this};a.prototype.value=function(){return this.__wrapped__};y("pop,push,reverse,shift,sort,splice,unshift".split(","),function(b){var d=E[b];a.prototype[b]=function(){var b=this.__wrapped__;
d.apply(b,arguments);Ha&&0===b.length&&delete b[0];if(this.__chain__)b=new a(b),b.__chain__=!0;return b}});y(["concat","join","slice"],function(b){var d=E[b];a.prototype[b]=function(){var b=d.apply(this.__wrapped__,arguments);if(this.__chain__)b=new a(b),b.__chain__=!0;return b}});"function"==typeof define&&"object"==typeof define.amd&&define.amd?(b._=a,define(function(){return a})):L?"object"==typeof module&&module&&module.exports==L?(module.exports=a)._=a:L._=a:b._=a})(this)},"dojo/dom-class":function(){define("dojo/dom-class",
["./_base/lang","./_base/array","./dom"],function(b,c,a){function g(a){if("string"==typeof a||a instanceof String){if(a&&!k.test(a))return j[0]=a,j;a=a.split(k);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return!a?[]:c.filter(a,function(a){return a})}var e,k=/\s+/,j=[""],l={};return e={contains:function(b,d){return 0<=(" "+a.byId(b).className+" ").indexOf(" "+d+" ")},add:function(b,d){var b=a.byId(b),d=g(d),c=b.className,f,c=c?" "+c+" ":" ";f=c.length;for(var e=0,o=d.length,
k;e<o;++e)(k=d[e])&&0>c.indexOf(" "+k+" ")&&(c+=k+" ");f<c.length&&(b.className=c.substr(1,c.length-2))},remove:function(c,d){var c=a.byId(c),e;if(void 0!==d){d=g(d);e=" "+c.className+" ";for(var f=0,i=d.length;f<i;++f)e=e.replace(" "+d[f]+" "," ");e=b.trim(e)}else e="";c.className!=e&&(c.className=e)},replace:function(b,d,c){b=a.byId(b);l.className=b.className;e.remove(l,c);e.add(l,d);b.className!==l.className&&(b.className=l.className)},toggle:function(b,d,c){b=a.byId(b);if(void 0===c)for(var d=
g(d),f=0,i=d.length,o;f<i;++f)o=d[f],e[e.contains(b,o)?"remove":"add"](b,o);else e[c?"add":"remove"](b,d);return c}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(b,c,a){function g(a){return j[a]=new Function("item","index","array",a)}function e(a){var b=!a;return function(c,e,h){var k=0,l=c&&c.length||0,n;l&&"string"==typeof c&&(c=c.split(""));"string"==typeof e&&(e=j[e]||g(e));if(h)for(;k<l;++k){if(n=!e.call(h,c[k],k,c),a^n)return!n}else for(;k<l;++k)if(n=!e(c[k],
k,c),a^n)return!n;return b}}function k(a){var b=1,c=0,e=0;a||(b=c=e=-1);return function(g,k,j,n){if(n&&0<b)return h.lastIndexOf(g,k,j);var n=g&&g.length||0,r=a?n+e:c;j===l?j=a?c:n+e:0>j?(j=n+j,0>j&&(j=c)):j=j>=n?n+e:j;for(n&&"string"==typeof g&&(g=g.split(""));j!=r;j+=b)if(g[j]==k)return j;return-1}}var j={},l,h={every:e(!1),some:e(!0),indexOf:k(!0),lastIndexOf:k(!1),forEach:function(a,b,c){var e=0,h=a&&a.length||0;h&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=j[b]||g(b));if(c)for(;e<
h;++e)b.call(c,a[e],e,a);else for(;e<h;++e)b(a[e],e,a)},map:function(a,b,c,e){var h=0,k=a&&a.length||0,e=new (e||Array)(k);k&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=j[b]||g(b));if(c)for(;h<k;++h)e[h]=b.call(c,a[h],h,a);else for(;h<k;++h)e[h]=b(a[h],h,a);return e},filter:function(a,b,c){var e=0,h=a&&a.length||0,k=[],l;h&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=j[b]||g(b));if(c)for(;e<h;++e)l=a[e],b.call(c,l,e,a)&&k.push(l);else for(;e<h;++e)l=a[e],b(l,e,a)&&k.push(l);
return k},clearCache:function(){j={}}};a.mixin(b,h);return h})},"game/createJSON/main":function(){define(["./poly","./circle","./rect"],function(b,c,a){return{polygon:b,circle:c,rectangle:a}})},"game/createJSON/poly":function(){define(["../state","../utils/convexHull","frozen/utils"],function(b,c,a){return function(g){if(g&&2<g.length){var g={points:c(g)},e=a.averagePoints(g.points);g.x=e.x;g.y=e.y;g.points=a.translatePoints(g.points,{x:-g.x,y:-g.y});g.staticBody="static"===b.toolType;g.zone="zone"===
b.toolType;g.type="Polygon";return g}}})},"game/utils/convexHull":function(){define(function(){return function(b){var c,a,g,e,k=[],j=function(a,b){var c;k.push(a);var e=[];c=0;var h=null,g=[],l;for(l in b){var n=b[l],r=(a[0].y-a[1].y)*(n.x-a[0].x)+(a[1].x-a[0].x)*(n.y-a[0].y);0<r&&(g.push(n),r>c&&(c=r,h=n))}return(c=h)?(e=e.concat(j([a[0],c],g)),e=e.concat(j([c,a[1]],g))):[a]},l;for(l in b){var h=b[l];if(h.x>c||!c)g=h,c=h.x;if(h.x<a||!a)e=h,a=h.x}b=[].concat(j([e,g],b),j([g,e],b));c=[];for(a=0;a<
b.length;a++)c.push(b[a][0]);c.reverse();return c}})},"game/createJSON/circle":function(){define(["../state","frozen/utils"],function(b,c){return function(a){if(a&&2===a.length){var g=c.distance(a[0],a[1]),a={x:a[0].x,y:a[0].y,radius:g};a.staticBody="static"===b.toolType;a.zone="zone"===b.toolType;a.type="Circle";return a}}})},"game/createJSON/rect":function(){define(["../state","../utils/orderRectPts"],function(b,c){return function(a){if(a&&2===a.length)return a=c(a),a={x:(a[1].x-a[0].x)/2+a[0].x,
y:(a[1].y-a[0].y)/2+a[0].y,halfWidth:Math.abs((a[1].x-a[0].x)/2),halfHeight:Math.abs((a[1].y-a[0].y)/2)},a.staticBody="static"===b.toolType,a.zone="zone"===b.toolType,a.type="Rectangle",a}})},"game/utils/orderRectPts":function(){define(function(){return function(b){var c=[],a;b[1].x<b[0].x?(a=b[1],b=b[0]):(a=b[0],b=b[1]);c.push(a);c.push(b);return c}})},"game/utils/insideCanvas":function(){define(function(){return function(b,c){return 0>b.x||b.x>c.width||0>b.y||b.y>c.height?!1:!0}})},"game/update":function(){define(["./state"],
function(b){return function(c){b.runSimulation&&(b.box.update(c),b.box.updateExternalState(b.entities))}})},"game/draw":function(){define(["./draw/shape","./state","lodash"],function(b,c,a){return function(g){g.lineWidth=1;c.backImg?g.drawImage(c.backImg,0,0,this.canvas.width,c.backImg.height):g.clearRect(0,0,this.canvas.width,this.canvas.height);a.forEach(c.entities,function(a){(!a.staticBody||c.showStatic)&&a.draw(g,30)},this);var e=g.lineWidth;g.lineWidth=1;if(c.geometries.length)b[c.tool](g,this.inputManager,
c.geometries),g.lineWidth=e}})},"game/draw/shape":function(){define(["./poly","./circle","./rect"],function(b,c,a){return{polygon:b,circle:c,rectangle:a}})},"game/draw/poly":function(){define(["lodash","frozen/utils"],function(b,c){return function(a,g,e){a.fillStyle="white";a.strokeStyle="black";b.forEach(e,function(b){a.beginPath();a.arc(b.x,b.y,4,0,2*Math.PI,!0);a.closePath();a.fill();a.stroke()});if(1<e.length&&g.mouseAction.position&&4>=c.distance(e[0],g.mouseAction.position))a.strokeStyle="yellow",
a.fillStyle="black",a.lineWidth=4,a.beginPath(),a.arc(e[0].x,e[0].y,4,0,2*Math.PI,!0),a.closePath(),a.fill(),a.stroke(),a.lineWidth=1;a.strokeStyle="red";a.beginPath();b.forEach(e,function(b,c){0<c&&(a.moveTo(e[c-1].x,e[c-1].y),a.lineTo(b.x,b.y))});g.mouseAction.position&&(a.moveTo(e[e.length-1].x,e[e.length-1].y),a.lineTo(g.mouseAction.position.x,g.mouseAction.position.y));a.stroke();a.closePath()}})},"game/draw/circle":function(){define(["frozen/utils"],function(b){return function(c,a,g){a=b.distance(g[0],
a.mouseAction.position);c.strokeStyle="red";c.beginPath();c.arc(g[0].x,g[0].y,a,0,2*Math.PI,!0);c.closePath();c.stroke()}})},"game/draw/rect":function(){define(["../utils/orderRectPts"],function(b){return function(c,a,g){a=b([g[0],a.mouseAction.position]);c.strokeStyle="red";c.strokeRect(a[0].x,a[0].y,a[1].x-a[0].x,a[1].y-a[0].y)}})},"frozen/GameCore":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),function(b,c,a,g,e,k){return b(c,
{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=g.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=
this.canvas.getContext(this.contextType);if(this.context){this.height?this.canvas.height=this.height:this.height=this.canvas.height;this.width?this.canvas.width=this.width:this.width=this.canvas.width;if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new e({canvas:this.canvas,gameArea:g.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new e({canvas:this.canvas});this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new k;this.loadResources(this.resourceManager);
this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?
(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||this.update(this.elapsedTime),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var b=Date.now();this.prevTime=this.currTime=b;this.loopRunner=a.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},
update:function(){},updateLoadingScreen:function(){},draw:function(a){if("2d"===this.contextType)a.font="14px sans-serif",a.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(a){if(this.resourceManager&&"2d"===this.contextType)a.fillStyle=this.loadingBackground,a.fillRect(0,0,this.width,this.height),a.fillStyle=this.loadingForeground,a.strokeStyle=this.loadingForeground,a.font="bold "+Math.floor(this.height/12)+"px sans-serif",a.fillText("Loading... "+this.resourceManager.getPercentComplete()+
"%",0.1*this.width,0.55*this.height),a.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),a.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),a.lineWidth=4}})})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,dcl,dcl/bases/Mixer,dojo/on,dojo/dom-style,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),function(b,c,a,g,e,k,j,l){return a(g,{keyActions:[],mouseAction:null,touchAction:null,
canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){this.handleKeys&&(e(document,"keydown",l.hitch(this,"keyDown")),e(document,"keyup",l.hitch(this,"keyReleased")));this.handleMouse&&(e(this.canvas,"mousedown",l.hitch(this,"mouseDown")),e(document,"mousemove",l.hitch(this,"mouseMove")),e(document,"mouseup",l.hitch(this,"mouseUp")));this.handleTouch&&(e(this.canvas,"touchstart",l.hitch(this,"touchStart")),e(document,"touchmove",l.hitch(this,
"touchMove")),e(document,"touchend",l.hitch(this,"touchEnd")));if(!this.mouseAction)this.mouseAction=new c;if(!this.touchAction)this.touchAction=new c;this.gameArea&&this.canvasPercentage&&(e(window,"resize",l.hitch(this,"resize")),e(window,"orientationchange",l.hitch(this,"resize")))},mapToKey:function(a,b){if(!this.keyActions)this.keyActions=[];this.keyActions[b]=a},addKeyAction:function(a,d){var c=new b;if(d)c.behavior=c.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(c,a);return c},setMouseAction:function(a){this.mouseAction=
a},setTouchAction:function(a){this.touchAction=a},mouseUp:function(a){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},mouseDown:function(a){this.mouseAction.press();this.mouseAction.startPosition=this.getMouseLoc(a);this.mouseAction.position=this.mouseAction.startPosition},mouseMove:function(a){this.mouseAction.position=this.getMouseLoc(a)},touchStart:function(a){this.touchAction.press();this.touchAction.startPosition=this.getMouseLoc(a.changedTouches[0]);this.touchAction.position=
this.touchAction.startPosition},touchEnd:function(a){this.touchAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},touchMove:function(a){this.touchAction.position=this.getMouseLoc(a.changedTouches[0]);a.preventDefault()},getKeyAction:function(a){return this.keyActions.length?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyDown:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&
a.press()},keyReleased:function(a){(a=this.getKeyAction(a))&&a.release()},getMouseLoc:function(a){var b=j.position(this.canvas);return this.zoomRatio?{x:Math.round((a.clientX-b.x)/this.zoomRatio),y:Math.round((a.clientY-b.y)/this.zoomRatio)}:{x:Math.round(a.clientX-b.x),y:Math.round(a.clientY-b.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var a=this.canvas.width,b=this.canvas.height,c=j.getMarginExtents(document.body),e=window.innerWidth-c.w,c=window.innerHeight-c.h,
b=a/b,i="",g="";e/c>b?(e=c*b,i=e+"px"):g=Math.round(e/b)+"px";this.zoomRatio=e/a*this.canvasPercentage;k.set(this.gameArea,{width:i,height:g});a=Math.floor(100*this.canvasPercentage)+"%";k.set(this.canvas,{width:a,height:a,display:"block",marginLeft:"auto",marginRight:"auto"})}}})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(b,c){return b(c,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,
STATE_MOVED:3},constructor:function(){this.reset()},getName:function(){return this.name},reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(a){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=a,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=
this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var a=this.amount;if(0!==a)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return a}})})},"frozen/MouseAction":function(){define(["dcl","dcl/bases/Mixer","./GameAction"],function(b,c,a){return b([c,a],{startPosition:null,endPosition:null,position:null})})},
"dojo/on":function(){define("dojo/on",["require","./_base/kernel","./has"],function(b,c,a){function g(b,d,c,e,f){if(e=d.match(/(.*):(.*)/))return d=e[2],e=e[1],j.selector(e,d).call(f,b,c);a("touch")&&(l.test(d)&&(c=v(c)),!a("event-orientationchange")&&"orientationchange"==d&&(d="resize",b=window,c=v(c)));i&&(c=i(c));if(b.addEventListener){var g=d in m,h=g?m[d]:d;b.addEventListener(h,c,g);return{remove:function(){b.removeEventListener(h,c,g)}}}d="on"+d;throw Error("Target must be an event emitter");
}function e(){this.cancelable=!1}function k(){this.bubbles=!1}b=window.ScriptEngineMajorVersion;a.add("jscript",b&&b()+ScriptEngineMinorVersion()/10);a.add("event-orientationchange",a("touch")&&!a("android"));a.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var j=function(a,b,d,c){return"function"==typeof a.on&&"function"!=typeof b?a.on(b,d):j.parse(a,b,d,g,c,this)};j.pausable=function(a,b,d,c){var e,a=j(a,b,function(){if(!e)return d.apply(this,
arguments)},c);a.pause=function(){e=!0};a.resume=function(){e=!1};return a};j.once=function(a,b,d){var c=j(a,b,function(){c.remove();return d.apply(this,arguments)});return c};j.parse=function(a,b,d,c,e,f){if(b.call)return b.call(f,a,d);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),i=[],g=0,h;h=b[g++];)i.push(c(a,h,d,e,f));i.remove=function(){for(var a=0;a<i.length;a++)i[a].remove()};return i}return c(a,b,d,e,f)};var l=/^touch/;j.selector=function(a,b,d){return function(e,f){function i(b){for(g=
g&&g.matches?g:c.query;!g.matches(b,a,e);)if(b==e||!1===d||!(b=b.parentNode)||1!=b.nodeType)return;return b}var g="function"==typeof a?{matches:a}:this,h=b.bubble;return h?j(e,h(i),f):j(e,b,function(a){var b=i(a.target);return b&&f.call(b,a)})}};var h=[].slice,d=j.emit=function(a,b,d){var c=h.call(arguments,2),f="on"+b;if("parentNode"in a){var i=c[0]={},g;for(g in d)i[g]=d[g];i.preventDefault=e;i.stopPropagation=k;i.target=a;i.type=b;d=i}do a[f]&&a[f].apply(a,c);while(d&&d.bubbles&&(a=a.parentNode));
return d&&d.cancelable&&d},m={};if(!a("event-stopimmediatepropagation"))var f=function(){this.modified=this.immediatelyStopped=!0},i=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=f,a.apply(this,arguments)}};m={focusin:"focus",focusout:"blur"};j.emit=function(a,b,c){if(a.dispatchEvent&&document.createEvent){var e=a.ownerDocument.createEvent("HTMLEvents");e.initEvent(b,!!c.bubbles,!!c.cancelable);for(var f in c)f in e||(e[f]=c[f]);return a.dispatchEvent(e)&&
e}return d.apply(j,arguments)};if(a("touch"))var o=function(){},t=window.orientation,v=function(a){return function(b){var d=b.corrected;if(!d){var c=b.type;try{delete b.type}catch(e){}b.type?(o.prototype=b,d=new o,d.preventDefault=function(){b.preventDefault()},d.stopPropagation=function(){b.stopPropagation()}):(d=b,d.type=c);b.corrected=d;if("resize"==c){if(t==window.orientation)return null;t=window.orientation;d.type="orientationchange";return a.call(this,d)}if(!("rotation"in d))d.rotation=0,d.scale=
1;var c=d.changedTouches[0],f;for(f in c)delete d[f],d[f]=c[f]}return a.call(this,d)}};return j})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(b,c){function a(a,c,e){c=c.toLowerCase();if(b("ie")){if("auto"==e){if("height"==c)return a.offsetHeight;if("width"==c)return a.offsetWidth}if("fontweight"==c)switch(e){case 700:return"bold";default:return"normal"}}c in d||(d[c]=m.test(c));return d[c]?k(a,e):e}var g,e={};g=b("webkit")?function(a){var b;if(1==a.nodeType){var d=a.ownerDocument.defaultView;
b=d.getComputedStyle(a,null);if(!b&&a.style)a.style.display="",b=d.getComputedStyle(a,null)}return b||{}}:b("ie")&&(9>b("ie")||b("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};e.getComputedStyle=g;var k;k=b("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var d=a.style,c=a.runtimeStyle,e=d.left,f=c.left;c.left=a.currentStyle.left;
try{d.left=b,b=d.pixelLeft}catch(i){b=0}d.left=e;c.left=f;return b}:function(a,b){return parseFloat(b)||0};e.toPixelValue=k;var j=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){return b?{}:null}},l=9>b("ie")||10>b("ie")&&b("quirks")?function(a){try{return j(a).Opacity/100}catch(b){return 1}}:function(a){return g(a).opacity},h=9>b("ie")||10>b("ie")&&b("quirks")?function(a,b){var d=100*b,c=1==b;a.style.zoom=c?"":1;if(j(a))j(a,1).Opacity=d;else{if(c)return b;a.style.filter+=
" progid:DXImageTransform.Microsoft.Alpha(Opacity="+d+")"}j(a,1).Enabled=!c;if("tr"==a.tagName.toLowerCase())for(d=a.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&h(d,b);return b}:function(a,b){return a.style.opacity=b},d={left:!0,top:!0},m=/margin|padding|width|height|max|min|offset/,f=b("ie")?"styleFloat":"cssFloat",i={cssFloat:f,styleFloat:f,"float":f};e.get=function(b,d){var f=c.byId(b),g=arguments.length;if(2==g&&"opacity"==d)return l(f);var d=i[d]||d,h=e.getComputedStyle(f);return 1==
g?h:a(f,d,h[d]||f.style[d])};e.set=function(a,b,d){var f=c.byId(a),g=arguments.length,k="opacity"==b,b=i[b]||b;if(3==g)return k?h(f,d):f.style[b]=d;for(var j in b)e.set(a,j,b[j]);return e.getComputedStyle(f)};return e})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(b,c,a,g){function e(a,b,c,e,g,h){h=h||"px";a=a.style;if(!isNaN(b))a.left=b+h;if(!isNaN(c))a.top=c+h;if(0<=e)a.width=e+h;if(0<=g)a.height=g+h}function k(a){return"button"==a.tagName.toLowerCase()||
"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function j(a){return"border-box"==l.boxModel||"table"==a.tagName.toLowerCase()||k(a)}var l={boxModel:"content-box"};if(b("ie"))l.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";l.getPadExtents=function(b,c){var b=a.byId(b),e=c||g.getComputedStyle(b),i=g.toPixelValue,h=i(b,e.paddingLeft),k=i(b,e.paddingTop),j=i(b,e.paddingRight),e=i(b,e.paddingBottom);return{l:h,t:k,r:j,b:e,w:h+j,h:k+e}};l.getBorderExtents=
function(b,c){var b=a.byId(b),e=g.toPixelValue,i=c||g.getComputedStyle(b),h="none"!=i.borderLeftStyle?e(b,i.borderLeftWidth):0,k="none"!=i.borderTopStyle?e(b,i.borderTopWidth):0,j="none"!=i.borderRightStyle?e(b,i.borderRightWidth):0,e="none"!=i.borderBottomStyle?e(b,i.borderBottomWidth):0;return{l:h,t:k,r:j,b:e,w:h+j,h:k+e}};l.getPadBorderExtents=function(b,c){var b=a.byId(b),e=c||g.getComputedStyle(b),i=l.getPadExtents(b,e),e=l.getBorderExtents(b,e);return{l:i.l+e.l,t:i.t+e.t,r:i.r+e.r,b:i.b+e.b,
w:i.w+e.w,h:i.h+e.h}};l.getMarginExtents=function(b,c){var b=a.byId(b),e=c||g.getComputedStyle(b),i=g.toPixelValue,h=i(b,e.marginLeft),k=i(b,e.marginTop),j=i(b,e.marginRight),e=i(b,e.marginBottom);return{l:h,t:k,r:j,b:e,w:h+j,h:k+e}};l.getMarginBox=function(c,e){var c=a.byId(c),f=e||g.getComputedStyle(c),i=l.getMarginExtents(c,f),h=c.offsetLeft-i.l,k=c.offsetTop-i.t,j=c.parentNode,n=g.toPixelValue;if(b("mozilla")){var r=parseFloat(f.left),f=parseFloat(f.top);!isNaN(r)&&!isNaN(f)?(h=r,k=f):j&&j.style&&
(j=g.getComputedStyle(j),"visible"!=j.overflow&&(h+="none"!=j.borderLeftStyle?n(c,j.borderLeftWidth):0,k+="none"!=j.borderTopStyle?n(c,j.borderTopWidth):0))}else if((b("opera")||8==b("ie")&&!b("quirks"))&&j)j=g.getComputedStyle(j),h-="none"!=j.borderLeftStyle?n(c,j.borderLeftWidth):0,k-="none"!=j.borderTopStyle?n(c,j.borderTopWidth):0;return{l:h,t:k,w:c.offsetWidth+i.w,h:c.offsetHeight+i.h}};l.getContentBox=function(c,e){var c=a.byId(c),f=e||g.getComputedStyle(c),i=c.clientWidth,h=l.getPadExtents(c,
f),k=l.getBorderExtents(c,f);i?(f=c.clientHeight,k.w=k.h=0):(i=c.offsetWidth,f=c.offsetHeight);b("opera")&&(h.l+=k.l,h.t+=k.t);return{l:h.l,t:h.t,w:i-h.w-k.w,h:f-h.h-k.h}};l.setContentSize=function(b,c,f){var b=a.byId(b),g=c.w,c=c.h;j(b)&&(f=l.getPadBorderExtents(b,f),0<=g&&(g+=f.w),0<=c&&(c+=f.h));e(b,NaN,NaN,g,c)};var h={l:0,t:0,w:0,h:0};l.setMarginBox=function(c,m,f){var c=a.byId(c),i=f||g.getComputedStyle(c),f=m.w,o=m.h,t=j(c)?h:l.getPadBorderExtents(c,i),i=l.getMarginExtents(c,i);if(b("webkit")&&
k(c)){var v=c.style;if(0<=f&&!v.width)v.width="4px";if(0<=o&&!v.height)v.height="4px"}0<=f&&(f=Math.max(f-t.w-i.w,0));0<=o&&(o=Math.max(o-t.h-i.h,0));e(c,m.l,m.t,f,o)};l.isBodyLtr=function(a){a=a||c.doc;return"ltr"==(c.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};l.docScroll=function(a){var a=a||c.doc,e=c.doc.parentWindow||c.doc.defaultView;return"pageXOffset"in e?{x:e.pageXOffset,y:e.pageYOffset}:(e=b("quirks")?c.body(a):a.documentElement)&&{x:l.fixIeBiDiScrollLeft(e.scrollLeft||0,a),
y:e.scrollTop||0}};if(b("ie"))l.getIeDocumentElementOffset=function(a){a=a||c.doc;a=a.documentElement;if(8>b("ie")){var e=a.getBoundingClientRect(),f=e.left,e=e.top;7>b("ie")&&(f+=a.clientLeft,e+=a.clientTop);return{x:0>f?0:f,y:0>e?0:e}}return{x:0,y:0}};l.fixIeBiDiScrollLeft=function(a,e){var e=e||c.doc,f=b("ie");if(f&&!l.isBodyLtr(e)){var g=b("quirks"),h=g?c.body(e):e.documentElement,k=c.global;6==f&&!g&&k.frameElement&&h.scrollHeight>h.clientHeight&&(a+=h.clientLeft);return 8>f||g?a+h.clientWidth-
h.scrollWidth:-a}return a};l.position=function(d,e){var d=a.byId(d),f=c.body(d.ownerDocument),g=d.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};if(9>b("ie")){var h=l.getIeDocumentElementOffset(d.ownerDocument);g.x-=h.x+(b("quirks")?f.clientLeft+f.offsetLeft:0);g.y-=h.y+(b("quirks")?f.clientTop+f.offsetTop:0)}e&&(f=l.docScroll(d.ownerDocument),g.x+=f.x,g.y+=f.y);return g};l.getMarginSize=function(b,c){var b=a.byId(b),e=l.getMarginExtents(b,c||g.getComputedStyle(b)),
h=b.getBoundingClientRect();return{w:h.right-h.left+e.w,h:h.bottom-h.top+e.h}};l.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=a.offsetY};return l})},"frozen/ResourceManager":function(){define(["dcl","dcl/bases/Mixer","./shims/AudioContext"],function(b,c){function a(a,b){var c=b;a&&(c=[a,b].join("/"));return c.replace(/\/{2,}/g,"/")}var g=null;window.AudioContext&&(g=new window.AudioContext);return b(c,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundDir:null,
audioContext:g,resourceList:{},loadImage:function(b){b=a(this.imageDir,b);if(this.resourceList[b])return this.resourceList[b].img;this.allLoaded=!1;var c=new Image,g={name:b,img:c,complete:!1};c.onload=function(){g.complete=!0};c.src=b;this.resourceList[b]=g;return c},loadSound:function(b){var b=a(this.soundDir,b),c={name:b,buffer:null,complete:!1};if(this.audioContext){if(this.resourceList[b])return this.resourceList[b];this.resourceList[b]=c;var g=new XMLHttpRequest;g.open("GET",b,!0);g.responseType=
"arraybuffer";var l=this.audioContext;g.onload=function(){l.decodeAudioData(g.response,function(a){c.buffer=a;c.complete=!0},function(){})};g.send()}return c},playSound:function(a,b,c,g){c=c||0;if(this.audioContext&&a&&(a=a.buffer||a))try{var h=this.audioContext.createBufferSource();h.buffer=a;if(b)h.loop=!0;if(g){var d=this.audioContext.createGainNode();d.gain.value=g;h.connect(d);d.connect(this.audioContext.destination)}else h.connect(this.audioContext.destination);h.noteOn(c);return h}catch(m){}},
resourcesReady:function(){if(!this.allLoaded){for(var a in this.resourceList)if(!this.resourceList[a].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){var a=0,b=0,c;for(c in this.resourceList){var g=this.resourceList[c];b++;g.complete&&(a+=1)}return 0===b?0:Math.round(100*(a/b))}})})},"frozen/shims/AudioContext":function(){define(function(){for(var b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.AudioContext;++c)window.AudioContext=window[b[c]+"AudioContext"]})},"frozen/shims/RAF":function(){define(function(){for(var b=
0,c=["ms","moz","webkit","o"],a=0;a<c.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(a){var c=(new Date).getTime(),k=Math.max(0,16-(c-b)),j=window.setTimeout(function(){a(c+k)},k);b=c+k;return j};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(a){clearTimeout(a)}})},
"game/ui/CanvasDND":function(){define(["../state","../createBodies","./DNDFileController","dcl"],function(b,c,a,g){return g([a],{id:"canvas",drop:function(a){try{var g=a.dataTransfer.files;if(g&&1===g.length&&g[0].type.match(/image.*/)){var j=g[0],l=new FileReader;l.onerror=function(){};l.onload=function(a){if(a.target.readyState===FileReader.DONE){var e=new Image;e.onload=function(){b.game.stop();b.backImg=e;b.game.height=e.height;b.game.canvas.height=e.height;b.game.width=e.width;b.game.canvas.width=
e.width;c();b.game.run()};e.src=a.target.result}};l.readAsDataURL(j);this.dragleave(a)}}catch(h){}}})})},"game/ui/DNDFileController":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/on,dojo/dom,dojo/domReady!".split(","),function(b,c,a,g,e){return b([c],{node:null,borderStyle:null,borderDropStyle:"3px dashed red",constructor:function(){if(!this.node)this.node=e.byId(this.id);g(this.node,"dragenter",a.hitch(this,"dragenter"));g(this.node,"dragover",a.hitch(this,"dragover"));g(this.node,
"dragleave",a.hitch(this,"dragleave"));g(this.node,"drop",a.hitch(this,"drop"));this.borderStyle=this.node.style.border},dragenter:function(a){a.stopPropagation();a.preventDefault();this.node.style.border=this.borderDropStyle},dragover:function(a){a.stopPropagation();a.preventDefault()},dragleave:function(a){a.stopPropagation();a.preventDefault();this.node.style.border=this.borderStyle},preDrop:function(a){this.node.style.border=this.borderStyle;a.stopPropagation();a.preventDefault();this.drop(a)},
drop:function(a){var b=function(){},c=function(){return function(){}};try{for(var e=a.dataTransfer.files,a=0;a<e.length;a++){var d=new FileReader;d.onerror=b;d.onload=c(e[a]);d.readAsDataURL(e[a])}return!1}catch(g){}}})})},"game/ui/events":function(){define("../state,../createBodies,./toggleRedo,lodash,dojo/on,dojo/query,dojo/domReady!".split(","),function(b,c,a,g,e){e(document,"#toolForm:change",function(a){b.geometries=[];if("tool"===a.target.name)b.tool=a.target.value;if("toolType"===a.target.name)b.toolType=
a.target.value});e(document,"#load:click",function(){try{var a=JSON.parse(b.codeMirror.getValue());b.jsonObjs=a.objs;if(a.backImg)b.backImg=new Image,b.backImg.src=a.backImg;b.game.height=a.canvas.height;b.game.canvas.height=a.canvas.height;b.game.width=a.canvas.width;b.game.canvas.width=a.canvas.width;c()}catch(e){}});e(document,"#undoBtn:click",function(){b.jsonObjs.length&&(b.undoObjs.push(b.jsonObjs.pop()),c());a()});e(document,"#redoBtn:click",function(){b.undoObjs.length&&(b.jsonObjs.push(b.undoObjs.pop()),
c());a()});e(document,".gravity:change",g.debounce(c,500));e(document,"#runSimulation:change",function(a){b.runSimulation=a.target.checked});e(document,"#showStatic:change",function(a){b.showStatic=a.target.checked});e(document,"selectstart",function(a){a.preventDefault()})})},"game/ui/toggleRedo":function(){define(["../state","dojo/dom"],function(b,c){var a=c.byId("redoBtn");return function(){a.disabled=b.undoObjs.length?!1:!0}})},"dojo/query":function(){define("./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),
function(b,c,a,g,e,k,j,l){function h(b,c){var d=function(d,e){if("string"==typeof e&&(e=a.byId(e),!e))return new c([]);var f="string"==typeof d?b(d,e):d?d.orphan?d:[d]:[];return f.orphan?f:new c(f)};d.matches=b.match||function(a,b,c){return 0<d.filter([a],b,c).length};d.filter=b.filter||function(a,b,c){return d(b,c).filter(function(b){return-1<e.indexOf(a,b)})};if("function"!=typeof b)var f=b.search,b=function(a,b){return f(b||document,a)};return d}c.add("array-extensible",function(){return 1==k.delegate([],
{length:1}).length&&!c("bug-for-in-skips-shadowed")});var d=Array.prototype,m=d.slice,f=d.concat,i=e.forEach,o=function(a,c,d){c=[0].concat(m.call(c,0));d=d||b.global;return function(b){c[0]=b;return a.apply(d,c)}},t=function(a){var b=this instanceof v&&c("array-extensible");"number"==typeof a&&(a=Array(a));var d=a&&"length"in a?a:arguments;if(b||!d.sort){for(var e=b?this:[],f=e.length=d.length,g=0;g<f;g++)e[g]=d[g];if(b)return e;d=e}k._mixin(d,n);d._NodeListCtor=function(a){return v(a)};return d},
v=t,n=v.prototype=c("array-extensible")?[]:{};v._wrap=n._wrap=function(a,b,c){a=new (c||this._NodeListCtor||v)(a);return b?a._stash(b):a};v._adaptAsMap=function(a,b){return function(){return this.map(o(a,arguments,b))}};v._adaptAsForEach=function(a,b){return function(){this.forEach(o(a,arguments,b));return this}};v._adaptAsFilter=function(a,b){return function(){return this.filter(o(a,arguments,b))}};v._adaptWithCondition=function(a,c,d){return function(){var e=arguments,f=o(a,e,d);if(c.call(d||b.global,
e))return this.map(f);this.forEach(f);return this}};i(["slice","splice"],function(a){var b=d[a];n[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});i(["indexOf","lastIndexOf","every","some"],function(a){var c=e[a];n[a]=function(){return c.apply(b,[this].concat(m.call(arguments,0)))}});k.extend(t,{constructor:v,_NodeListCtor:v,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return g(c,
a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=m.call(this,0),c=e.map(arguments,function(a){return m.call(a,0)});return this._wrap(f.apply(b,c),this)},map:function(a,b){return this._wrap(e.map(this,a,b),this)},forEach:function(a,b){i(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=r._filterResult(this,b[0]);if(1==b.length)return c._stash(this);
d=1}return this._wrap(e.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=k.isFunction(a)?a:k.getObject(a),b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);i(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var r=h(l,t);b.query=h(l,function(a){return t(a)});r.load=function(a,b,c){j.load(a,b,function(a){c(h(a,t))})};b._filterQueryResult=r._filterResult=function(a,b,c){return new t(r.filter(a,
b,c))};b.NodeList=r.NodeList=t;return r})},"dojo/selector/_loader":function(){define(["../has","require"],function(b,c){var a=document.createElement("div");b.add("dom-qsa2.1",!!a.querySelectorAll);b.add("dom-qsa3",function(){try{return a.innerHTML="<p class='TEST'></p>",1==a.querySelectorAll(".TEST:empty").length}catch(b){}});var g;return{load:function(a,k,j){var l=c,a="default"==a?b("config-selectorEngine")||"css3":a,a="css2"==a||"lite"==a?"./lite":"css2.1"==a?b("dom-qsa2.1")?"./lite":"./acme":"css3"==
a?b("dom-qsa3")?"./lite":"./acme":"acme"==a?"./acme":(l=k)&&a;if("?"==a.charAt(a.length-1))var a=a.substring(0,a.length-1),h=!0;if(h&&(b("dom-compliant-qsa")||g))return j(g);l([a],function(b){"./lite"!=a&&(g=b);j(b)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(b,c,a,g,e){var k=g.trim,j=a.forEach,l="BackCompat"==e.doc.compatMode,h=!1,d=function(){return!0},m=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":
a+" ",b=function(b,c){return k(a.slice(b,c))},c=[],d=-1,e=-1,f=-1,g=-1,i=-1,j=-1,l=-1,n,m="",o="",t,q=0,u=a.length,p=null,r=null,v=function(){if(0<=j)p.id=b(j,q).replace(/\\/g,""),j=-1;if(0<=l){var a=l==q?null:b(l,q);p[0>">~+".indexOf(a)?"tag":"oper"]=a;l=-1}0<=i&&(p.classes.push(b(i+1,q).replace(/\\/g,"")),i=-1)};m=o,o=a.charAt(q),q<u;q++)if("\\"!=m)if(p||(t=q,p={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return h?this.otag:this.tag}},l=q),n)o==n&&(n=null);
else if("'"==o||'"'==o)n=o;else if(0<=d)if("]"==o){r.attr?r.matchFor=b(f||d+1,q):r.attr=b(d+1,q);if((d=r.matchFor)&&('"'==d.charAt(0)||"'"==d.charAt(0)))r.matchFor=d.slice(1,-1);if(r.matchFor)r.matchFor=r.matchFor.replace(/\\/g,"");p.attrs.push(r);r=null;d=f=-1}else{if("="==o)f=0<="|~^$*".indexOf(m)?m:"",r.type=f+o,r.attr=b(d+1,q-f.length),f=q+1}else if(0<=e){if(")"==o){if(0<=g)r.value=b(e+1,q);g=e=-1}}else if("#"==o)v(),j=q+1;else if("."==o)v(),i=q;else if(":"==o)v(),g=q;else if("["==o)v(),d=q,r=
{};else if("("==o)0<=g&&(r={name:b(g+1,q),value:null},p.pseudos.push(r)),e=q;else if(" "==o&&m!=o){v();0<=g&&p.pseudos.push({name:b(g+1,q)});p.loops=p.pseudos.length||p.attrs.length||p.classes.length;p.oquery=p.query=b(t,q);p.otag=p.tag=p.oper?null:p.tag||"*";if(p.tag)p.tag=p.tag.toUpperCase();if(c.length&&c[c.length-1].oper)p.infixOper=c.pop(),p.query=p.infixOper.query+" "+p.query;c.push(p);p=null}return c},f=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,
arguments)}},i=function(a,b){var c=b||[];a&&c.push(a);return c},o=function(a){return 1==a.nodeType},t=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(h?a.getAttribute(b):a.getAttribute(b,2))||""},v={"*=":function(a,b){return function(c){return 0<=t(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==t(c,a).indexOf(b)}},"$=":function(a,b){return function(c){var c=" "+t(c,a),d=c.lastIndexOf(b);return-1<d&&d==c.length-b.length}},
"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+t(b,a)+" ").indexOf(c)}},"|=":function(a,b){var c=b+"-";return function(d){d=t(d,a);return d==b||0==d.indexOf(c)}},"=":function(a,b){return function(c){return t(c,a)==b}}},n="undefined"==typeof e.doc.firstChild.nextElementSibling,r=!n?"nextElementSibling":"nextSibling",A=!n?"previousElementSibling":"previousSibling",u=n?o:d,x=function(a){for(;a=a[A];)if(u(a))return!1;return!0},p=function(a){for(;a=a[r];)if(u(a))return!1;return!0},
q=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,d=0,e=b.children||b.childNodes,f=a._i||a.getAttribute("_i")||-1,g=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!e)return-1;e=e.length;if(g==e&&0<=f&&0<=g)return f;c("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",e):b._l=e;f=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[r])if(u(b))c("ie")?b.setAttribute("_i",++d):b._i=++d,a===b&&(f=d);return f},F=function(a){return!(q(a)%2)},B=function(a){return q(a)%
2},w={checked:function(){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return x},"last-child":function(){return p},"only-child":function(){return function(a){return x(a)&&p(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,
b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=m(b)[0],d={el:1};if("*"!=c.tag)d.tag=1;if(!c.classes.length)d.classes=1;var e=I(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return B;if("even"==b)return F;if(-1!=b.indexOf("n")){var d=b.split("n",2),e=d[0]?"-"==d[0]?-1:c(d[0]):1,f=d[1]?c(d[1]):0,g=0,h=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(g=f-f%e),f%=e):0>e&&(e*=-1,0<f&&
(h=f,f%=e));if(0<e)return function(a){a=q(a);return a>=g&&(0>h||a<=h)&&a%e==f};b=f}var i=c(b);return function(a){return q(a)==i}}},V=9>c("ie")||9==c("ie")&&c("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return h?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},I=function(a,b){if(!a)return d;var b=b||{},c=null;"el"in b||(c=f(c,o));"tag"in b||"*"!=a.tag&&(c=f(c,function(b){return b&&(h?b.tagName:
b.tagName.toUpperCase())==a.getTag()}));"classes"in b||j(a.classes,function(a,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=f(c,function(a){return d.test(a.className)});c.count=b});"pseudos"in b||j(a.pseudos,function(a){var b=a.name;w[b]&&(c=f(c,w[b](b,a.value)))});"attrs"in b||j(a.attrs,function(a){var b,d=a.attr;a.type&&v[a.type]?b=v[a.type](d,a.matchFor):d.length&&(b=V(d));b&&(c=f(c,b))});"id"in b||a.id&&(c=f(c,function(b){return!!b&&b.id==a.id}));c||"default"in b||(c=d);return c},qa=function(a){return function(b,
c,d){for(;b=b[r];)if(!n||o(b)){(!d||L(b,d))&&a(b)&&c.push(b);break}return c}},ka=function(a){return function(b,c,d){for(b=b[r];b;){if(u(b)){if(d&&!L(b,d))break;a(b)&&c.push(b)}b=b[r]}return c}},$=function(a){a=a||d;return function(b,c,d){for(var e=0,f=b.children||b.childNodes;b=f[e++];)u(b)&&(!d||L(b,d))&&a(b,e)&&c.push(b);return c}},W={},O=function(a){var c=W[a.query];if(c)return c;var f=a.infixOper,f=f?f.oper:"",g=I(a,{el:1}),h="*"==a.tag,j=e.doc.getElementsByClassName;if(f){j={el:1};if(h)j.tag=
1;g=I(a,j);"+"==f?c=qa(g):"~"==f?c=ka(g):">"==f&&(c=$(g))}else if(a.id)g=!a.loops&&h?d:I(a,{el:1,id:1}),c=function(c,d){var e=b.byId(a.id,c.ownerDocument||c);if(e&&g(e)){if(9==c.nodeType)return i(e,d);for(var f=e.parentNode;f&&!(f==c);)f=f.parentNode;if(f)return i(e,d)}};else if(j&&/\{\s*\[native code\]\s*\}/.test(""+j)&&a.classes.length&&!l)var g=I(a,{el:1,classes:1,id:1}),k=a.classes.join(" "),c=function(a,b,c){for(var b=i(0,b),d,e=0,f=a.getElementsByClassName(k);d=f[e++];)g(d,a)&&L(d,c)&&b.push(d);
return b};else!h&&!a.loops?c=function(b,c,d){for(var c=i(0,c),e=0,f=a.getTag(),f=f?b.getElementsByTagName(f):[];b=f[e++];)L(b,d)&&c.push(b);return c}:(g=I(a,{el:1,tag:1,id:1}),c=function(b,c,d){for(var c=i(0,c),e,f=0,h=(e=a.getTag())?b.getElementsByTagName(e):[];e=h[f++];)g(e,b)&&L(e,d)&&c.push(e);return c});return W[a.query]=c},C={},X={},M=function(a){var b=m(k(a));if(1==b.length){var c=O(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=i(a),c,d,e=b.length,
f,g,h=0;h<e;h++){g=[];c=b[h];d=a.length-1;if(0<d)f={},g.nozip=!0;d=O(c);for(var j=0;c=a[j];j++)d(c,g,f);if(!g.length)break;a=g}return g}},Y=c("ie")?"commentStrip":"nozip",J=!!e.doc.querySelectorAll,aa=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,ba=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},ca=/([^[]*)([^\]]*])?/g,la=function(a,b,c){return b.replace(aa,ba)+(c||"")},N=function(a,b){a=a.replace(ca,la);if(J){var d=X[a];if(d&&!b)return d}if(d=C[a])return d;var d=a.charAt(0),e=-1==a.indexOf(" ");
0<=a.indexOf("#")&&e&&(b=!0);if(J&&!b&&-1==">~+".indexOf(d)&&(!c("ie")||-1==a.indexOf(":"))&&!(l&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return X[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(f);c[Y]=!0;return c}catch(d){return N(a,!0)(b)}}}var g=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return C[a]=2>g.length?M(a):function(a){for(var b=0,
c=[],d;d=g[b++];)c=c.concat(M(d)(a));return c}},H=0,ja=c("ie")?function(a){return h?a.getAttribute("_uid")||a.setAttribute("_uid",++H)||H:a.uniqueID}:function(a){return a._uid||(a._uid=++H)},L=function(a,b){if(!b)return 1;var c=ja(a);return!b[c]?b[c]=1:0},K=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;H++;var d,e;if(c("ie")&&h){var f=H+"";a[0].setAttribute("_zipIdx",f);for(d=1;e=a[d];d++)a[d].getAttribute("_zipIdx")!=f&&b.push(e),
e.setAttribute("_zipIdx",f)}else if(c("ie")&&a.commentStrip)try{for(d=1;e=a[d];d++)o(e)&&b.push(e)}catch(g){}else{a[0]&&(a[0]._zipIdx=H);for(d=1;e=a[d];d++)a[d]._zipIdx!=H&&b.push(e),e._zipIdx=H}return b},E=function(a,b){b=b||e.doc;h="div"===(b.ownerDocument||b).createElement("div").tagName;var c=N(a)(b);return c&&c.nozip?c:K(c)};E.filter=function(c,d,e){for(var f=[],g=m(d),g=1==g.length&&!/[^\w#\.]/.test(d)?I(g[0]):function(c){return-1!=a.indexOf(E(d,b.byId(e)),c)},h=0,i;i=c[h];h++)g(i)&&f.push(i);
return f};return E})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();