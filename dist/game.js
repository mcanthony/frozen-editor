//>>built
/*

 Lo-Dash 1.0.0-rc.3 (Custom Build) <http://lodash.com/>
 Build: `lodash modern -o ./dist/lodash.js`
 Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 Available under MIT license <http://lodash.com/license>
*/
(function(c,d){var b,j,g,l=function(){},e=function(a){for(var b in a)return 0;return 1},k={}.toString,i=function(a){return"[object Function]"==k.call(a)},a=function(a){return"[object String]"==k.call(a)},f=function(a){return"[object Array]"==k.call(a)},h=function(a,b){if(a)for(var c=0;c<a.length;)b(a[c++])},m=function(a,b){for(var c in b)a[c]=b[c];return a},n=function(a,b){return m(Error(a),{src:"dojoLoader",info:b})},q=1,r=function(){return"_"+q++},o=function(a,b,c){return ga(a,b,c,0,o)},u=this,
w=u.document,I=w&&w.createElement("DiV"),s=o.has=function(a){return i(p[a])?p[a]=p[a](u,w,I):p[a]},p=s.cache=d.hasCache;s.add=function(a,b,c,f){(void 0===p[a]||f)&&(p[a]=b);return c&&s(a)};for(var t in c.has)s.add(t,c.has[t],0,1);o.async=1;var y=new Function("return eval(arguments[0]);");o.eval=function(a,b){return y(a+"\r\n////@ sourceURL="+b)};var x={},v=o.signal=function(a,b){var c=x[a];h(c&&c.slice(0),function(a){a.apply(null,f(b)?b:[b])})},F=o.on=function(a,b){var c=x[a]||(x[a]=[]);c.push(b);
return{remove:function(){for(var a=0;a<c.length;a++)if(c[a]===b){c.splice(a,1);break}}}},z=[],ia={},Z=[],ja={},C=o.map={},L=[],A={},W="",Q={},$={};t={};var U=function(a){var b,c,f,h;for(b in $)c=$[b],(f=b.match(/^url\:(.+)/))?Q["url:"+Ja(f[1],a)]=c:"*now"==b?h=c:"*noref"!=b&&(f=Aa(b,a),Q[f.mid]=Q["url:"+f.url]=c);h&&h(M(a));$={}},qa=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},N=function(a,b){b.splice(0,b.length);for(var c in a)b.push([c,a[c],RegExp("^"+
qa(c)+"(/|$)"),c.length]);b.sort(function(a,b){return b[3]-a[3]});return b},ka=function(a){var b=a.name;b||(b=a,a={name:b});a=m({main:"main"},a);a.location=a.location?a.location:b;if(a.packageMap)C[b]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);ja[b]=a},ra=[],R=function(b,c,f){for(var e in b){if("waitSeconds"==e)o.waitms=1E3*(b[e]||0);"cacheBust"==e&&(W=b[e]?a(b[e])?b[e]:(new Date).getTime()+"":"");if("baseUrl"==e||"combo"==e)o[e]=b[e];b[e]!==p&&(o.rawConfig[e]=b[e],"has"!=e&&
s.add("config-"+e,b[e],0,c))}if(!o.baseUrl)o.baseUrl="./";/\/$/.test(o.baseUrl)||(o.baseUrl+="/");for(e in b.has)s.add(e,b.has[e],0,c);h(b.packages,ka);for(g in b.packagePaths)h(b.packagePaths[g],function(b){var c=g+"/"+b;a(b)&&(b={name:b});b.location=c;ka(b)});N(m(C,b.map),L);h(L,function(a){a[1]=N(a[1],[]);if("*"==a[0])L.star=a});N(m(ia,b.paths),Z);h(b.aliases,function(b){a(b[0])&&(b[0]=RegExp("^"+qa(b[0])+"$"));z.push(b)});if(c)ra.push({config:b.config});else for(e in b.config)c=aa(e,f),c.config=
m(c.config||{},b.config[e]);if(b.cache)U(),$=b.cache,b.cache["*noref"]&&U();v("config",[b,o.rawConfig])};o.rawConfig={};R(d,1);R(c,1);R(t,1);var D=function(a){sa(function(){h(a.deps,la)})},ga=function(b,c,h,e,i){var d;if(a(b)){if((d=aa(b,e,!0))&&d.executed)return d.result;throw n("undefinedModule",b);}f(b)||(R(b,0,e),b=c,c=h);if(f(b))if(b.length){for(var h="require*"+r(),g,j=[],k=0;k<b.length;)g=b[k++],j.push(aa(g,e));d=m(Ba("",h,0,""),{injected:2,deps:j,def:c||l,require:e?e.require:o,gc:1});A[d.mid]=
d;D(d);var q=J&&0!="sync";sa(function(){E(d,q)});d.executed||K.push(d);Ca()}else c&&c();return i},M=function(a){if(!a)return o;var b=a.require;if(!b)b=function(c,f,h){return ga(c,f,h,a,b)},a.require=m(b,o),b.module=a,b.toUrl=function(b){return Ja(b,a)},b.toAbsMid=function(b){return ma(b,a)};return b},K=[],T=[],G={},O=function(a){a.injected=1;G[a.mid]=1;a.url&&(G[a.url]=a.pack||1);na()},ba=function(a){a.injected=2;delete G[a.mid];a.url&&delete G[a.url];e(G)&&ta()},Sa=o.idle=function(){return!T.length&&
e(G)&&!K.length&&!J},ca=function(a,b){if(b)for(var c=0;c<b.length;c++)if(b[c][2].test(a))return b[c];return 0},La=function(a){for(var b=[],c,f,a=a.replace(/\\/g,"/").split("/");a.length;)c=a.shift(),".."==c&&b.length&&".."!=f?(b.pop(),f=b[b.length-1]):"."!=c&&b.push(f=c);return b.join("/")},Ba=function(a,b,c,f){return{pid:a,mid:b,pack:c,url:f,executed:0,def:0}},Ma=function(a,c,f,e,m,d,g,j){var l,k,o,r;r=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||r&&!c)return Ba(0,a,0,a);a=La(r?c.mid+"/../"+a:
a);if(/^\./.test(a))throw n("irrationalPath",a);c&&(o=ca(c.mid,d));(o=(o=o||d.star)&&ca(a,o[1]))&&(a=o[1]+a.substring(o[3]));c=(b=a.match(/^([^\/]+)(\/(.+))?$/))?b[1]:"";(l=f[c])?a=c+"/"+(k=b[3]||l.main):c="";var q=0;h(z,function(b){var c=a.match(b[0]);c&&0<c.length&&(q=i(b[1])?a.replace(b[0],b[1]):b[1])});if(q)return Ma(q,0,f,e,m,d,g,j);if(f=e[a])return j?Ba(f.pid,f.mid,f.pack,f.url):e[a];e=(o=ca(a,g))?o[1]+a.substring(o[3]):c?l.location+"/"+k:a;/(^\/)|(\:)/.test(e)||(e=m+e);return Ba(c,a,l,La(e+
".js"))},Aa=function(a,b){return Ma(a,b,ja,A,o.baseUrl,L,Z)},Na=function(a,b,c){return a.normalize?a.normalize(b,function(a){return ma(a,c)}):ma(b,c)},Oa=0,aa=function(a,b,c){var f,h;(f=a.match(/^(.+?)\!(.*)$/))?(h=aa(f[1],b,c),5===h.executed&&!h.load&&Da(h),h.load?(f=Na(h,f[2],b),a=h.mid+"!"+(h.dynamic?++Oa+"!":"")+f):(f=f[2],a=h.mid+"!"+ ++Oa+"!waitingForPlugin"),a={plugin:h,mid:a,req:M(b),prid:f}):a=Aa(a,b);return A[a.mid]||!c&&(A[a.mid]=a)},ma=o.toAbsMid=function(a,b){return Aa(a,b).mid},Ja=o.toUrl=
function(a,b){var c=Aa(a+"/x",b),f=c.url;return Pa(0===c.pid?a:f.substring(0,f.length-5))},Ha={injected:2,executed:5,def:3,result:3},V=function(a){return A[a]=m({mid:a},Ha)},Ta=V("require"),Ua=V("exports"),Va=V("module"),Ea={},X=0,Da=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},wa=function(a){var b={};h(a.loadQ,function(c){var f=Na(a,c.prid,c.req.module),h=a.dynamic?c.mid.replace(/waitingForPlugin$/,f):a.mid+"!"+f,f=m(m({},c),{mid:h,prid:f,injected:0});
A[h]||da(A[h]=f);b[c.mid]=A[h];ba(c);delete A[c.mid]});a.loadQ=0;var c=function(a){for(var c=a.deps||[],f=0;f<c.length;f++)(a=b[c[f].mid])&&(c[f]=a)},f;for(f in A)c(A[f]);h(K,c)},B=function(a){o.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=X++;a.loadQ&&(Da(a),wa(a));for(j=0;j<K.length;)K[j]===a?K.splice(j,1):j++;/^require\*/.test(a.mid)&&delete A[a.mid]},Fa=[],E=function(a,b){if(4===a.executed)return o.trace("loader-circular-dependency",[Fa.concat(a.mid).join("->")]),!a.def||b?Ea:a.cjs&&
a.cjs.exports;if(!a.executed){if(!a.def)return Ea;var c=a.mid,f=a.deps||[],h,e=[],m=0;for(a.executed=4;m<f.length;){h=f[m++];h=h===Ta?M(a):h===Ua?a.cjs.exports:h===Va?a.cjs:E(h,b);if(h===Ea)return a.executed=0,o.trace("loader-exec-module",["abort",c]),Ea;e.push(h)}o.trace("loader-run-factory",[a.mid]);c=a.def;e=i(c)?c.apply(null,e):c;a.result=void 0===e&&a.cjs?a.cjs.exports:e;B(a)}return a.result},J=0,sa=function(a){try{J++,a()}finally{J--}Sa()&&v("idle",[])},Ca=function(){J||sa(function(){for(var a,
b,c=0;c<K.length;)a=X,b=K[c],E(b),a!=X?c=0:c++})};void 0===s("dojo-loader-eval-hint-url")&&s.add("dojo-loader-eval-hint-url",1);var Pa=function(a){a+="";return a+(W?(/\?/.test(a)?"&":"?")+W:"")},da=function(a){var b=a.plugin;5===b.executed&&!b.load&&Da(b);var c=function(b){a.result=b;ba(a);B(a);Ca()};b.load?b.load(a.prid,a.req,c):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],K.unshift(b),la(b))},P=0,xa=0,Ga=0,ya=function(a,b){s("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Ga=1;a===P?P.call(null):
o.eval(a,s("dojo-loader-eval-hint-url")?b.url:b.mid);Ga=0},la=function(a){var b=a.mid,c=a.url;if(!a.executed&&!a.injected&&!(G[b]||a.url&&(a.pack&&G[a.url]===a.pack||1==G[a.url])))if(O(a),a.plugin)da(a);else{var f=function(){za(a);2!==a.injected&&(ba(a),m(a,Ha),o.trace("loader-define-nonmodule",[a.url]));Ca()};(P=Q[b]||Q["url:"+a.url])?(o.trace("loader-inject",["cache",a.mid,c]),ya(P,a),f()):(o.trace("loader-inject",["script",a.mid,c]),xa=a,o.injectUrl(Pa(c),f,a),xa=0)}},ea=function(a,b,c){o.trace("loader-define-module",
[a.mid,b]);if(2===a.injected)return v("error",n("multipleDefine",a)),a;m(a,{deps:b,def:c,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var f=0;f<b.length;f++)b[f]=aa(b[f],a);ba(a);if(!i(c)&&!b.length)a.result=c,B(a);return a},za=function(a,b){for(var c=[],f,e;T.length;)e=T.shift(),b&&(e[0]=b.shift()),f=e[0]&&aa(e[0])||a,c.push([f,e[1],e[2]]);U(a);h(c,function(a){D(ea.apply(null,a))})},ta=l,na=l;s.add("ie-event-behavior",
!!w.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var fa=function(a,b,c,f){if(s("ie-event-behavior"))return a.attachEvent(c,f),function(){a.detachEvent(c,f)};a.addEventListener(b,f,!1);return function(){a.removeEventListener(b,f,!1)}},pa=fa(window,"load","onload",function(){o.pageLoaded=1;"complete"!=w.readyState&&(w.readyState="complete");pa()}),Ia=w.getElementsByTagName("script")[0],Qa=Ia.parentNode;o.injectUrl=function(a,b,c){var c=c.node=w.createElement("script"),
f=fa(c,"load","onreadystatechange",function(a){var a=a||window.event,c=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(c.readyState))f(),h(),b&&b()}),h=fa(c,"error","onerror",function(b){f();h();v("error",n("scriptError",[a,b]))});c.type="text/javascript";c.charset="utf-8";c.src=a;Qa.insertBefore(c,Ia);return c};o.log=l;o.trace=l;V=function(b,c,f){var h=arguments.length,e=["require","exports","module"],m=[0,b,c];1==h?m=[0,i(b)?e:[],b]:2==h&&a(b)?m=[b,i(c)?e:[],c]:3==h&&(m=[b,c,f]);
o.trace("loader-define",m.slice(0,2));if((h=m[0]&&aa(m[0]))&&!G[h.mid])D(ea(h,m[1],m[2]));else if(!s("ie-event-behavior")||Ga)T.push(m);else{h=h||xa;if(!h)for(b in G)if((e=A[b])&&e.node&&"interactive"===e.node.readyState){h=e;break}h?(U(h),D(ea(h,m[1],m[2]))):v("error",n("ieDefineFailed",m[0]));Ca()}};V.amd={vendor:"dojotoolkit.org"};m(m(o,d.loaderPatch),c.loaderPatch);F("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(c){}});m(o,{uid:r,cache:Q,packs:ja});if(!u.define)u.define=
V,u.require=o,h(ra,function(a){R(a)}),F=t.deps||c.deps||d.deps,t=t.callback||c.callback||d.callback,o.boot=F||t?[F||[],t]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"./",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../frozen-editor",name:"frozen-editor"},{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../frozen",main:"GameCore",name:"frozen"},
{location:"../lodash",main:"lodash",name:"lodash"},{location:"../game",main:"game",name:"game"}]});
require({cache:{"dist/game":function(){define([],1)},"game/game":function(){define("./state,./handleInput,./draw,frozen/box2d/BoxGame,./ui/CanvasDND,./ui/events".split(","),function(c,d,b,j,g){d=new j({canvasId:"canvas",handleInput:d,draw:b});c.game=d;new g;d.run()})},"game/state":function(){define(["./StateManager","dojo/dom","dojo/domReady!"],function(c,d){return new c({entities:[],joints:[],undoObjs:[],geometries:[],tool:"rectangle",toolType:"static",showStatic:!0,backImg:null,game:null,codeMirror:CodeMirror.fromTextArea(d.byId("output"),
{theme:"frozen",matchBrackets:!0,lineWrapping:!0,mode:"application/json"})})})},"game/StateManager":function(){define(["dcl","dcl/bases/Mixer"],function(c,d){return c(d,{})})},"dcl/dcl":function(){(function(c){"undefined"!=typeof define?define(["./mini"],c):"undefined"!=typeof module?module.exports=c(require("./mini")):dcl=c(dcl)})(function(c){function d(){}function b(b,c,g){var i=b||d,a=c||d,f=g||d,h=function(){var b;i.apply(this,arguments);try{b=f.apply(this,arguments)}catch(c){b=c}a.call(this,
arguments,b);if(b instanceof Error)throw b;return b};h.advices={b:b,a:c,f:g};return h}function j(b){return function(e,d){var i=e._m,a;i&&((a=+i.w[d]||0)&&a!=b&&c._e("set chaining",d,e,b,a),i.w[d]=b)}}var g=c(c.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});c.mix(c,{Advice:g,advise:function(b){return new g(b)},before:function(b){return new g({before:b})},after:function(b){return new g({after:b})},around:c.superCall,chainBefore:j(1),chainAfter:j(2),isInstanceOf:function(b,
c){if(b instanceof c)return!0;var d=b.constructor._m,i;if(d)for(d=d.b,i=d.length-1;0<=i;--i)if(d[i]===c)return!0;return!1},_sb:function(d,e,g,i){var i=i[g]=c._ec(e,g,"f"),a=c._ec(e,g,"b").reverse(),e=c._ec(e,g,"a"),i=d?c._st(i,1==d?function(a){return c._sc(a.reverse())}:c._sc,g):c._ss(i,g);return!a.length&&!e.length?i||function(){}:b(c._sc(a),c._sc(e),i)}});return c})},"dcl/mini":function(){(function(c){"undefined"!=typeof define?define([],c):"undefined"!=typeof module?module.exports=c():dcl=c()})(function(){function c(a,
f){var h=[0],e,m,d,k,s,p,t,y,x=0,v;if(a)if(a instanceof Array){k={};t=a.slice(0).reverse();for(y=t.length-1;0<=y;--y)if(m=t[y],m._u=m._u||j++,e=m._m){for(p=e.b,x=p.length-1;0<x;--x)v=p[x]._u,k[v]=(k[v]||0)+1;t[y]=p.slice(0)}else t[y]=[m];s={};a:for(;t.length;){for(y=0;y<t.length;++y)if(p=t[y],m=p[0],v=m._u,!k[v]){s[v]||(h.push(m),s[v]=1);p.shift();p.length?--k[p[0]._u]:t.splice(y,1);continue a}c._e("cycle",f,t)}a=a[0];x=h.length-((k=a._m)&&a===h[h.length-(x=k.b.length)]?x:1)-1}else a._u=a._u||j++,
h=h.concat((k=a._m)?k.b:a);e=a?c.delegate(a[l]):{};for(p=a&&(k=a._m)?c.delegate(k.w):{constructor:2};0<x;--x)if(m=h[x],k=m._m,i(e,k&&k.h||m[l]),k)for(v in t=k.w)p[v]=(+p[v]||0)|t[v];for(v in f)b(k=f[v])?p[v]=+p[v]||0:e[v]=k;s={b:h,h:f,w:p,c:{}};h[0]={_m:s,prototype:e};m=e;k=s.w;p=s.b;t=s.c;for(d in k)m[d]=c._sb(k[d],p,d,t);d=e[g];d._m=s;d[l]=e;h[0]=d;return c._p(d)}function d(a){this.f=a}function b(a){return a instanceof d}var j=0,g="constructor",l="prototype",e=function(){},k={},i,a,f,h,m;(i=function(a,
b){for(var c in b)a[c]=b[c]})(c,{mix:i,delegate:function(a){e[l]=a;a=new e;e[l]=null;return a},Super:d,superCall:function(a){return new d(a)},_p:function(a){return a},_e:function(a){throw Error("dcl: "+a);},_f:function(a,b){var c=a.f(b);c.ctr=a.ctr;return c},_ec:a=function(a,c,f){for(var h=a.length-1,e=[],m,d,i="f"==f;m=a[h];--h)if((d=m._m)?(d=d.h).hasOwnProperty(c)&&(b(d=d[c])?i?d.f:d=d[f]:i):i&&(d=m[l][c])&&d!==k[c])d.ctr=m,e.push(d);return e},_sc:h=function(a){var b=a.length,c;return!b?0:1==b?
(c=a[0],function(){c.apply(this,arguments)}):function(){for(var c=0;c<b;++c)a[c].apply(this,arguments)}},_ss:f=function(a,f){for(var h=0,e,m=k[f];e=a[h];++h)m=b(e)?a[h]=c._f(e,m,f):e;return f!=g?m:function(){m.apply(this,arguments)}},_st:m=function(a,f,h){for(var e=0,m,d,i=0;m=a[e];++e)b(m)&&(d=e-i,a[e]=c._f(m,!d?0:1==d?a[i]:f(a.slice(i,e)),h),i=e);d=e-i;return!d?0:1==d&&h!=g?a[i]:f(i?a.slice(i):a)},_sb:function(b,c,e,d){c=d[e]=a(c,e,"f");return(b?m(c,h,e):f(c,e))||function(){}}});return c})},"dcl/bases/Mixer":function(){(function(c){"undefined"!=
typeof define?define(["../mini"],c):"undefined"!=typeof module?module.exports=c(require("../mini")):dclBasesMixer=c(dcl)})(function(c){return c(null,{declaredClass:"dcl/bases/Mixer",constructor:function(d){c.mix(this,d)}})})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(c,d){if(7>=c("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(b){}var j={};j.byId=c("ie")?function(b,c){if("string"!=typeof b)return b;var g=c||d.doc,i=b&&g.getElementById(b);if(i&&(i.attributes.id.value==
b||i.id==b))return i;g=g.all[b];if(!g||g.nodeName)g=[g];for(var a=0;i=g[a++];)if(i.attributes&&i.attributes.id&&i.attributes.id.value==b||i.id==b)return i}:function(b,c){return("string"==typeof b?(c||d.doc).getElementById(b):b)||null};j.isDescendant=function(b,c){try{b=j.byId(b);for(c=j.byId(c);b;){if(b==c)return!0;b=b.parentNode}}catch(d){}return!1};c.add("css-user-select",function(b,c,d){if(!d)return!1;var b=d.style,c=["Khtml","O","ms","Moz","Webkit"],d=c.length,i="userSelect";do if("undefined"!==
typeof b[i])return i;while(d--&&(i=c[d]+"UserSelect"));return!1});var g=c("css-user-select");j.setSelectable=g?function(b,c){j.byId(b).style[g]=c?"":"none"}:function(b,c){var b=j.byId(b),d=b.getElementsByTagName("*"),i=d.length;if(c)for(b.removeAttribute("unselectable");i--;)d[i].removeAttribute("unselectable");else for(b.setAttribute("unselectable","on");i--;)d[i].setAttribute("unselectable","on")};return j})},"dojo/sniff":function(){define(["./has"],function(c){var d=navigator,b=d.userAgent,d=d.appVersion,
j=parseFloat(d);c.add("air",0<=b.indexOf("AdobeAIR"));c.add("khtml",0<=d.indexOf("Konqueror")?j:void 0);c.add("webkit",parseFloat(b.split("WebKit/")[1])||void 0);c.add("chrome",parseFloat(b.split("Chrome/")[1])||void 0);c.add("safari",0<=d.indexOf("Safari")&&!c("chrome")?parseFloat(d.split("Version/")[1]):void 0);c.add("mac",0<=d.indexOf("Macintosh"));c.add("quirks","BackCompat"==document.compatMode);c.add("ios",/iPhone|iPod|iPad/.test(b));c.add("android",parseFloat(b.split("Android ")[1])||void 0);
if(!c("webkit")){0<=b.indexOf("Opera")&&c.add("opera",9.8<=j?parseFloat(b.split("Version/")[1])||j:j);0<=b.indexOf("Gecko")&&!c("khtml")&&!c("webkit")&&c.add("mozilla",j);c("mozilla")&&c.add("ff",parseFloat(b.split("Firefox/")[1]||b.split("Minefield/")[1])||void 0);if(document.all&&!c("opera"))b=parseFloat(d.split("MSIE ")[1])||void 0,(d=document.documentMode)&&5!=d&&Math.floor(b)!=d&&(b=d),c.add("ie",b);c.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return c})},"dojo/has":function(){define(["require",
"module"],function(c){var d=c.has||function(){};d.add("touch","ontouchstart"in document);d.add("device-width",screen.availWidth||innerWidth);c=document.createElement("form");d.add("dom-attributes-explicit",0==c.attributes.length);d.add("dom-attributes-specified-flag",0<c.attributes.length&&40>c.attributes.length);d.clearElement=function(b){b.innerHTML="";return b};d.normalize=function(b,c){var g=b.match(/[\?:]|[^:\?]*/g),l=0,e=function(b){var c=g[l++];if(":"==c)return 0;if("?"==g[l++]){if(!b&&d(c))return e();
e(!0);return e(b)}return c||0};return(b=e())&&c(b)};d.load=function(b,c,d){b?c([b],d):d()};return d})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(c,d,b){var j={global:c.global,doc:this.document||null,body:function(b){b=b||c.doc;return b.body||b.getElementsByTagName("body")[0]},setContext:function(b,d){c.global=j.global=b;c.doc=j.doc=d},withGlobal:function(b,d,e,k){var i=c.global;try{return c.global=j.global=b,j.withDoc.call(null,b.document,d,e,k)}finally{c.global=
j.global=i}},withDoc:function(d,l,e,k){var i=j.doc,a=b("quirks"),f=b("ie"),h,m,n;try{c.doc=j.doc=d;c.isQuirks=b.add("quirks","BackCompat"==c.doc.compatMode,!0,!0);if(b("ie")&&(n=d.parentWindow)&&n.navigator)h=parseFloat(n.navigator.appVersion.split("MSIE ")[1])||void 0,(m=d.documentMode)&&5!=m&&Math.floor(h)!=m&&(h=m),c.isIE=b.add("ie",h,!0,!0);e&&"string"==typeof l&&(l=e[l]);return l.apply(e,k||[])}finally{c.doc=j.doc=i,c.isQuirks=b.add("quirks",a,!0,!0),c.isIE=b.add("ie",f,!0,!0)}}};d.mixin(c,j);
return j})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(c,d,b,j){var g,c={},l={},e={config:d,global:this,dijit:c,dojox:l},c={dojo:["dojo",e],dijit:["dijit",c],dojox:["dojox",l]},j=b.map&&b.map[j.id.match(/[^\/]+/)[0]];for(g in j)c[g]?c[g][0]=j[g]:c[g]=[j[g],{}];for(g in c)j=c[g],j[1]._scopeName=j[0],d.noGlobals||(this[j[0]]=j[1]);e.scopeMap=c;e.baseUrl=e.config.baseUrl=b.baseUrl;e.isAsync=b.async;e.locale=d.locale;d="$Rev: 30226 $".match(/\d+/);e.version=
{major:1,minor:8,patch:3,flag:"",revision:d?+d[0]:NaN,toString:function(){var b=e.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(e);e.exit=function(){};e.deprecated=e.experimental=function(){};e._hasResource={};return e})},"dojo/_base/config":function(){define(["../has","require"],function(c,d){var b={},j=d.rawConfig,g;for(g in j)b[g]=j[g];return b})},"dojo/_base/lang":function(){define(["./kernel",
"../has","../sniff"],function(c,d){d.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var b=d("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],j=b.length,g=function(a,b,h){var d,e=0,i=c.global;if(!h)if(a.length){d=a[e++];try{h=c.scopeMap[d]&&c.scopeMap[d][1]}catch(g){}h=h||(d in i?i[d]:b?i[d]={}:void 0)}else return i;for(;h&&(d=a[e++]);)h=d in h?h[d]:b?h[d]={}:void 0;return h},
l=Object.prototype.toString,e=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},k=/\{([^\}]+)\}/g,i={_extraNames:b,_mixin:function(a,c,h){var e,i,g,k={};for(e in c)if(i=c[e],!(e in a)||a[e]!==i&&(!(e in k)||k[e]!==i))a[e]=h?h(i):i;if(d("bug-for-in-skips-shadowed")&&c)for(g=0;g<j;++g)if(e=b[g],i=c[e],!(e in a)||a[e]!==i&&(!(e in k)||k[e]!==i))a[e]=h?h(i):i;return a},mixin:function(a,b){a||(a={});for(var c=1,e=arguments.length;c<e;c++)i._mixin(a,arguments[c]);return a},setObject:function(a,
b,c){var e=a.split("."),a=e.pop();return(c=g(e,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return g(a.split("."),b,c)},exists:function(a,b){return void 0!==i.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===l.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||i.isArray(a)||i.isFunction(a))},isArrayLike:function(a){return a&&
void 0!==a&&!i.isString(a)&&!i.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(i.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!i.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,b){for(var c=1,e=arguments.length;c<e;c++)i._mixin(a.prototype,arguments[c]);return a},_hitchArgs:function(a,b){var h=i._toArray(arguments,2),e=i.isString(b);return function(){var d=i._toArray(arguments),g=e?(a||c.global)[b]:b;return g&&g.apply(a||this,h.concat(d))}},
hitch:function(a,b){if(2<arguments.length)return i._hitchArgs.apply(c,arguments);b||(b=a,a=null);if(i.isString(b)){a=a||c.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope="',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return!a?b:function(){return b.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,c){a.prototype=b;var e=new a;a.prototype=null;c&&i._mixin(e,c);return e}}(),_toArray:d("ie")?function(){function a(a,b,c){c=c||[];for(b=
b||0;b<a.length;b++)c.push(a[b]);return c}return function(b){return(b.item?a:e).apply(this,arguments)}}():e,partial:function(a){return i.hitch.apply(c,[null].concat(i._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||i.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,c,e;if(i.isArray(a)){b=[];for(c=0,e=a.length;c<e;++c)c in a&&b.push(i.clone(a[c]))}else b=a.constructor?
new a.constructor:{};return i._mixin(b,a,i.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,c){return a.replace(c||k,i.isFunction(b)?b:function(a,c){return i.getObject(c,!1,b)})}};i.mixin(c,i);return i})},"dojo/domReady":function(){define(["./has"],function(){function c(a){l?a(b):e.push(a)}var d=this,b=document,j={loaded:1,complete:1},g="string"!=typeof b.readyState,l=!!j[b.readyState];if(g)b.readyState=
"loading";if(!l){var e=[],k=[],i=function(a){a=a||d.event;if(!(l||"readystatechange"==a.type&&!j[b.readyState])){l=1;if(g)b.readyState="complete";for(;e.length;)e.shift()(b)}},a=function(a,b){a.addEventListener(b,i,!1);e.push(function(){a.removeEventListener(b,i,!1)})};a(b,"DOMContentLoaded");a(d,"load");"onreadystatechange"in b?a(b,"readystatechange"):g||k.push(function(){return j[b.readyState]});if(k.length){var f=function(){if(!l){for(var a=k.length;a--;)if(k[a]()){i("poller");return}setTimeout(f,
30)}};f()}}c.load=function(a,b,f){c(f)};return c})},"game/handleInput":function(){define("./state,./createBodies,./createJSON/main,./utils/insideCanvas,dojo/dom,frozen/utils".split(","),function(c,d,b,j,g,l){var e=g.byId("xdisp"),k=g.byId("ydisp"),i;return function(a){if(a.mouseAction.position)e.innerHTML=a.mouseAction.position.x,k.innerHTML=a.mouseAction.position.y;if(a.mouseAction.isPressed()&&j(a.mouseAction.startPosition,this)&&!i)i=a.mouseAction.startPosition,c.geometries.push(i);if(!a.mouseAction.isPressed()&&
a.mouseAction.endPosition&&i){i=a.mouseAction.endPosition;if(!("polygon"===c.tool&&10!==c.geometries.length&&(1>=c.geometries.length||4<l.distance(c.geometries[0],i))))c.geometries.push(i),c.entities.push(b[c.tool](c.geometries)),d(),c.geometries=[],a.mouseAction.endPosition=null;i=null}}})},"game/createBodies":function(){define("./state,./Entities,./Joints,./ui/getGravity,./ui/displayJSON,./ui/toggleUndo,lodash,dojo/dom-class,frozen/box2d/Box".split(","),function(c,d,b,j,g,l,e,k,i){var a=0;return function(){var f=
!1,h=j();c.game.box=new i({gravityX:h.x,gravityY:h.y});c.game.entities={};(h=e(c.entities).map(function(a){a=parseInt(a.id,10);return"undefined"===typeof a||null===a||isNaN(a)?-1:a}).max().value())&&(a=h+1);e.forEach(c.entities,function(b){if(!b.staticBody&&!b.zone)b.fillStyle=b.fillStyle||"rgba(0,255,0,0.4)";if(b.zone)b.fillStyle=b.fillStyle||"rgba(255,0,0,0.2)";if("undefined"===typeof b.id||null===b.id)b.id=a,a++;if(c.game.entities[b.id])f=!0;else{var h=new d[b.type](e.cloneDeep(b));c.game.entities[b.id]=
h;b.zone||c.game.box.addBody(h)}});e.forEach(c.joints,function(a){a=new b[a.type](e.cloneDeep(a));c.game.box.addJoint(a)});f?k.remove("duplicate-ids","hide"):k.add("duplicate-ids","hide");g(c.entities);l()}})},"game/Entities":function(){define(["frozen/box2d/RectangleEntity","frozen/box2d/PolygonEntity","frozen/box2d/CircleEntity"],function(c,d,b){return{Rectangle:c,Polygon:d,Circle:b}})},"frozen/box2d/RectangleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(c,d,b){return c([d,
b],{halfWidth:1,halfHeight:1,draw:c.superCall(function(b){return function(c,d){var d=d||this.scale||1,e=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*d,this.y*d);c.rotate(this.angle);c.translate(-this.x*d,-this.y*d);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.fillRect((this.x-this.halfWidth)*d,(this.y-this.halfHeight)*d,2*this.halfWidth*d,2*this.halfHeight*d);c.strokeRect((this.x-this.halfWidth)*d,(this.y-this.halfHeight)*d,2*this.halfWidth*d,2*this.halfHeight*
d);c.restore();c.lineWidth=e;b.apply(this,[c,d])}}),scaleShape:c.superCall(function(b){return function(c){this.halfHeight*=c;this.halfWidth*=c;b.apply(this,[c])}}),pointInShape:function(b){return b.x>=this.x-this.halfWidth&&b.x<=this.x+this.halfWidth&&b.y>=this.y-this.halfHeight&&b.y<=this.y+this.halfHeight}})})},"frozen/box2d/Entity":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(c,d,b){return c(d,{id:0,x:0,y:0,scale:null,angle:0,center:null,restitution:0.3,density:1,friction:0.9,
linearDamping:0,linearVelocity:null,angularVelocity:0,angularDamping:0,staticBody:!1,fillStyle:"rgba(128,128,128,0.5)",strokeStyle:"#000",lineWidth:1,hidden:!1,maskBits:null,categoryBits:null,groupIndex:null,update:function(c){b.mixin(this,c)},draw:function(b,c){var c=c||this.scale||1,d=b.lineWidth;b.lineWidth=this.lineWidth;b.fillStyle=this.strokeStyle;b.beginPath();b.arc(this.x*c,this.y*c,4,0,2*Math.PI,!0);b.closePath();b.fill();if(this.center)b.fillStyle="yellow",b.beginPath(),b.arc(this.center.x*
c,this.center.y*c,2,0,2*Math.PI,!0),b.closePath(),b.fill();b.lineWidth=d},scaleShape:function(b){this.x*=b;this.y*=b;this.alreadyScaled=!0}})})},"frozen/box2d/PolygonEntity":function(){define("dcl,dcl/bases/Mixer,./Entity,../utils/scalePoints,../utils/pointInPolygon,../utils/translatePoints".split(","),function(c,d,b,j,g,l){return c([d,b],{points:[],draw:c.superCall(function(b){return function(c,d){var d=d||this.scale||1,a=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*d,this.y*
d);c.rotate(this.angle);c.translate(-this.x*d,-this.y*d);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.moveTo((this.x+this.points[0].x)*d,(this.y+this.points[0].y)*d);for(var f=1;f<this.points.length;f++)c.lineTo((this.points[f].x+this.x)*d,(this.points[f].y+this.y)*d);c.lineTo((this.x+this.points[0].x)*d,(this.y+this.points[0].y)*d);c.closePath();c.fill();c.stroke();c.restore();c.lineWidth=a;b.apply(this,[c,d])}}),scaleShape:c.superCall(function(b){return function(c){this.points=
j(this.points,c);b.apply(this,[c])}}),pointInShape:function(b){return g(b,l(this.points,this))}})})},"frozen/utils/scalePoints":function(){define(["dojo/_base/lang"],function(c){var d=function(b,j){if(c.isArray(b)){var g=[];b.forEach(function(b){g.push(d(b,j))});b=g}else b="object"===typeof j?{x:b.x*j.x,y:b.y*j.y}:{x:b.x*j,y:b.y*j};return b};return d})},"frozen/utils/pointInPolygon":function(){define(function(){return function(c,d){if(!c||!d)return!1;for(var b=d.points||d,j=!1,g=b.length-1,l=0;l<
b.length;g=l++){var e=b[l].x,k=b[l].y,i=b[g].x,g=b[g].y;k>c.y!==g>c.y&&c.x<(i-e)*(c.y-k)/(g-k)+e&&(j=!j)}return j}})},"frozen/utils/translatePoints":function(){define(["dojo/_base/lang"],function(c){var d=function(b,j){if(c.isArray(b)){var g=[];b.forEach(function(b){g.push(d(b,j))});b=g}else b={x:b.x,y:b.y},j.hasOwnProperty("x")&&(b.x+=j.x),j.hasOwnProperty("y")&&(b.y+=j.y);return b};return d})},"frozen/box2d/CircleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity","../utils/distance"],
function(c,d,b,j){return c([d,b],{radius:1,draw:c.superCall(function(b){return function(c,d){var d=d||this.scale||1,j=c.lineWidth;c.lineWidth=this.lineWidth;c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.arc(this.x*d,this.y*d,this.radius*d,0,2*Math.PI,!0);c.closePath();c.fill();c.stroke();this.staticBody||(c.save(),c.translate(this.x*d,this.y*d),c.rotate(this.angle),c.translate(-this.x*d,-this.y*d),c.beginPath(),c.moveTo(this.x*d,this.y*d),c.lineTo(this.x*d,this.y*d-this.radius*
d),c.closePath(),c.stroke(),c.restore());c.lineWidth=j;b.apply(this,[c,d])}}),scaleShape:c.superCall(function(b){return function(c){this.radius*=c;b.apply(this,[c])}}),pointInShape:function(b){return j(b,this)<=this.radius}})})},"frozen/utils/distance":function(){define(function(){return function(c,d){return Math.sqrt((d.x-c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y))}})},"game/Joints":function(){define(["frozen/box2d/joints/Distance","frozen/box2d/joints/Prismatic","frozen/box2d/joints/Revolute"],function(c,
d,b){return{Distance:c,Prismatic:d,Revolute:b}})},"frozen/box2d/joints/Distance":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(c,d,b,j){var g=Box2D.Common.Math.b2Vec2,l=Box2D.Dynamics.Joints.b2DistanceJointDef;return c([d,j],{bodyPoint2:null,scaleJointLocation:c.superCall(function(b){return function(c){if(c&&this.bodyPoint2)this.bodyPoint2.x*=c,this.bodyPoint2.y*=c,this.alreadyScaled=!0;b.apply(this,[c])}}),createB2Joint:function(c){if(c&&c.bodiesMap&&c.b2World&&
c.jointsMap&&!c.jointsMap[this.id]){var d=c.bodiesMap[this.bodyId1],i=c.bodiesMap[this.bodyId2];if(d&&i){var a,f;this.bodyPoint1&&(a=new g(this.bodyPoint1.x,this.bodyPoint1.y));this.bodyPoint2&&(f=new g(this.bodyPoint2.x,this.bodyPoint2.y));a=a||d.GetWorldCenter();f=f||i.GetWorldCenter();var h=new l;h.Initialize(d,i,a,f);this.jointAttributes&&b.mixin(h,this.jointAttributes);return c.b2World.CreateJoint(h)}}}})})},"frozen/box2d/joints/Joint":function(){define(["dcl","dcl/bases/Mixer"],function(c,d){return c(d,
{bodyId1:null,bodyId2:null,bodyPoint1:null,jointAttributes:null,scaleJointLocation:function(b){if(b&&this.bodyPoint1)this.bodyPoint1.x*=b,this.bodyPoint1.y*=b,this.alreadyScaled=!0}})})},"frozen/box2d/joints/Prismatic":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(c,d,b,j){var g=Box2D.Common.Math.b2Vec2,l=Box2D.Dynamics.Joints.b2PrismaticJointDef;return c([d,j],{axisScale:null,createB2Joint:function(c){if(c&&c.bodiesMap&&c.b2World&&c.jointsMap&&!c.jointsMap[this.id]){var d=
c.bodiesMap[this.bodyId1],i=c.bodiesMap[this.bodyId2];if(d&&i){var a;this.bodyPoint1&&(a=new g(this.bodyPoint1.x,this.bodyPoint1.y));a=a||d.GetWorldCenter();var f=new l,h;h=this.axisScale?new g(this.axisScale.x,this.axisScale.y):new g(1,0);f.Initialize(d,i,a,h);this.jointAttributes&&b.mixin(f,this.jointAttributes);return c.b2World.CreateJoint(f)}}}})})},"frozen/box2d/joints/Revolute":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang","./Joint"],function(c,d,b,j){var g=Box2D.Common.Math.b2Vec2,
l=Box2D.Dynamics.Joints.b2RevoluteJointDef;return c([d,j],{createB2Joint:function(c){if(c&&c.bodiesMap&&c.b2World&&c.jointsMap&&!c.jointsMap[this.id]){var d=c.bodiesMap[this.bodyId1],i=c.bodiesMap[this.bodyId2];if(d&&i){var a;this.bodyPoint1&&(a=new g(this.bodyPoint1.x,this.bodyPoint1.y));a=a||d.GetWorldCenter();var f=new l;f.Initialize(d,i,a,void 0);this.jointAttributes&&b.mixin(f,this.jointAttributes);return c.b2World.CreateJoint(f)}}}})})},"game/ui/getGravity":function(){define(["dojo/dom","dojo/domReady!"],
function(c){var d=c.byId("gravityX"),b=c.byId("gravityY");return function(){return{x:parseFloat(d.value,10),y:parseFloat(b.value,10)}}})},"game/ui/displayJSON":function(){define(["../state","dojo/dom"],function(c){return function(d){c.codeMirror.setValue(JSON.stringify({entities:d,joints:c.joints,canvas:{height:c.game?c.game.height:null,width:c.game?c.game.width:null},backImg:c.backImg?c.backImg.src:null},null,"  "))}})},"game/ui/toggleUndo":function(){define(["../state","dojo/dom"],function(c,d){var b=
d.byId("undoBtn");return function(){b.disabled=c.entities.length?!1:!0}})},"lodash/lodash":function(){(function(c,d){function b(a){if(a&&"object"==typeof a&&a.__wrapped__)return a;if(!(this instanceof b))return new b(a);this.__wrapped__=a}function j(a,b,c){b||(b=0);var d=a.length,f=d-b>=(c||La);if(f)for(var h={},c=b-1;++c<d;){var e=a[c]+"";(B.call(h,e)?h[e]:h[e]=[]).push(a[c])}return function(c){if(f){var d=c+"";return B.call(h,d)&&-1<N(h[d],c)}return-1<N(a,c,b)}}function g(a){return a.charCodeAt(0)}
function l(a,b){var c=a.index,d=b.index,a=a.criteria,b=b.criteria;if(a!==b){if(a>b||"undefined"==typeof a)return 1;if(a<b||"undefined"==typeof b)return-1}return c<d?-1:1}function e(a,b,c,d){function f(){var j=arguments,n=i?this:b;e||(a=b[g]);c.length&&(j=j.length?(j=m(j),d?j.concat(c):c.concat(j)):c);return this instanceof f?(h.prototype=a.prototype,n=new h,h.prototype=null,j=a.apply(n,j),t(j)?j:n):a.apply(n,j)}var e=p(a),i=!c,g=b;i&&(c=b);e||(b=a);return f}function k(a,b,c){if(null==a)return ga;
var d=typeof a;if("function"!=d){if("object"!=d)return function(b){return b[a]};var f=oa(a);return function(b){for(var c=f.length,d=!1;c--&&(d=s(b[f[c]],a[f[c]],ca)););return d}}return"undefined"!=typeof b?1===c?function(c){return a.call(b,c)}:2===c?function(c,d){return a.call(b,c,d)}:4===c?function(c,d,f,h){return a.call(b,c,d,f,h)}:function(c,d,f){return a.call(b,c,d,f)}:a}function i(){for(var a={isKeysFast:cb,arrays:"isArray(iterable)",bottom:"",loop:"",top:"",useHas:!0},b,c=0;b=arguments[c];c++)for(var d in b)a[d]=
b[d];b=a.args;a.firstArg=/^[^,]+/.exec(b)[0];c="var index, iterable = "+a.firstArg+", result = iterable;\nif (!iterable) return result;\n"+a.top+";\n";a.arrays&&(c+="var length = iterable.length; index = -1;\nif ("+a.arrays+") {\n  while (++index < length) {\n    "+a.loop+"\n  }\n}\nelse {  ");a.isKeysFast&&a.useHas?c+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? nativeKeys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    "+
a.loop+"\n  }  ":(c+="\n  for (index in iterable) {",a.useHas&&(c+="\n    if (",a.useHas&&(c+="hasOwnProperty.call(iterable, index)"),c+=") {    "),c+=a.loop+";    ",a.useHas&&(c+="\n    }"),c+="\n  }  ");a.arrays&&(c+="\n}");c+=a.bottom+";\nreturn result";return Function("createCallback, hasOwnProperty, isArguments, isArray, isString, objectTypes, nativeKeys","return function("+b+") {\n"+c+"\n}")(k,B,q,H,x,Za,da)}function a(a){return"\\"+db[a]}function f(a){return ab[a]}function h(){}function m(a,
b,c){b||(b=0);"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,c=c-b||0,f=Array(0>c?0:c);++d<c;)f[d]=a[b+d];return f}function n(a){return eb[a]}function q(a){return E.call(a)==ya}function r(a){var b=!1;if(!(a&&"object"==typeof a)||q(a))return b;var c=a.constructor;return!p(c)||c instanceof c?(ua(a,function(a,c){b=c}),!1===b||B.call(a,b)):b}function o(a){var b=[];va(a,function(a,c){b.push(c)});return b}function u(a,b,c,f,h,e){var i=a;"function"==typeof b&&(f=c,c=b,b=!1);if("function"==typeof c){var c=
"undefined"==typeof f?c:k(c,f,1),i=c(i),g="undefined"!=typeof i;g||(i=a)}if(f=t(i)){var j=E.call(i);if(!Y[j])return i;var n=H(i)}if(!f||!b)return f&&!g?n?m(i):Wa({},i):i;f=ha[j];switch(j){case ea:case za:return g?i:new f(+i);case ta:case pa:return g?i:new f(i);case fa:return g?i:f(i.source,aa.exec(i))}h||(h=[]);e||(e=[]);for(j=h.length;j--;)if(h[j]==a)return e[j];if(!g&&(i=n?f(i.length):{},n)){if(B.call(a,"index"))i.index=a.index;if(B.call(a,"input"))i.input=a.input}h.push(a);e.push(i);(n?C:va)(g?
i:a,function(a,f){i[f]=u(a,b,c,d,h,e)});return i}function w(a){var b=[];ua(a,function(a,c){p(a)&&b.push(c)});return b.sort()}function I(a){for(var b=-1,c=oa(a),d=c.length,f={};++b<d;){var h=c[b];f[a[h]]=h}return f}function s(a,b,c,d,f,h){var e=c===ca;if(c&&!e){var c="undefined"==typeof d?c:k(c,d,2),i=c(a,b);if("undefined"!=typeof i)return!!i}if(a===b)return 0!==a||1/a==1/b;var m=typeof a,g=typeof b;if(a===a&&(!a||"function"!=m&&"object"!=m)&&(!b||"function"!=g&&"object"!=g))return!1;if(null==a||null==
b)return a===b;g=E.call(a);m=E.call(b);g==ya&&(g=na);m==ya&&(m=na);if(g!=m)return!1;switch(g){case ea:case za:return+a==+b;case ta:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case fa:case pa:return a==b+""}m=g==la;if(!m){if(a.__wrapped__||b.__wrapped__)return s(a.__wrapped__||a,b.__wrapped__||b,c,d,f,h);if(g!=na)return!1;var g=a.constructor,j=b.constructor;if(g!=j&&(!p(g)||!(g instanceof g&&p(j)&&j instanceof j)))return!1}f||(f=[]);h||(h=[]);for(g=f.length;g--;)if(f[g]==a)return h[g]==b;var n=0,i=!0;f.push(a);
h.push(b);if(m){n=b.length;if(i=e||n==a.length)for(;n--&&(i=s(a[n],b[n],c,d,f,h)););return i}ua(b,function(b,e,m){if(B.call(m,e))return n++,i=B.call(a,e)&&s(a[e],b,c,d,f,h)});i&&!e&&ua(a,function(a,b,c){if(B.call(c,b))return i=-1<--n});return i}function p(a){return"function"==typeof a}function t(a){return a?Za[typeof a]:!1}function y(a){return"number"==typeof a||E.call(a)==ta}function x(a){return"string"==typeof a||E.call(a)==pa}function v(a,b,c){var d=arguments,f=0,h=2;if(!t(a))return a;if(c===ca)var e=
d[3],i=d[4],m=d[5];else if(i=[],m=[],"number"!=typeof c)h=d.length,"function"==typeof d[h-2]?e=k(d[--h-1],d[h--],2):"function"==typeof d[h-1]&&(e=d[--h]);for(;++f<h;)(H(d[f])?C:va)(d[f],function(b,c){var d,f,h=b,g=a[c];if(b&&((f=H(b))||Xa(b))){for(h=i.length;h--;)if(d=i[h]==b){g=m[h];break}d||(g=f?H(g)?g:[]:Xa(g)?g:{},e&&(h=e(g,b),"undefined"!=typeof h&&(g=h)),i.push(b),m.push(g),e||(g=v(g,b,ca,e,i,m)))}else e&&(h=e(g,b),"undefined"==typeof h&&(h=b)),"undefined"!=typeof h&&(g=h);a[c]=g});return a}
function F(a){for(var b=-1,c=oa(a),d=c.length,f=Array(d);++b<d;)f[b]=a[c[b]];return f}function z(a,b,c){var d=-1,f=a?a.length:0,h=!1,c=(0>c?P(0,f+c):c)||0;"number"==typeof f?h=-1<(x(a)?a.indexOf(b,c):N(a,b,c)):S(a,function(a){if(++d>=c)return!(h=a===b)});return h}function ia(a,b,c){var d=!0,b=k(b,c);if(H(a))for(var c=-1,f=a.length;++c<f&&(d=!!b(a[c],c,a)););else S(a,function(a,c,f){return d=!!b(a,c,f)});return d}function Z(a,b,c){var d=[],b=k(b,c);if(H(a))for(var c=-1,f=a.length;++c<f;){var h=a[c];
b(h,c,a)&&d.push(h)}else S(a,function(a,c,f){b(a,c,f)&&d.push(a)});return d}function ja(a,b,c){var d,b=k(b,c);C(a,function(a,c,f){if(b(a,c,f))return d=a,!1});return d}function C(a,b,c){if(b&&"undefined"==typeof c&&H(a))for(var c=-1,d=a.length;++c<d&&!(!1===b(a[c],c,a)););else S(a,b,c);return a}function L(a,b,c){var d=-1,f=a?a.length:0,h=Array("number"==typeof f?f:0),b=k(b,c);if(H(a))for(;++d<f;)h[d]=b(a[d],d,a);else S(a,function(a,c,f){h[++d]=b(a,c,f)});return h}function A(a,b,c){var d=-Infinity,
f=d;if(!b&&H(a))for(var c=-1,h=a.length;++c<h;){var e=a[c];e>f&&(f=e)}else b=!b&&x(a)?g:k(b,c),S(a,function(a,c,h){c=b(a,c,h);c>d&&(d=c,f=a)});return f}function W(a,b,c,d){var f=3>arguments.length,b=k(b,d,4);if(H(a)){var h=-1,e=a.length;for(f&&(c=a[++h]);++h<e;)c=b(c,a[h],h,a)}else S(a,function(a,d,h){c=f?(f=!1,a):b(c,a,d,h)});return c}function Q(a,b,c,d){var f=a?a.length:0,h=3>arguments.length;if("number"!=typeof f)var e=oa(a),f=e.length;b=k(b,d,4);C(a,function(d,i,g){i=e?e[--f]:--f;c=h?(h=!1,a[i]):
b(c,a[i],i,g)});return c}function $(a,b,c){var d,b=k(b,c);if(H(a))for(var c=-1,f=a.length;++c<f&&!(d=b(a[c],c,a)););else S(a,function(a,c,f){return!(d=b(a,c,f))});return!!d}function U(a,b,c){if(a){var d=0,f=a.length;if("function"==typeof b)for(var h=-1,b=k(b,c);++h<f&&b(a[h],h,a);)d++;else if(d=b,null==d||c)return a[0];return m(a,0,xa(P(0,d),f))}}function qa(a,b){for(var c=-1,d=a?a.length:0,f=[];++c<d;){var h=a[c];H(h)?Fa.apply(f,b?h:qa(h)):f.push(h)}return f}function N(a,b,c){var d=-1,f=a?a.length:
0;if("number"==typeof c)d=(0>c?P(0,f+c):c||0)-1;else if(c)return d=ra(a,b),a[d]===b?d:-1;for(;++d<f;)if(a[d]===b)return d;return-1}function ka(a,b,c){if("function"==typeof b)for(var d=0,f=-1,h=a?a.length:0,b=k(b,c);++f<h&&b(a[f],f,a);)d++;else d=null==b||c?1:P(0,b);return m(a,d)}function ra(a,b,c,d){for(var f=0,h=a?a.length:f,c=c?k(c,d,1):ga,b=c(b);f<h;)d=f+h>>>1,c(a[d])<b?f=d+1:h=d;return f}function R(a,b,c,d){var f=-1,h=a?a.length:0,e=[],i=e;"function"==typeof b&&(d=c,c=b,b=!1);var g=!b&&75<=h;
if(g)var m={};c&&(i=[],c=k(c,d));for(;++f<h;){var d=a[f],j=c?c(d,f,a):d;if(g)var n=j+"",n=B.call(m,n)?!(i=m[n]):i=m[n]=[];if(b?!f||i[i.length-1]!==j:n||0>N(i,j))(c||g)&&i.push(j),e.push(d)}return e}function D(a,b){return bb||J&&2<arguments.length?J.call.apply(J,arguments):e(a,b,m(arguments,2))}function ga(a){return a}function M(a){C(w(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this.__wrapped__];Fa.apply(a,arguments);return new b(d.apply(b,a))}})}function K(){return this.__wrapped__}
var T="object"==typeof exports&&exports,G="object"==typeof global&&global;G.global===G&&(c=G);var O=[],ba={},Sa=0,ca=ba,La=30,Ba=c._,Ma=/&(?:amp|lt|gt|quot|#39);/g,Aa=/\b__p \+= '';/g,Na=/\b(__p \+=) '' \+/g,Oa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,aa=/\w*$/,ma=RegExp("^"+(ba.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Ja=/\$\{((?:(?=\\?)\\?[\s\S])*?)}/g,Ha=/<%=([\s\S]+?)%>/g,V=/($^)/,Ta=/[&<>"']/g,Ua=/['\n\r\t\u2028\u2029\\]/g,Va=0,Ea=Math.ceil,X=O.concat,
Da=Math.floor,wa=ma.test(wa=Object.getPrototypeOf)&&wa,B=ba.hasOwnProperty,Fa=O.push,E=ba.toString,J=ma.test(J=m.bind)&&J,sa=ma.test(sa=Array.isArray)&&sa,Ca=c.isFinite,Pa=c.isNaN,da=ma.test(da=Object.keys)&&da,P=Math.max,xa=Math.min,Ga=Math.random,ya="[object Arguments]",la="[object Array]",ea="[object Boolean]",za="[object Date]",ta="[object Number]",na="[object Object]",fa="[object RegExp]",pa="[object String]",Ia=!!c.attachEvent,Qa=J&&!/\n|true/.test(J+Ia),bb=J&&!Qa,cb=da&&(Ia||Qa),Y={"[object Function]":!1};
Y[ya]=Y[la]=Y[ea]=Y[za]=Y[ta]=Y[na]=Y[fa]=Y[pa]=!0;var ha={};ha[la]=Array;ha[ea]=Boolean;ha[za]=Date;ha[na]=Object;ha[ta]=Number;ha[fa]=RegExp;ha[pa]=String;var Za={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},db={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ha,variable:"",imports:{_:b}};var Ra={args:"object, source, guard",top:"var argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : arguments.length;\nwhile (++argsIndex < argsLength) {\n  iterable = arguments[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",
loop:"result[index] = iterable[index]",bottom:"  }\n}"},Ka={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},$a={top:"if (!objectTypes[typeof iterable]) return result;\n"+Ka.top,arrays:!1},S=i(Ka),ua=i(Ka,$a,{useHas:!1}),va=i(Ka,$a),H=sa||function(a){return a instanceof Array||E.call(a)==la},
oa=!da?o:function(a){return!t(a)?[]:da(a)},ab={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eb=I(ab),Wa=i(Ra),Ya=i(Ra,{loop:"if (result[index] == null) "+Ra.loop});p(/x/)&&(p=function(a){return a instanceof Function||"[object Function]"==E.call(a)});var Xa=function(a){if(!(a&&"object"==typeof a))return!1;var b=a.valueOf,c="function"==typeof b&&(c=wa(b))&&wa(c);return c?a==c||wa(a)==c&&!q(a):r(a)};b.after=function(a,b){return 1>a?b():function(){if(1>--a)return b.apply(this,arguments)}};
b.assign=Wa;b.at=function(a){for(var b=-1,c=X.apply(O,m(arguments,1)),d=c.length,f=Array(d);++b<d;)f[b]=a[c[b]];return f};b.bind=D;b.bindAll=function(a){for(var b=X.apply(O,arguments),c=1<b.length?0:(b=w(a),-1),d=b.length;++c<d;){var f=b[c];a[f]=D(a[f],a)}return a};b.bindKey=function(a,b){return e(a,b,m(arguments,2))};b.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var f=a[b];f&&d.push(f)}return d};b.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=
[a[c].apply(this,b)];return b[0]}};b.countBy=function(a,b,c){var d={},b=k(b,c);C(a,function(a,c,f){c=b(a,c,f)+"";B.call(d,c)?d[c]++:d[c]=1});return d};b.debounce=function(a,b,c){function d(){i=null;c||(h=a.apply(e,f))}var f,h,e,i;return function(){var g=c&&!i;f=arguments;e=this;clearTimeout(i);i=setTimeout(d,b);g&&(h=a.apply(e,f));return h}};b.defaults=Ya;b.defer=function(a){var b=m(arguments,1);return setTimeout(function(){a.apply(d,b)},1)};b.delay=function(a,b){var c=m(arguments,2);return setTimeout(function(){a.apply(d,
c)},b)};b.difference=function(a){for(var b=-1,c=a?a.length:0,d=X.apply(O,arguments),d=j(d,c),f=[];++b<c;){var h=a[b];d(h)||f.push(h)}return f};b.filter=Z;b.flatten=qa;b.forEach=C;b.forIn=ua;b.forOwn=va;b.functions=w;b.groupBy=function(a,b,c){var d={},b=k(b,c);C(a,function(a,c,f){c=b(a,c,f)+"";(B.call(d,c)?d[c]:d[c]=[]).push(a)});return d};b.initial=function(a,b,c){if(!a)return[];var d=0,f=a.length;if("function"==typeof b)for(var h=f,b=k(b,c);h--&&b(a[h],h,a);)d++;else d=null==b||c?1:b||d;return m(a,
0,xa(P(0,f-d),f))};b.intersection=function(a){var b=arguments,c=b.length,d={"0":{}},f=-1,h=a?a.length:0,e=100<=h,i=[],g=i;a:for(;++f<h;){var m=a[f];if(e)var n=m+"",n=B.call(d[0],n)?!(g=d[0][n]):g=d[0][n]=[];if(n||0>N(g,m)){e&&g.push(m);for(var k=c;--k;)if(!(d[k]||(d[k]=j(b[k],0,100)))(m))continue a;i.push(m)}}return i};b.invert=I;b.invoke=function(a,b){var c=m(arguments,2),d=-1,f="function"==typeof b,h=a?a.length:0,e=Array("number"==typeof h?h:0);C(a,function(a){e[++d]=(f?b:a[b]).apply(a,c)});return e};
b.keys=oa;b.map=L;b.max=A;b.memoize=function(a,b){var c={};return function(){var d=(b?b.apply(this,arguments):arguments[0])+"";return B.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}};b.merge=v;b.min=function(a,b,c){var d=Infinity,f=d;if(!b&&H(a))for(var c=-1,h=a.length;++c<h;){var e=a[c];e<f&&(f=e)}else b=!b&&x(a)?g:k(b,c),S(a,function(a,c,h){c=b(a,c,h);c<d&&(d=c,f=a)});return f};b.object=function(a,b){for(var c=-1,d=a?a.length:0,f={};++c<d;){var h=a[c];b?f[h]=b[c]:f[h[0]]=h[1]}return f};b.omit=function(a,
b,c){var d="function"==typeof b,f={};if(d)b=k(b,c);else var h=X.apply(O,arguments);ua(a,function(a,c,e){if(d?!b(a,c,e):0>N(h,c,1))f[c]=a});return f};b.once=function(a){var b,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};b.pairs=function(a){for(var b=-1,c=oa(a),d=c.length,f=Array(d);++b<d;){var h=c[b];f[b]=[h,a[h]]}return f};b.partial=function(a){return e(a,m(arguments,1))};b.partialRight=function(a){return e(a,m(arguments,1),null,ca)};b.pick=function(a,b,c){var d=
{};if("function"!=typeof b)for(var f=0,h=X.apply(O,arguments),e=t(a)?h.length:0;++f<e;){var i=h[f];i in a&&(d[i]=a[i])}else b=k(b,c),ua(a,function(a,c,f){b(a,c,f)&&(d[c]=a)});return d};b.pluck=L;b.range=function(a,b,c){a=+a||0;c=+c||1;null==b&&(b=a,a=0);for(var d=-1,b=P(0,Ea((b-a)/c)),f=Array(b);++d<b;)f[d]=a,a+=c;return f};b.reject=function(a,b,c){b=k(b,c);return Z(a,function(a,c,d){return!b(a,c,d)})};b.rest=ka;b.shuffle=function(a){var b=-1,c=a?a.length:0,d=Array("number"==typeof c?c:0);C(a,function(a){var c=
Da(Ga()*(++b+1));d[b]=d[c];d[c]=a});return d};b.sortBy=function(a,b,c){var d=-1,f=a?a.length:0,h=Array("number"==typeof f?f:0),b=k(b,c);C(a,function(a,c,f){h[++d]={criteria:b(a,c,f),index:d,value:a}});f=h.length;for(h.sort(l);f--;)h[f]=h[f].value;return h};b.tap=function(a,b){b(a);return a};b.throttle=function(a,b){function c(){i=new Date;e=null;f=a.apply(h,d)}var d,f,h,e,i=0;return function(){var g=new Date,m=b-(g-i);d=arguments;h=this;0>=m?(clearTimeout(e),e=null,i=g,f=a.apply(h,d)):e||(e=setTimeout(c,
m));return f}};b.times=function(a,b,c){for(var a=+a||0,d=-1,f=Array(a);++d<a;)f[d]=b.call(c,d);return f};b.toArray=function(a){return a&&"number"==typeof a.length?m(a):F(a)};b.union=function(){return R(X.apply(O,arguments))};b.uniq=R;b.values=F;b.where=Z;b.without=function(a){for(var b=-1,c=a?a.length:0,d=j(arguments,1),f=[];++b<c;){var h=a[b];d(h)||f.push(h)}return f};b.wrap=function(a,b){return function(){var c=[a];Fa.apply(c,arguments);return b.apply(this,c)}};b.zip=function(a){for(var b=-1,c=
a?A(L(arguments,"length")):0,d=Array(c);++b<c;)d[b]=L(arguments,b);return d};b.collect=L;b.drop=ka;b.each=C;b.extend=Wa;b.methods=w;b.select=Z;b.tail=ka;b.unique=R;M(b);b.clone=u;b.cloneDeep=function(a,b,c){return u(a,!0,b,c)};b.contains=z;b.escape=function(a){return null==a?"":(a+"").replace(Ta,f)};b.every=ia;b.find=ja;b.has=function(a,b){return a?B.call(a,b):!1};b.identity=ga;b.indexOf=N;b.isArguments=q;b.isArray=H;b.isBoolean=function(a){return!0===a||!1===a||E.call(a)==ea};b.isDate=function(a){return a instanceof
Date||E.call(a)==za};b.isElement=function(a){return a?1===a.nodeType:!1};b.isEmpty=function(a){var b=!0;if(!a)return b;var c=E.call(a),d=a.length;if(c==la||c==pa||c==ya||c==na&&"number"==typeof d&&p(a.splice))return!d;va(a,function(){return b=!1});return b};b.isEqual=s;b.isFinite=function(a){return Ca(a)&&!Pa(parseFloat(a))};b.isFunction=p;b.isNaN=function(a){return y(a)&&a!=+a};b.isNull=function(a){return null===a};b.isNumber=y;b.isObject=t;b.isPlainObject=Xa;b.isRegExp=function(a){return a instanceof
RegExp||E.call(a)==fa};b.isString=x;b.isUndefined=function(a){return"undefined"==typeof a};b.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?P(0,d+c):xa(c,d-1))+1);d--;)if(a[d]===b)return d;return-1};b.mixin=M;b.noConflict=function(){c._=Ba;return this};b.random=function(a,b){null==a&&null==b&&(b=1);a=+a||0;null==b&&(b=a,a=0);return a+Da(Ga()*((+b||0)-a+1))};b.reduce=W;b.reduceRight=Q;b.result=function(a,b){var c=a?a[b]:d;return p(c)?a[b]():c};b.size=function(a){var b=
a?a.length:0;return"number"==typeof b?b:oa(a).length};b.some=$;b.sortedIndex=ra;b.template=function(c,f,h){var e=b.templateSettings;c||(c="");var h=Ya({},h,e),i=Ya({},h.imports,e.imports),e=oa(i),i=F(i),g,m=0,j=h.interpolate||V,n="__p += '";c.replace(RegExp((h.escape||V).source+"|"+j.source+"|"+(j===Ha?Ja:V).source+"|"+(h.evaluate||V).source+"|$","g"),function(b,d,f,h,e,i){f||(f=h);n+=c.slice(m,i).replace(Ua,a);d&&(n+="' +\n__e("+d+") +\n'");e&&(g=!0,n+="';\n"+e+";\n__p += '");f&&(n+="' +\n((__t = ("+
f+")) == null ? '' : __t) +\n'");m=i+b.length;return b});var n=n+"';\n",k=j=h.variable;k||(j="obj",n="with ("+j+") {\n"+n+"\n}\n");n=(g?n.replace(Aa,""):n).replace(Na,"$1").replace(Oa,"$1;");n="function("+j+") {\n"+(k?"":j+" || ("+j+" = {});\n")+"var __t, __p = '', __e = _.escape"+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(k?"":", __d = "+j+"."+j+" || "+j)+";\n")+n+"return __p\n}";h="\n/*\n//@ sourceURL="+(h.sourceURL||"/lodash/template/source["+Va++ +
"]")+"\n*/";try{var o=Function(e,"return "+n+h).apply(d,i)}catch(l){throw l.source=n,l;}if(f)return o(f);o.source=n;return o};b.unescape=function(a){return null==a?"":(a+"").replace(Ma,n)};b.uniqueId=function(a){var b=++Sa;return(null==a?"":a+"")+b};b.all=ia;b.any=$;b.detect=ja;b.foldl=W;b.foldr=Q;b.include=z;b.inject=W;va(b,function(a,c){b.prototype[c]||(b.prototype[c]=function(){var c=[this.__wrapped__];Fa.apply(c,arguments);return a.apply(b,c)})});b.first=U;b.last=function(a,b,c){if(a){var d=0,
f=a.length;if("function"==typeof b)for(var h=f,b=k(b,c);h--&&b(a[h],h,a);)d++;else if(d=b,null==d||c)return a[f-1];return m(a,P(0,f-d))}};b.take=U;b.head=U;va(b,function(a,c){b.prototype[c]||(b.prototype[c]=function(c,d){var f=a(this.__wrapped__,c,d);return null==c||d&&"function"!=typeof c?f:new b(f)})});b.VERSION="1.0.0-rc.3";b.prototype.toString=function(){return this.__wrapped__+""};b.prototype.value=K;b.prototype.valueOf=K;S(["join","pop","shift"],function(a){var c=O[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,
arguments)}});S(["push","reverse","sort","unshift"],function(a){var c=O[a];b.prototype[a]=function(){c.apply(this.__wrapped__,arguments);return this}});S(["concat","slice","splice"],function(a){var c=O[a];b.prototype[a]=function(){return new b(c.apply(this.__wrapped__,arguments))}});"function"==typeof define&&"object"==typeof define.amd&&define.amd?(c._=b,define(function(){return b})):T?"object"==typeof module&&module&&module.exports==T?(module.exports=b)._=b:T._=b:c._=b})(this)},"dojo/dom-class":function(){define(["./_base/lang",
"./_base/array","./dom"],function(c,d,b){function j(b){if("string"==typeof b||b instanceof String){if(b&&!l.test(b))return e[0]=b,e;b=b.split(l);b.length&&!b[0]&&b.shift();b.length&&!b[b.length-1]&&b.pop();return b}return!b?[]:d.filter(b,function(a){return a})}var g,l=/\s+/,e=[""],k={};return g={contains:function(c,a){return 0<=(" "+b.byId(c).className+" ").indexOf(" "+a+" ")},add:function(c,a){var c=b.byId(c),a=j(a),d=c.className,h,d=d?" "+d+" ":" ";h=d.length;for(var e=0,g=a.length,k;e<g;++e)(k=
a[e])&&0>d.indexOf(" "+k+" ")&&(d+=k+" ");h<d.length&&(c.className=d.substr(1,d.length-2))},remove:function(d,a){var d=b.byId(d),f;if(void 0!==a){a=j(a);f=" "+d.className+" ";for(var h=0,e=a.length;h<e;++h)f=f.replace(" "+a[h]+" "," ");f=c.trim(f)}else f="";d.className!=f&&(d.className=f)},replace:function(c,a,d){c=b.byId(c);k.className=c.className;g.remove(k,d);g.add(k,a);c.className!==k.className&&(c.className=k.className)},toggle:function(c,a,d){c=b.byId(c);if(void 0===d)for(var a=j(a),h=0,e=a.length,
n;h<e;++h)n=a[h],g[g.contains(c,n)?"remove":"add"](c,n);else g[d?"add":"remove"](c,a);return d}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(c,d,b){function j(a){return e[a]=new Function("item","index","array",a)}function g(a){var b=!a;return function(c,d,i){var g=0,k=c&&c.length||0,o;k&&"string"==typeof c&&(c=c.split(""));"string"==typeof d&&(d=e[d]||j(d));if(i)for(;g<k;++g){if(o=!d.call(i,c[g],g,c),a^o)return!o}else for(;g<k;++g)if(o=!d(c[g],g,c),a^o)return!o;
return b}}function l(a){var b=1,c=0,d=0;a||(b=c=d=-1);return function(e,g,j,o){if(o&&0<b)return i.lastIndexOf(e,g,j);var o=e&&e.length||0,l=a?o+d:c;j===k?j=a?c:o+d:0>j?(j=o+j,0>j&&(j=c)):j=j>=o?o+d:j;for(o&&"string"==typeof e&&(e=e.split(""));j!=l;j+=b)if(e[j]==g)return j;return-1}}var e={},k,i={every:g(!1),some:g(!0),indexOf:l(!0),lastIndexOf:l(!1),forEach:function(a,b,c){var d=0,i=a&&a.length||0;i&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=e[b]||j(b));if(c)for(;d<i;++d)b.call(c,
a[d],d,a);else for(;d<i;++d)b(a[d],d,a)},map:function(a,b,c,d){var i=0,g=a&&a.length||0,d=new (d||Array)(g);g&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=e[b]||j(b));if(c)for(;i<g;++i)d[i]=b.call(c,a[i],i,a);else for(;i<g;++i)d[i]=b(a[i],i,a);return d},filter:function(a,b,c){var d=0,i=a&&a.length||0,g=[],k;i&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=e[b]||j(b));if(c)for(;d<i;++d)k=a[d],b.call(c,k,d,a)&&g.push(k);else for(;d<i;++d)k=a[d],b(k,d,a)&&g.push(k);return g},
clearCache:function(){e={}}};b.mixin(c,i);return i})},"frozen/box2d/Box":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(c,d){var b=Box2D.Common.Math.b2Vec2,j=Box2D.Dynamics.b2BodyDef,g=Box2D.Dynamics.b2Body,l=Box2D.Dynamics.b2FixtureDef,e=Box2D.Dynamics.b2World,k=Box2D.Collision.Shapes.b2PolygonShape,i=Box2D.Collision.Shapes.b2CircleShape;return c(d,{intervalRate:60,adaptive:!1,bodiesMap:null,fixturesMap:null,jointsMap:null,b2World:null,gravityX:0,gravityY:9.8,allowSleep:!0,
resolveCollisions:!1,contactListener:null,collisions:null,scale:30,constructor:function(a){if(a&&a.intervalRate)this.intervalRate=parseInt(a.intervalRate,10);this.bodiesMap={};this.fixturesMap={};this.jointsMap={};this.b2World=new e(new b(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(a){if(this.resolveCollisions)this.collisions={};var b=Date.now();a?this.b2World.Step(a/1E3,10,10):this.b2World.Step(this.adaptive?
(b-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.b2World.ClearForces();return Date.now()-b},getState:function(){for(var a={},b=this.b2World.GetBodyList();b;b=b.m_next)if(b.IsActive()&&"undefined"!==typeof b.GetUserData()&&null!==b.GetUserData()&&(a[b.GetUserData()]={x:b.GetPosition().x,y:b.GetPosition().y,angle:b.GetAngle(),center:{x:b.GetWorldCenter().x,y:b.GetWorldCenter().y},linearVelocity:b.m_linearVelocity,angularVelocity:b.m_angularVelocity},this.resolveCollisions))a[b.GetUserData()].collisions=
this.collisions[b.GetUserData()]||null;return a},updateExternalState:function(a){var b=this.getState(),c;for(c in b){var d=a[c];d&&!d.staticBody&&d.update(b[c])}},setBodies:function(a){for(var b in a)this.addBody(a[b]);this.ready=!0},addBody:function(a){if(!a.alreadyScaled)a.scaleShape(1/this.scale),a.scale=this.scale;var c=new j,d=new l,e,n,q,r;d.restitution=a.restitution;d.density=a.density;d.friction=a.friction;if(a.hasOwnProperty("maskBits"))d.filter.maskBits=a.maskBits;if(a.hasOwnProperty("categoryBits"))d.filter.categoryBits=
a.categoryBits;if(a.hasOwnProperty("groupIndex"))d.filter.groupIndex=a.groupIndex;c.type=a.staticBody?g.b2_staticBody:g.b2_dynamicBody;c.position.x=a.x;c.position.y=a.y;c.userData=a.id;c.angle=a.angle;c.linearDamping=a.linearDamping;c.angularDamping=a.angularDamping;var o=this.b2World.CreateBody(c);if(a.radius)d.shape=new i(a.radius),o.CreateFixture(d);else if(a.points){n=[];for(c=0;c<a.points.length;c++)q=new b,q.Set(a.points[c].x,a.points[c].y),n[c]=q;d.shape=new k;d.shape.SetAsArray(n,n.length);
o.CreateFixture(d)}else if(a.polys)for(e=0;e<a.polys.length;e++){n=a.polys[e];r=[];for(c=0;c<n.length;c++)q=new b,q.Set(n[c].x,n[c].y),r[c]=q;d.shape=new k;d.shape.SetAsArray(r,r.length);o.CreateFixture(d)}else d.shape=new k,d.shape.SetAsBox(a.halfWidth,a.halfHeight),o.CreateFixture(d);this.bodiesMap[a.id]=o},setPosition:function(a,c,d){this.bodiesMap[a].SetPosition(new b(c,d))},setAngle:function(a,b){this.bodiesMap[a].SetAngle(b)},setLinearVelocity:function(a,c,d){this.bodiesMap[a].SetLinearVelocity(new b(c,
d))},applyImpulseDegrees:function(a,c,d){a=this.bodiesMap[a];a.ApplyImpulse(new b(Math.sin(c*(Math.PI/180))*d,-1*Math.cos(c*(Math.PI/180))*d),a.GetWorldCenter())},applyForceDegrees:function(a,c,d){a=this.bodiesMap[a];a.ApplyForce(new b(Math.sin(c*(Math.PI/180))*d,-1*Math.cos(c*(Math.PI/180))*d),a.GetWorldCenter())},applyImpulse:function(a,c,d){a=this.bodiesMap[a];a.ApplyImpulse(new b(Math.sin(c)*d,-1*Math.cos(c)*d),a.GetWorldCenter())},applyForce:function(a,c,d){a=this.bodiesMap[a];a.ApplyForce(new b(Math.sin(c)*
d,-1*Math.cos(c)*d),a.GetWorldCenter())},applyTorque:function(a,b){this.bodiesMap[a].ApplyTorque(b)},setGravity:function(a){this.b2World.SetGravity(new b(a.x,a.y))},removeBody:function(a){this.bodiesMap[a]&&(this.fixturesMap[a]&&this.bodiesMap[a].DestroyFixture(this.fixturesMap[a]),this.b2World.DestroyBody(this.bodiesMap[a]),delete this.bodiesMap[a])},wakeUpBody:function(a){this.bodiesMap[a]&&this.bodiesMap[a].SetAwake(!0)},addContactListener:function(a){var b=new Box2D.Dynamics.b2ContactListener;
if(a.beginContact)b.BeginContact=function(b){a.beginContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.EndContact)b.endContact=function(b){a.endContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.postSolve)b.PostSolve=function(b,c){a.postSolve(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData(),c.normalImpulses[0])};this.b2World.SetContactListener(b)},destroyJoint:function(a){this.jointsMap[a]&&
(this.b2World.DestroyJoint(this.jointsMap[a]),delete this.jointsMap[a])},addJoint:function(a){if(a&&a.id&&!this.jointsMap[a.id]){if(!a.alreadyScaled&&a.scaleJointLocation)a.scaleJointLocation(1/this.scale),a.scale=this.scale;var b=a.createB2Joint(this);b&&(this.jointsMap[a.id]=b)}},beginContact:function(){},endContact:function(){},postSolve:function(a,b,c){this.collisions[a]=this.collisions[a]||[];this.collisions[a].push({id:b,impulse:c});this.collisions[b]=this.collisions[b]||[];this.collisions[b].push({id:a,
impulse:c})}})})},"game/createJSON/main":function(){define(["./poly","./circle","./rect"],function(c,d,b){return{polygon:c,circle:d,rectangle:b}})},"game/createJSON/poly":function(){define(["../state","../utils/convexHull","frozen/utils"],function(c,d,b){return function(j){if(j&&2<j.length){var j={points:d(j)},g=b.averagePoints(j.points);j.x=g.x;j.y=g.y;j.points=b.translatePoints(j.points,{x:-j.x,y:-j.y});j.staticBody="static"===c.toolType;j.zone="zone"===c.toolType;j.type="Polygon";return j}}})},
"game/utils/convexHull":function(){define(function(){return function(c){var d,b,j,g,l=[],e=function(a,b){var c;l.push(a);var d=[];c=0;var i=null,g=[],j;for(j in b){var k=b[j],u=(a[0].y-a[1].y)*(k.x-a[0].x)+(a[1].x-a[0].x)*(k.y-a[0].y);0<u&&(g.push(k),u>c&&(c=u,i=k))}return(c=i)?(d=d.concat(e([a[0],c],g)),d=d.concat(e([c,a[1]],g))):[a]},k;for(k in c){var i=c[k];if(i.x>d||!d)j=i,d=i.x;if(i.x<b||!b)g=i,b=i.x}c=[].concat(e([g,j],c),e([j,g],c));d=[];for(b=0;b<c.length;b++)d.push(c[b][0]);d.reverse();return d}})},
"frozen/utils":function(){define("./utils/averagePoints,./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints,./utils/insideCanvas".split(","),function(c,d,b,j,g,l,e,k,i,a){return{averagePoints:c,degreesToRadians:d,radiansToDegrees:b,pointInPolygon:j,distance:g,degreesFromCenter:l,radiansFromCenter:e,scalePoints:k,translatePoints:i,insideCanvas:a}})},"frozen/utils/averagePoints":function(){define(function(){return function(c){var d=
{x:0,y:0};c.forEach(function(b){d.x+=b.x;d.y+=b.y});d.x/=c.length;d.y/=c.length;return d}})},"frozen/utils/degreesToRadians":function(){define(function(){var c=Math.PI/180;return function(d){return d*c}})},"frozen/utils/radiansToDegrees":function(){define(function(){var c=180/Math.PI;return function(d){return d*c}})},"frozen/utils/degreesFromCenter":function(){define(["./radiansToDegrees","./radiansFromCenter"],function(c,d){return function(b,j){return c(d(b,j))}})},"frozen/utils/radiansFromCenter":function(){define(function(){var c=
{x:0,y:0};return function(d,b){d=d||c;return d.x===b.x&&d.y===b.y?0:d.x===b.x?d.y>b.y?0:Math.PI:d.y===b.y?d.x>b.x?1.5*Math.PI:Math.PI/2:d.x<b.x&&d.y>b.y?Math.atan((b.x-d.x)/(d.y-b.y)):d.x<b.x&&d.y<b.y?Math.PI/2+Math.atan((b.y-d.y)/(b.x-d.x)):d.x>b.x&&d.y<b.y?Math.PI+Math.atan((d.x-b.x)/(b.y-d.y)):1.5*Math.PI+Math.atan((d.y-b.y)/(d.x-b.x))}})},"frozen/utils/insideCanvas":function(){define(function(){return function(c,d){return 0>c.x||c.x>d.width||0>c.y||c.y>d.height?!1:!0}})},"game/createJSON/circle":function(){define(["../state",
"frozen/utils"],function(c,d){return function(b){if(b&&2===b.length){var j=d.distance(b[0],b[1]),b={x:b[0].x,y:b[0].y,radius:j};b.staticBody="static"===c.toolType;b.zone="zone"===c.toolType;b.type="Circle";return b}}})},"game/createJSON/rect":function(){define(["../state","../utils/orderRectPts"],function(c,d){return function(b){if(b&&2===b.length)return b=d(b),b={x:(b[1].x-b[0].x)/2+b[0].x,y:(b[1].y-b[0].y)/2+b[0].y,halfWidth:Math.abs((b[1].x-b[0].x)/2)||0.5,halfHeight:Math.abs((b[1].y-b[0].y)/2)||
0.5},b.staticBody="static"===c.toolType,b.zone="zone"===c.toolType,b.type="Rectangle",b}})},"game/utils/orderRectPts":function(){define(function(){return function(c){var d=[],b;c[1].x<c[0].x?(b=c[1],c=c[0]):(b=c[0],c=c[1]);d.push(b);d.push(c);return d}})},"game/utils/insideCanvas":function(){define(function(){return function(c,d){return 0>c.x||c.x>d.width||0>c.y||c.y>d.height?!1:!0}})},"game/draw":function(){define(["./draw/shape","./state","lodash"],function(c,d,b){return function(j){d.backImg?j.drawImage(d.backImg,
0,0,this.canvas.width,d.backImg.height):j.clearRect(0,0,this.canvas.width,this.canvas.height);b.forEach(this.entities,function(b){(!b.staticBody||d.showStatic)&&b.draw(j)},this);if(d.geometries.length)c[d.tool](j,this.inputManager,d.geometries)}})},"game/draw/shape":function(){define(["./poly","./circle","./rect"],function(c,d,b){return{polygon:c,circle:d,rectangle:b}})},"game/draw/poly":function(){define(["lodash","frozen/utils"],function(c,d){return function(b,j,g){b.fillStyle="white";b.strokeStyle=
"black";c.forEach(g,function(c){b.beginPath();b.arc(c.x,c.y,4,0,2*Math.PI,!0);b.closePath();b.fill();b.stroke()});if(1<g.length&&j.mouseAction.position&&4>=d.distance(g[0],j.mouseAction.position))b.strokeStyle="yellow",b.fillStyle="black",b.lineWidth=4,b.beginPath(),b.arc(g[0].x,g[0].y,4,0,2*Math.PI,!0),b.closePath(),b.fill(),b.stroke(),b.lineWidth=1;b.strokeStyle="red";b.beginPath();c.forEach(g,function(c,d){0<d&&(b.moveTo(g[d-1].x,g[d-1].y),b.lineTo(c.x,c.y))});j.mouseAction.position&&(b.moveTo(g[g.length-
1].x,g[g.length-1].y),b.lineTo(j.mouseAction.position.x,j.mouseAction.position.y));b.stroke();b.closePath()}})},"game/draw/circle":function(){define(["frozen/utils"],function(c){return function(d,b,j){b=c.distance(j[0],b.mouseAction.position);d.strokeStyle="red";d.beginPath();d.arc(j[0].x,j[0].y,b,0,2*Math.PI,!0);d.closePath();d.stroke()}})},"game/draw/rect":function(){define(["../utils/orderRectPts"],function(c){return function(d,b,j){b=c([j[0],b.mouseAction.position]);d.strokeStyle="red";d.strokeRect(b[0].x,
b[0].y,b[1].x-b[0].x,b[1].y-b[0].y)}})},"frozen/box2d/BoxGame":function(){define(["../GameCore","./Box","dcl","dcl/bases/Mixer"],function(c,d,b,j){return b([c,j],{box:null,boxUpdating:!0,entities:null,constructor:function(){if(!this.box)this.box=new d;if(!this.entities)this.entities={}},preUpdate:function(b){this.boxUpdating&&(this.box.update(b),this.box.updateExternalState(this.entities))}})})},"frozen/GameCore":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),
function(c,d,b,j,g,l){return c(d,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,setHeight:function(b){this.height=b;this.canvas.height=b},setWidth:function(b){this.width=b;this.canvas.width=b},stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),
this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=j.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.setHeight(this.height||this.canvas.height);this.setWidth(this.width||this.canvas.width);if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new g({canvas:this.canvas,gameArea:j.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new g({canvas:this.canvas});
this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new l;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=
Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||(this.preUpdate(this.elapsedTime),this.update(this.elapsedTime)),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var c=Date.now();this.prevTime=this.currTime=
c;this.loopRunner=b.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},preUpdate:function(){},update:function(){},updateLoadingScreen:function(){},draw:function(b){if("2d"===this.contextType)b.font="14px sans-serif",b.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(b){if(this.resourceManager&&"2d"===this.contextType)b.fillStyle=this.loadingBackground,
b.fillRect(0,0,this.width,this.height),b.fillStyle=this.loadingForeground,b.strokeStyle=this.loadingForeground,b.font="bold "+Math.floor(this.height/12)+"px sans-serif",b.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),b.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),b.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),b.lineWidth=4}})})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,./utils/insideCanvas,dcl,dcl/bases/Mixer,dojo/has,dojo/on,dojo/dom-style,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),
function(c,d,b,j,g,l,e,k,i,a){return j(g,{keyActions:[],mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){this.handleKeys&&(e(document,"keydown",a.hitch(this,"keyDown")),e(document,"keyup",a.hitch(this,"keyReleased")));this.handleMouse&&!l("touch")&&(e(document,"mousedown",a.hitch(this,"mouseDown")),e(document,"mousemove",a.hitch(this,"mouseMove")),e(document,"mouseup",a.hitch(this,"mouseUp")));this.handleTouch&&
l("touch")&&(e(document,"touchstart",a.hitch(this,"touchStart")),e(document,"touchmove",a.hitch(this,"touchMove")),e(document,"touchend",a.hitch(this,"touchEnd")));if(!this.mouseAction)this.mouseAction=new d;if(!this.touchAction)this.touchAction=new d;this.gameArea&&this.canvasPercentage&&(e(window,"resize",a.hitch(this,"resize")),e(window,"orientationchange",a.hitch(this,"resize")))},mapToKey:function(a,b){if(!this.keyActions)this.keyActions=[];this.keyActions[b]=a},addKeyAction:function(a,b){var d=
new c;if(b)d.behavior=d.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(d,a);return d},setMouseAction:function(a){this.mouseAction=a},setTouchAction:function(a){this.touchAction=a},mouseUp:function(a){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},mouseDown:function(a){a=this.getMouseLoc(a);this.mouseAction.endPosition=null;this.mouseAction.insideCanvas=b(a,this.canvas);this.mouseAction.insideCanvas?(this.mouseAction.press(),this.mouseAction.startPosition=a,this.mouseAction.position=
a):this.mouseAction.startPosition=null},mouseMove:function(a){this.mouseAction.position=this.getMouseLoc(a)},touchStart:function(a){a=this.getMouseLoc(a.changedTouches[0]);this.touchAction.endPosition=null;this.touchAction.insideCanvas=b(a,this.canvas);this.touchAction.insideCanvas?(this.touchAction.press(),this.touchAction.startPosition=a,this.touchAction.position=a):this.touchAction.startPosition=null},touchEnd:function(a){this.touchAction.release();this.touchAction.endPosition=this.getMouseLoc(a.changedTouches[0])},
touchMove:function(a){this.touchAction.position=this.getMouseLoc(a.changedTouches[0]);this.touchAction.startPosition&&a.preventDefault()},getKeyAction:function(a){return this.keyActions.length?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyDown:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyReleased:function(a){(a=this.getKeyAction(a))&&a.release()},getMouseLoc:function(a){var b=
i.position(this.canvas);return this.zoomRatio?{x:Math.round((a.clientX-b.x)/this.zoomRatio),y:Math.round((a.clientY-b.y)/this.zoomRatio)}:{x:Math.round(a.clientX-b.x),y:Math.round(a.clientY-b.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var a=this.canvas.width,b=this.canvas.height,c=i.getMarginExtents(document.body),d=window.innerWidth-c.w,c=window.innerHeight-c.h,b=a/b,e="",g="";d/c>b?(d=c*b,e=d+"px"):g=Math.round(d/b)+"px";this.zoomRatio=d/a*this.canvasPercentage;
k.set(this.gameArea,{width:e,height:g});a=Math.floor(100*this.canvasPercentage)+"%";k.set(this.canvas,{width:a,height:a,display:"block",marginLeft:"auto",marginRight:"auto"})}}})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(c,d){return c(d,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},getName:function(){return this.name},
reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(b){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=b,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?
!0:!1},getAmount:function(){var b=this.amount;if(0!==b)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return b}})})},"frozen/MouseAction":function(){define(["dcl","dcl/bases/Mixer","./GameAction"],function(c,d,b){return c([d,b],{startPosition:null,endPosition:null,position:null})})},"dojo/on":function(){define(["require","./_base/kernel","./has"],function(c,d,b){function j(a,
c,d,h,i){if(h=c.match(/(.*):(.*)/))return c=h[2],h=h[1],e.selector(h,c).call(i,a,d);b("touch")&&(k.test(c)&&(d=r(d)),!b("event-orientationchange")&&"orientationchange"==c&&(c="resize",a=window,d=r(d)));m&&(d=m(d));if(a.addEventListener){var g=c in f,j=g?f[c]:c;a.addEventListener(j,d,g);return{remove:function(){a.removeEventListener(j,d,g)}}}c="on"+c;throw Error("Target must be an event emitter");}function g(){this.cancelable=!1}function l(){this.bubbles=!1}c=window.ScriptEngineMajorVersion;b.add("jscript",
c&&c()+ScriptEngineMinorVersion()/10);b.add("event-orientationchange",b("touch")&&!b("android"));b.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var e=function(a,b,c,d){return"function"==typeof a.on&&"function"!=typeof b?a.on(b,c):e.parse(a,b,c,j,d,this)};e.pausable=function(a,b,c,d){var f,a=e(a,b,function(){if(!f)return c.apply(this,arguments)},d);a.pause=function(){f=!0};a.resume=function(){f=!1};return a};e.once=
function(a,b,c){var d=e(a,b,function(){d.remove();return c.apply(this,arguments)});return d};e.parse=function(a,b,c,d,f,h){if(b.call)return b.call(h,a,c);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),e=[],i=0,g;g=b[i++];)e.push(d(a,g,c,f,h));e.remove=function(){for(var a=0;a<e.length;a++)e[a].remove()};return e}return d(a,b,c,f,h)};var k=/^touch/;e.selector=function(a,b,c){return function(f,h){function i(b){for(g=g&&g.matches?g:d.query;!g.matches(b,a,f);)if(b==f||!1===c||!(b=b.parentNode)||1!=
b.nodeType)return;return b}var g="function"==typeof a?{matches:a}:this,j=b.bubble;return j?e(f,j(i),h):e(f,b,function(a){var b=i(a.target);return b&&h.call(b,a)})}};var i=[].slice,a=e.emit=function(a,b,c){var d=i.call(arguments,2),f="on"+b;if("parentNode"in a){var h=d[0]={},e;for(e in c)h[e]=c[e];h.preventDefault=g;h.stopPropagation=l;h.target=a;h.type=b;c=h}do a[f]&&a[f].apply(a,d);while(c&&c.bubbles&&(a=a.parentNode));return c&&c.cancelable&&c},f={};if(!b("event-stopimmediatepropagation"))var h=
function(){this.modified=this.immediatelyStopped=!0},m=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=h,a.apply(this,arguments)}};f={focusin:"focus",focusout:"blur"};e.emit=function(b,c,d){if(b.dispatchEvent&&document.createEvent){var f=b.ownerDocument.createEvent("HTMLEvents");f.initEvent(c,!!d.bubbles,!!d.cancelable);for(var h in d)h in f||(f[h]=d[h]);return b.dispatchEvent(f)&&f}return a.apply(e,arguments)};if(b("touch"))var n=function(){},q=window.orientation,
r=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(f){}b.type?(n.prototype=b,c=new n,c.preventDefault=function(){b.preventDefault()},c.stopPropagation=function(){b.stopPropagation()}):(c=b,c.type=d);b.corrected=c;if("resize"==d){if(q==window.orientation)return null;q=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],h;for(h in d)delete c[h],c[h]=d[h]}return a.call(this,
c)}};return e})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(c,d){function b(b,d,h){d=d.toLowerCase();if(c("ie")){if("auto"==h){if("height"==d)return b.offsetHeight;if("width"==d)return b.offsetWidth}if("fontweight"==d)switch(h){case 700:return"bold";default:return"normal"}}d in a||(a[d]=f.test(d));return a[d]?l(b,h):h}var j,g={};j=c("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);if(!b&&a.style)a.style.display=
"",b=c.getComputedStyle(a,null)}return b||{}}:c("ie")&&(9>c("ie")||c("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};g.getComputedStyle=j;var l;l=c("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,f=c.left,h=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(e){b=0}c.left=
f;d.left=h;return b}:function(a,b){return parseFloat(b)||0};g.toPixelValue=l;var e=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},k=9>c("ie")||10>c("ie")&&c("quirks")?function(a){try{return e(a).Opacity/100}catch(b){return 1}}:function(a){return j(a).opacity},i=9>c("ie")||10>c("ie")&&c("quirks")?function(a,b){var c=100*b,d=1==b;a.style.zoom=d?"":1;if(e(a))e(a,1).Opacity=c;else{if(d)return b;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+
c+")"}e(a,1).Enabled=!d;if("tr"==a.tagName.toLowerCase())for(c=a.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&i(c,b);return b}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},f=/margin|padding|width|height|max|min|offset/,h=c("ie")?"styleFloat":"cssFloat",m={cssFloat:h,styleFloat:h,"float":h};g.get=function(a,c){var f=d.byId(a),h=arguments.length;if(2==h&&"opacity"==c)return k(f);var c=m[c]||c,e=g.getComputedStyle(f);return 1==h?e:b(f,c,e[c]||f.style[c])};g.set=function(a,
b,c){var f=d.byId(a),h=arguments.length,e="opacity"==b,b=m[b]||b;if(3==h)return e?i(f,c):f.style[b]=c;for(var j in b)g.set(a,j,b[j]);return g.getComputedStyle(f)};return g})},"dojo/dom-geometry":function(){define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(c,d,b,j){function g(a,b,c,d,e,i){i=i||"px";a=a.style;if(!isNaN(b))a.left=b+i;if(!isNaN(c))a.top=c+i;if(0<=d)a.width=d+i;if(0<=e)a.height=e+i}function l(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&
"button"==(a.getAttribute("type")||"").toLowerCase()}function e(a){return"border-box"==k.boxModel||"table"==a.tagName.toLowerCase()||l(a)}var k={boxModel:"content-box"};if(c("ie"))k.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";k.getPadExtents=function(a,c){var a=b.byId(a),d=c||j.getComputedStyle(a),e=j.toPixelValue,i=e(a,d.paddingLeft),g=e(a,d.paddingTop),k=e(a,d.paddingRight),d=e(a,d.paddingBottom);return{l:i,t:g,r:k,b:d,w:i+k,h:g+d}};k.getBorderExtents=function(a,c){var a=
b.byId(a),d=j.toPixelValue,e=c||j.getComputedStyle(a),i="none"!=e.borderLeftStyle?d(a,e.borderLeftWidth):0,g="none"!=e.borderTopStyle?d(a,e.borderTopWidth):0,k="none"!=e.borderRightStyle?d(a,e.borderRightWidth):0,d="none"!=e.borderBottomStyle?d(a,e.borderBottomWidth):0;return{l:i,t:g,r:k,b:d,w:i+k,h:g+d}};k.getPadBorderExtents=function(a,c){var a=b.byId(a),d=c||j.getComputedStyle(a),e=k.getPadExtents(a,d),d=k.getBorderExtents(a,d);return{l:e.l+d.l,t:e.t+d.t,r:e.r+d.r,b:e.b+d.b,w:e.w+d.w,h:e.h+d.h}};
k.getMarginExtents=function(a,c){var a=b.byId(a),d=c||j.getComputedStyle(a),e=j.toPixelValue,i=e(a,d.marginLeft),g=e(a,d.marginTop),k=e(a,d.marginRight),d=e(a,d.marginBottom);return{l:i,t:g,r:k,b:d,w:i+k,h:g+d}};k.getMarginBox=function(a,d){var a=b.byId(a),e=d||j.getComputedStyle(a),i=k.getMarginExtents(a,e),g=a.offsetLeft-i.l,l=a.offsetTop-i.t,r=a.parentNode,o=j.toPixelValue;if(c("mozilla")){var u=parseFloat(e.left),e=parseFloat(e.top);!isNaN(u)&&!isNaN(e)?(g=u,l=e):r&&r.style&&(r=j.getComputedStyle(r),
"visible"!=r.overflow&&(g+="none"!=r.borderLeftStyle?o(a,r.borderLeftWidth):0,l+="none"!=r.borderTopStyle?o(a,r.borderTopWidth):0))}else if((c("opera")||8==c("ie")&&!c("quirks"))&&r)r=j.getComputedStyle(r),g-="none"!=r.borderLeftStyle?o(a,r.borderLeftWidth):0,l-="none"!=r.borderTopStyle?o(a,r.borderTopWidth):0;return{l:g,t:l,w:a.offsetWidth+i.w,h:a.offsetHeight+i.h}};k.getContentBox=function(a,d){var a=b.byId(a),e=d||j.getComputedStyle(a),i=a.clientWidth,g=k.getPadExtents(a,e),l=k.getBorderExtents(a,
e);i?(e=a.clientHeight,l.w=l.h=0):(i=a.offsetWidth,e=a.offsetHeight);c("opera")&&(g.l+=l.l,g.t+=l.t);return{l:g.l,t:g.t,w:i-g.w-l.w,h:e-g.h-l.h}};k.setContentSize=function(a,c,d){var a=b.byId(a),i=c.w,c=c.h;e(a)&&(d=k.getPadBorderExtents(a,d),0<=i&&(i+=d.w),0<=c&&(c+=d.h));g(a,NaN,NaN,i,c)};var i={l:0,t:0,w:0,h:0};k.setMarginBox=function(a,d,h){var a=b.byId(a),m=h||j.getComputedStyle(a),h=d.w,n=d.h,q=e(a)?i:k.getPadBorderExtents(a,m),m=k.getMarginExtents(a,m);if(c("webkit")&&l(a)){var r=a.style;if(0<=
h&&!r.width)r.width="4px";if(0<=n&&!r.height)r.height="4px"}0<=h&&(h=Math.max(h-q.w-m.w,0));0<=n&&(n=Math.max(n-q.h-m.h,0));g(a,d.l,d.t,h,n)};k.isBodyLtr=function(a){a=a||d.doc;return"ltr"==(d.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};k.docScroll=function(a){var a=a||d.doc,b=d.doc.parentWindow||d.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=c("quirks")?d.body(a):a.documentElement)&&{x:k.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};if(c("ie"))k.getIeDocumentElementOffset=
function(a){a=a||d.doc;a=a.documentElement;if(8>c("ie")){var b=a.getBoundingClientRect(),e=b.left,b=b.top;7>c("ie")&&(e+=a.clientLeft,b+=a.clientTop);return{x:0>e?0:e,y:0>b?0:b}}return{x:0,y:0}};k.fixIeBiDiScrollLeft=function(a,b){var b=b||d.doc,e=c("ie");if(e&&!k.isBodyLtr(b)){var i=c("quirks"),g=i?d.body(b):b.documentElement,j=d.global;6==e&&!i&&j.frameElement&&g.scrollHeight>g.clientHeight&&(a+=g.clientLeft);return 8>e||i?a+g.clientWidth-g.scrollWidth:-a}return a};k.position=function(a,e){var a=
b.byId(a),i=d.body(a.ownerDocument),g=a.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};if(9>c("ie")){var j=k.getIeDocumentElementOffset(a.ownerDocument);g.x-=j.x+(c("quirks")?i.clientLeft+i.offsetLeft:0);g.y-=j.y+(c("quirks")?i.clientTop+i.offsetTop:0)}e&&(i=k.docScroll(a.ownerDocument),g.x+=i.x,g.y+=i.y);return g};k.getMarginSize=function(a,c){var a=b.byId(a),d=k.getMarginExtents(a,c||j.getComputedStyle(a)),e=a.getBoundingClientRect();return{w:e.right-e.left+d.w,h:e.bottom-
e.top+d.h}};k.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=a.offsetY};return k})},"frozen/ResourceManager":function(){define(["./sounds/Sound!","dcl","dcl/bases/Mixer","dojo/_base/lang","dojo/on"],function(c,d,b,j,g){function l(b,c){var d=c;b&&(d=[b,c].join("/"));return d.replace(/\/{2,}/g,"/")}return d(b,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundDir:null,resourceList:{},loadImage:function(b){var c=!1;if(!Array.isArray(b))if("string"===typeof b)c=!0,
b=[b];else if("object"!==typeof b)return;for(var d in b)if(b.hasOwnProperty(d)){var a=l(this.imageDir,b[d]);if(this.resourceList[a])b[d]=this.resourceList[a].img;else{this.allLoaded=!1;var f=new Image,h={name:a,img:f,complete:!1},m=j.partial(function(a){a.complete=!0},h);g(f,"load",m);f.src=a;this.resourceList[a]=h;b[d]=f}}return c?b[0]:b},loadSound:function(b){var d=!1;if(!Array.isArray(b))if("string"===typeof b)d=!0,b=[b];else if("object"!==typeof b)return;for(var g in b)if(b.hasOwnProperty(g)){var a=
l(this.soundDir,b[g]);if(this.resourceList[a])b[g]=this.resourceList[a];else{this.allLoaded=!1;var f=new c(a);this.resourceList[a]=f;b[g]=f}}return d?b[0]:b},playSound:function(b,c,d,a){b&&(c?b.loop(a):b.play(a,d||0))},resourcesReady:function(){if(!this.allLoaded){for(var b in this.resourceList)if(!this.resourceList[b].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){var b=0,c=0,d;for(d in this.resourceList){var a=this.resourceList[d];c++;a.complete&&(b+=1)}return 0===c?
0:Math.round(100*(b/c))}})})},"frozen/sounds/Sound":function(){define(["require","dojo/has","../shims/AudioContext"],function(c,d){d.add("WebAudio",function(b){return!!b.AudioContext});return{load:function(b,j,g){c([d("WebAudio")?"./WebAudio":"./HTML5Audio"],function(b){g(b)})}}})},"frozen/shims/AudioContext":function(){define(function(){for(var c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.AudioContext;++d)window.AudioContext=window[c[d]+"AudioContext"]})},"frozen/shims/RAF":function(){define(function(){for(var c=
0,d=["ms","moz","webkit","o"],b=0;b<d.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[d[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[b]+"CancelAnimationFrame"]||window[d[b]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(b){var d=(new Date).getTime(),l=Math.max(0,16-(d-c)),e=window.setTimeout(function(){b(d+l)},l);c=d+l;return e};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(b){clearTimeout(b)}})},
"game/ui/CanvasDND":function(){define(["../state","../createBodies","./DNDFileController","dcl"],function(c,d,b,j){return j([b],{id:"canvas",drop:function(b){try{var j=b.dataTransfer.files;if(j&&1===j.length&&j[0].type.match(/image.*/)){var e=j[0],k=new FileReader;k.onerror=function(){};k.onload=function(a){if(a.target.readyState===FileReader.DONE){var b=new Image;b.onload=function(){c.game.stop();c.backImg=b;c.game.setHeight(b.height);c.game.setWidth(b.width);d();c.game.run()};b.src=a.target.result}};
k.readAsDataURL(e);this.dragleave(b)}}catch(i){}}})})},"game/ui/DNDFileController":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/on,dojo/dom,dojo/domReady!".split(","),function(c,d,b,j,g){return c([d],{node:null,borderStyle:null,borderDropStyle:"3px dashed red",constructor:function(){if(!this.node)this.node=g.byId(this.id);j(this.node,"dragenter",b.hitch(this,"dragenter"));j(this.node,"dragover",b.hitch(this,"dragover"));j(this.node,"dragleave",b.hitch(this,"dragleave"));j(this.node,
"drop",b.hitch(this,"drop"));this.borderStyle=this.node.style.border},dragenter:function(b){b.stopPropagation();b.preventDefault();this.node.style.border=this.borderDropStyle},dragover:function(b){b.stopPropagation();b.preventDefault()},dragleave:function(b){b.stopPropagation();b.preventDefault();this.node.style.border=this.borderStyle},preDrop:function(b){this.node.style.border=this.borderStyle;b.stopPropagation();b.preventDefault();this.drop(b)},drop:function(b){var c=function(){},d=function(){return function(){}};
try{for(var g=b.dataTransfer.files,b=0;b<g.length;b++){var a=new FileReader;a.onerror=c;a.onload=d(g[b]);a.readAsDataURL(g[b])}return!1}catch(f){}}})})},"game/ui/events":function(){define("../state,../createBodies,./toggleRedo,lodash,dojo/on,dojo/dom,dojo/query,dojo/request".split(","),function(c,d,b,j,g,l,e,k){g(document,"#toolForm:change",function(b){c.geometries=[];if("tool"===b.target.name)c.tool=b.target.value;if("toolType"===b.target.name)c.toolType=b.target.value});g(document,"#load:click",
function(){try{var b=JSON.parse(c.codeMirror.getValue());c.entities=b.entities||b.objs;if(b.joints)c.joints=b.joints;if(b.backImg)c.backImg=new Image,c.backImg.src=b.backImg;c.game.setHeight(b.canvas.height);c.game.setWidth(b.canvas.width);d()}catch(a){}});g(document,"#save:click",function(){var b=l.byId("saved-gist"),a="";try{a=JSON.stringify({"public":!0,files:{"world.json":{content:c.codeMirror.getValue()}}})}catch(d){}k.post("https://api.github.com/gists",{method:"POST",data:a}).then(function(a){a=
JSON.parse(a);b.innerHTML='Data Saved: <a href="'+a.html_url+'">'+a.html_url+"</a>"},function(){b.innerHTML='<span class="error">Error Saving Data - Please Try Again</span>'})});g(document,"#undoBtn:click",function(){c.entities.length&&(c.undoObjs.push(c.entities.pop()),d());b()});g(document,"#redoBtn:click",function(){c.undoObjs.length&&(c.entities.push(c.undoObjs.pop()),d());b()});g(document,".gravity:change",j.debounce(d,500));g(document,"#runSimulation:change",function(b){c.game.boxUpdating=b.target.checked});
g(document,"#showStatic:change",function(b){c.showStatic=b.target.checked});g(document,"selectstart",function(b){b.preventDefault()})})},"game/ui/toggleRedo":function(){define(["../state","dojo/dom"],function(c,d){var b=d.byId("redoBtn");return function(){b.disabled=c.undoObjs.length?!1:!0}})},"dojo/query":function(){define("dojo/query","./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),function(c,d,b,j,g,l,e,k){function i(a,c){var d=
function(d,e){if("string"==typeof e&&(e=b.byId(e),!e))return new c([]);var f="string"==typeof d?a(d,e):d?d.orphan?d:[d]:[];return f.orphan?f:new c(f)};d.matches=a.match||function(a,b,c){return 0<d.filter([a],b,c).length};d.filter=a.filter||function(a,b,c){return d(b,c).filter(function(b){return-1<g.indexOf(a,b)})};if("function"!=typeof a)var e=a.search,a=function(a,b){return e(b||document,a)};return d}d.add("array-extensible",function(){return 1==l.delegate([],{length:1}).length&&!d("bug-for-in-skips-shadowed")});
var a=Array.prototype,f=a.slice,h=a.concat,m=g.forEach,n=function(a,b,d){b=[0].concat(f.call(b,0));d=d||c.global;return function(c){b[0]=c;return a.apply(d,b)}},q=function(a){var b=this instanceof r&&d("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var e=b?this:[],f=e.length=c.length,g=0;g<f;g++)e[g]=c[g];if(b)return e;c=e}l._mixin(c,o);c._NodeListCtor=function(a){return r(a)};return c},r=q,o=r.prototype=d("array-extensible")?[]:{};r._wrap=
o._wrap=function(a,b,c){a=new (c||this._NodeListCtor||r)(a);return b?a._stash(b):a};r._adaptAsMap=function(a,b){return function(){return this.map(n(a,arguments,b))}};r._adaptAsForEach=function(a,b){return function(){this.forEach(n(a,arguments,b));return this}};r._adaptAsFilter=function(a,b){return function(){return this.filter(n(a,arguments,b))}};r._adaptWithCondition=function(a,b,d){return function(){var e=arguments,f=n(a,e,d);if(b.call(d||c.global,e))return this.map(f);this.forEach(f);return this}};
m(["slice","splice"],function(b){var c=a[b];o[b]=function(){return this._wrap(c.apply(this,arguments),"slice"==b?this:null)}});m(["indexOf","lastIndexOf","every","some"],function(a){var b=g[a];o[a]=function(){return b.apply(c,[this].concat(f.call(arguments,0)))}});l.extend(q,{constructor:r,_NodeListCtor:r,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return j(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};
return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=f.call(this,0),c=g.map(arguments,function(a){return f.call(a,0)});return this._wrap(h.apply(b,c),this)},map:function(a,b){return this._wrap(g.map(this,a,b),this)},forEach:function(a,b){m(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=u._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(g.filter(c,b[d],b[d+1]),
this)},instantiate:function(a,b){var c=l.isFunction(a)?a:l.getObject(a),b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);m(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var u=i(k,q);c.query=i(k,function(a){return q(a)});u.load=function(a,b,c){e.load(a,b,function(a){c(i(a,q))})};c._filterQueryResult=u._filterResult=function(a,b,c){return new q(u.filter(a,b,c))};c.NodeList=u.NodeList=q;return u})},
"dojo/selector/_loader":function(){define(["../has","require"],function(c,d){var b=document.createElement("div");c.add("dom-qsa2.1",!!b.querySelectorAll);c.add("dom-qsa3",function(){try{return b.innerHTML="<p class='TEST'></p>",1==b.querySelectorAll(".TEST:empty").length}catch(c){}});var j;return{load:function(b,l,e){var k=d,b="default"==b?c("config-selectorEngine")||"css3":b,b="css2"==b||"lite"==b?"./lite":"css2.1"==b?c("dom-qsa2.1")?"./lite":"./acme":"css3"==b?c("dom-qsa3")?"./lite":"./acme":"acme"==
b?"./acme":(k=l)&&b;if("?"==b.charAt(b.length-1))var b=b.substring(0,b.length-1),i=!0;if(i&&(c("dom-compliant-qsa")||j))return e(j);k([b],function(a){"./lite"!=b&&(j=a);e(a)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(c,d,b,j,g){var l=j.trim,e=b.forEach,k="BackCompat"==g.doc.compatMode,i=!1,a=function(){return!0},f=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",b=function(b,c){return l(a.slice(b,
c))},c=[],d=-1,e=-1,f=-1,g=-1,h=-1,j=-1,k=-1,m,o="",n="",r,q=0,u=a.length,p=null,s=null,t=function(){if(0<=j)p.id=b(j,q).replace(/\\/g,""),j=-1;if(0<=k){var a=k==q?null:b(k,q);p[0>">~+".indexOf(a)?"tag":"oper"]=a;k=-1}0<=h&&(p.classes.push(b(h+1,q).replace(/\\/g,"")),h=-1)};o=n,n=a.charAt(q),q<u;q++)if("\\"!=o)if(p||(r=q,p={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return i?this.otag:this.tag}},k=q),m)n==m&&(m=null);else if("'"==n||'"'==n)m=n;else if(0<=
d)if("]"==n){s.attr?s.matchFor=b(f||d+1,q):s.attr=b(d+1,q);if((d=s.matchFor)&&('"'==d.charAt(0)||"'"==d.charAt(0)))s.matchFor=d.slice(1,-1);if(s.matchFor)s.matchFor=s.matchFor.replace(/\\/g,"");p.attrs.push(s);s=null;d=f=-1}else{if("="==n)f=0<="|~^$*".indexOf(o)?o:"",s.type=f+n,s.attr=b(d+1,q-f.length),f=q+1}else if(0<=e){if(")"==n){if(0<=g)s.value=b(e+1,q);g=e=-1}}else if("#"==n)t(),j=q+1;else if("."==n)t(),h=q;else if(":"==n)t(),g=q;else if("["==n)t(),d=q,s={};else if("("==n)0<=g&&(s={name:b(g+
1,q),value:null},p.pseudos.push(s)),e=q;else if(" "==n&&o!=n){t();0<=g&&p.pseudos.push({name:b(g+1,q)});p.loops=p.pseudos.length||p.attrs.length||p.classes.length;p.oquery=p.query=b(r,q);p.otag=p.tag=p.oper?null:p.tag||"*";if(p.tag)p.tag=p.tag.toUpperCase();if(c.length&&c[c.length-1].oper)p.infixOper=c.pop(),p.query=p.infixOper.query+" "+p.query;c.push(p);p=null}return c},h=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},m=function(a,b){var c=
b||[];a&&c.push(a);return c},n=function(a){return 1==a.nodeType},q=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(i?a.getAttribute(b):a.getAttribute(b,2))||""},r={"*=":function(a,b){return function(c){return 0<=q(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==q(c,a).indexOf(b)}},"$=":function(a,b){return function(c){var c=" "+q(c,a),d=c.lastIndexOf(b);return-1<d&&d==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";
return function(b){return 0<=(" "+q(b,a)+" ").indexOf(c)}},"|=":function(a,b){var c=b+"-";return function(d){d=q(d,a);return d==b||0==d.indexOf(c)}},"=":function(a,b){return function(c){return q(c,a)==b}}},o="undefined"==typeof g.doc.firstChild.nextElementSibling,u=!o?"nextElementSibling":"nextSibling",w=!o?"previousElementSibling":"previousSibling",I=o?n:a,s=function(a){for(;a=a[w];)if(I(a))return!1;return!0},p=function(a){for(;a=a[u];)if(I(a))return!1;return!0},t=function(a){var b=a.parentNode,
b=7!=b.nodeType?b:b.nextSibling,c=0,e=b.children||b.childNodes,f=a._i||a.getAttribute("_i")||-1,g=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!e)return-1;e=e.length;if(g==e&&0<=f&&0<=g)return f;d("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",e):b._l=e;f=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[u])if(I(b))d("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(f=c);return f},y=function(a){return!(t(a)%2)},x=function(a){return t(a)%2},v={checked:function(){return function(a){return!!("checked"in
a?a.checked:a.selected)}},disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return s},"last-child":function(){return p},"only-child":function(){return function(a){return s(a)&&p(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=
a.innerHTML.indexOf(b)}},not:function(a,b){var c=f(b)[0],d={el:1};if("*"!=c.tag)d.tag=1;if(!c.classes.length)d.classes=1;var e=z(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return x;if("even"==b)return y;if(-1!=b.indexOf("n")){var d=b.split("n",2),e=d[0]?"-"==d[0]?-1:c(d[0]):1,f=d[1]?c(d[1]):0,g=0,h=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(g=f-f%e),f%=e):0>e&&(e*=-1,0<f&&(h=f,f%=e));if(0<e)return function(a){a=t(a);return a>=g&&(0>h||a<=h)&&a%e==f};b=f}var i=
c(b);return function(a){return t(a)==i}}},F=9>d("ie")||9==d("ie")&&d("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return i?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},z=function(b,c){if(!b)return a;var c=c||{},d=null;"el"in c||(d=h(d,n));"tag"in c||"*"!=b.tag&&(d=h(d,function(a){return a&&(i?a.tagName:a.tagName.toUpperCase())==b.getTag()}));"classes"in c||e(b.classes,function(a,b){var c=RegExp("(?:^|\\s)"+
a+"(?:\\s|$)");d=h(d,function(a){return c.test(a.className)});d.count=b});"pseudos"in c||e(b.pseudos,function(a){var b=a.name;v[b]&&(d=h(d,v[b](b,a.value)))});"attrs"in c||e(b.attrs,function(a){var b,c=a.attr;a.type&&r[a.type]?b=r[a.type](c,a.matchFor):c.length&&(b=F(c));b&&(d=h(d,b))});"id"in c||b.id&&(d=h(d,function(a){return!!a&&a.id==b.id}));d||"default"in c||(d=a);return d},ia=function(a){return function(b,c,d){for(;b=b[u];)if(!o||n(b)){(!d||M(b,d))&&a(b)&&c.push(b);break}return c}},Z=function(a){return function(b,
c,d){for(b=b[u];b;){if(I(b)){if(d&&!M(b,d))break;a(b)&&c.push(b)}b=b[u]}return c}},ja=function(b){b=b||a;return function(a,c,d){for(var e=0,f=a.children||a.childNodes;a=f[e++];)I(a)&&(!d||M(a,d))&&b(a,e)&&c.push(a);return c}},C={},L=function(b){var d=C[b.query];if(d)return d;var e=b.infixOper,e=e?e.oper:"",f=z(b,{el:1}),h="*"==b.tag,i=g.doc.getElementsByClassName;if(e){i={el:1};if(h)i.tag=1;f=z(b,i);"+"==e?d=ia(f):"~"==e?d=Z(f):">"==e&&(d=ja(f))}else if(b.id)f=!b.loops&&h?a:z(b,{el:1,id:1}),d=function(a,
d){var e=c.byId(b.id,a.ownerDocument||a);if(e&&f(e)){if(9==a.nodeType)return m(e,d);for(var g=e.parentNode;g&&!(g==a);)g=g.parentNode;if(g)return m(e,d)}};else if(i&&/\{\s*\[native code\]\s*\}/.test(""+i)&&b.classes.length&&!k)var f=z(b,{el:1,classes:1,id:1}),j=b.classes.join(" "),d=function(a,b,c){for(var b=m(0,b),d,e=0,g=a.getElementsByClassName(j);d=g[e++];)f(d,a)&&M(d,c)&&b.push(d);return b};else!h&&!b.loops?d=function(a,c,d){for(var c=m(0,c),e=0,f=b.getTag(),f=f?a.getElementsByTagName(f):[];a=
f[e++];)M(a,d)&&c.push(a);return c}:(f=z(b,{el:1,tag:1,id:1}),d=function(a,c,d){for(var c=m(0,c),e,g=0,h=(e=b.getTag())?a.getElementsByTagName(e):[];e=h[g++];)f(e,a)&&M(e,d)&&c.push(e);return c});return C[b.query]=d},A={},W={},Q=function(a){var b=f(l(a));if(1==b.length){var c=L(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=m(a),c,d,e=b.length,f,g,h=0;h<e;h++){g=[];c=b[h];d=a.length-1;if(0<d)f={},g.nozip=!0;d=L(c);for(var i=0;c=a[i];i++)d(c,g,f);if(!g.length)break;
a=g}return g}},$=d("ie")?"commentStrip":"nozip",U=!!g.doc.querySelectorAll,qa=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,N=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},ka=/([^[]*)([^\]]*])?/g,ra=function(a,b,c){return b.replace(qa,N)+(c||"")},R=function(a,b){a=a.replace(ka,ra);if(U){var c=W[a];if(c&&!b)return c}if(c=A[a])return c;var c=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(b=!0);if(U&&!b&&-1==">~+".indexOf(c)&&(!d("ie")||-1==a.indexOf(":"))&&!(k&&0<=a.indexOf("."))&&
-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return W[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(f);c[$]=!0;return c}catch(d){return R(a,!0)(b)}}}var g=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return A[a]=2>g.length?Q(a):function(a){for(var b=0,c=[],d;d=g[b++];)c=c.concat(Q(d)(a));return c}},D=0,ga=d("ie")?function(a){return i?a.getAttribute("_uid")||a.setAttribute("_uid",
++D)||D:a.uniqueID}:function(a){return a._uid||(a._uid=++D)},M=function(a,b){if(!b)return 1;var c=ga(a);return!b[c]?b[c]=1:0},K=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;D++;var c,e;if(d("ie")&&i){var f=D+"";a[0].setAttribute("_zipIdx",f);for(c=1;e=a[c];c++)a[c].getAttribute("_zipIdx")!=f&&b.push(e),e.setAttribute("_zipIdx",f)}else if(d("ie")&&a.commentStrip)try{for(c=1;e=a[c];c++)n(e)&&b.push(e)}catch(g){}else{a[0]&&(a[0]._zipIdx=
D);for(c=1;e=a[c];c++)a[c]._zipIdx!=D&&b.push(e),e._zipIdx=D}return b},T=function(a,b){b=b||g.doc;i="div"===(b.ownerDocument||b).createElement("div").tagName;var c=R(a)(b);return c&&c.nozip?c:K(c)};T.filter=function(a,d,e){for(var g=[],h=f(d),h=1==h.length&&!/[^\w#\.]/.test(d)?z(h[0]):function(a){return-1!=b.indexOf(T(d,c.byId(e)),a)},i=0,j;j=a[i];i++)h(j)&&g.push(j);return g};return T})},"dojo/request":function(){define(["./request/default!"],function(c){return c})},"dojo/request/default":function(){define(["exports",
"require","../has"],function(c,d,b){var j=b("config-requestProvider");j||(j="./xhr");c.getPlatformDefaultId=function(){return"./xhr"};c.load=function(b,c,e){d(["platform"==b?"./xhr":j],function(b){e(b)})}})},"frozen/sounds/WebAudio":function(){define(["dcl","dojo/on","dojo/_base/lang"],function(c,d,b){var j=null;window.AudioContext&&(j=new window.AudioContext);return c(null,{declaredClass:"frozen/sounds/WebAudio",name:null,complete:!1,audioContext:j,buffer:null,constructor:function(b){"string"===
typeof b&&this.load(b)},load:function(c){this.name=c;var j=b.partial(function(b){b.audioContext.decodeAudioData(this.response,function(c){b.buffer=c;b.complete=!0},function(){})},this),e=new XMLHttpRequest;e.open("GET",c,!0);e.responseType="arraybuffer";d(e,"load",j);e.send()},loop:function(b){this._initAudio(b,!0).noteOn(0)},play:function(b,c){this._initAudio(b,!1).noteOn(c||0)},_initAudio:function(b,c){var c="boolean"===typeof c?c:!1,d=this.audioContext.createBufferSource();d.buffer=this.buffer;
d.loop=c;if(b){var j=this.audioContext.createGainNode();j.gain.value=b;d.connect(j);j.connect(this.audioContext.destination)}else d.connect(this.audioContext.destination);return d}})})},"frozen/sounds/HTML5Audio":function(){define(["dcl","dojo/on","dojo/_base/lang"],function(c,d,b){return c(null,{declaredClass:"frozen/sounds/HTML5Audio",name:null,complete:!1,audio:null,constructor:function(b){this.audio=new Audio;"string"===typeof b&&this.load(b)},load:function(c){this.name=c;this.audio.pause();this.audio.preload=
"auto";this.audio.src=c;d(this.audio,"loadeddata",b.hitch(this,function(){this.complete=!0}))},loop:function(b){var c=this._initAudio(b,!0);d(c,"loadeddata",function(){c.play()})},play:function(b,c){var c=c||0,l=this._initAudio(b,!1);d(l,"loadeddata",function(){l.currentTime=c/1E3;l.play()})},_initAudio:function(b,c){var c="boolean"===typeof c?c:!1,d=new Audio;d.pause();d.volume=b||1;d.loop=c;d.preload="auto";d.mozLoadFrom?d.mozLoadFrom(this.audio):d.src=this.name;return d}})})},"frozen/plugins/loadImage":function(){define(["../ResourceManager",
"../utils/parseString"],function(c,d){var b=new c;return{load:function(c,g,l){c=d(c);c=b.loadImage(c);l(c)}}})},"frozen/utils/parseString":function(){define(function(){return function(c){0===c.indexOf("{")&&c.lastIndexOf("}")===c.length-1?c=JSON.parse(c.replace(/,/g,'","').replace(/:/g,'":"').replace(/\{/,'{"').replace(/\}/,'"}')):0===c.indexOf("[")&&c.lastIndexOf("]")===c.length-1&&(c=JSON.parse(c.replace(/,/g,'","').replace(/\[/g,'["').replace(/\]/g,'"]')));return c}})},"frozen/plugins/loadSound":function(){define(["../ResourceManager",
"../utils/parseString"],function(c,d){var b=new c;return{load:function(c,g,l){c=d(c);c=b.loadSound(c);l(c)}}})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(c,d,b,j,g){function l(a,d){var e=a.xhr;a.status=a.xhr.status;a.text=e.responseText;if("xml"===a.options.handleAs)a.data=e.responseXML;if(!d)try{b(a)}catch(f){d=f}d?this.reject(d):j.checkStatus(e.status)?this.resolve(a):(d=new c("Unable to load "+a.url+" status: "+e.status,a),
this.reject(d))}function e(b,n,q){var w=j.parseArgs(b,j.deepCreate(m,n),g("native-formdata")&&n&&n.data&&n.data instanceof FormData),b=w.url,n=w.options,I,s=j.deferred(w,f,k,i,l,function(){I&&I()}),p=w.xhr=e._create();if(!p)return s.cancel(new c("XHR was not created")),q?s:s.promise;w.getHeader=function(a){return this.xhr.getResponseHeader(a)};a&&(I=a(p,s,w));var t=n.data,y=!n.sync,x=n.method;try{p.open(x,b,y,n.user||h,n.password||h);if(n.withCredentials)p.withCredentials=n.withCredentials;var v=
n.headers,F;if(v)for(var z in v)"content-type"===z.toLowerCase()?F=v[z]:v[z]&&p.setRequestHeader(z,v[z]);F&&!1!==F&&p.setRequestHeader("Content-Type",F);(!v||!("X-Requested-With"in v))&&p.setRequestHeader("X-Requested-With","XMLHttpRequest");j.notify&&j.notify.emit("send",w,s.promise.cancel);p.send(t)}catch(ia){s.reject(ia)}d(s);p=null;return q?s:s.promise}g.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});g.add("dojo-force-activex-xhr",function(){return g("activex")&&!document.addEventListener&&
"file:"===window.location.protocol});g.add("native-xhr2",function(){if(g("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});g.add("native-formdata",function(){return"function"===typeof FormData});var k,i,a,f;g("native-xhr2")?(k=function(){return!this.isFulfilled()},f=function(a,b){b.xhr.abort()},a=function(a,b,d){function e(){b.handleResponse(d)}function f(a){a=new c("Unable to load "+d.url+" status: "+
a.target.status,d);b.handleResponse(d,a)}function h(a){if(a.lengthComputable)d.loaded=a.loaded,d.total=a.total,b.progress(d)}a.addEventListener("load",e,!1);a.addEventListener("error",f,!1);a.addEventListener("progress",h,!1);return function(){a.removeEventListener("load",e,!1);a.removeEventListener("error",f,!1);a.removeEventListener("progress",h,!1)}}):(k=function(a){return a.xhr.readyState},i=function(a){return 4===a.xhr.readyState},f=function(a,b){var c=b.xhr,d=typeof c.abort;("function"===d||
"object"===d||"unknown"===d)&&c.abort()});var h,m={data:null,query:null,sync:!1,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};e._create=function(){throw Error("XMLHTTP not available");};if(g("native-xhr")&&!g("dojo-force-activex-xhr"))e._create=function(){return new XMLHttpRequest};else if(g("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),e._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(n){try{new ActiveXObject("Microsoft.XMLHTTP"),e._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(q){}}j.addCommonMethods(e);
return e})},"dojo/errors/RequestError":function(){define(["./create"],function(c){return c("RequestError",function(c,b){this.response=b})})},"dojo/errors/create":function(){define(["../_base/lang"],function(c){return function(d,b,j,g){var j=j||Error,l=function(c){if(j===Error){Error.captureStackTrace&&Error.captureStackTrace(this,l);var d=Error.call(this,c),g;for(g in d)d.hasOwnProperty(g)&&(this[g]=d[g]);this.message=c;this.stack=d.stack}else j.apply(this,arguments);b&&b.apply(this,arguments)};l.prototype=
c.delegate(j.prototype,g);l.prototype.name=d;return l.prototype.constructor=l}})},"dojo/request/watch":function(){define("./util,../errors/RequestTimeoutError,../errors/CancelError,../_base/array,../_base/window,require".split(","),function(c,d,b,j,g,l){function e(){for(var b=+new Date,c=0,e;c<a.length&&(e=a[c]);c++){var g=e.response,j=g.options;if(e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(g))a.splice(c--,1),k._onAction&&k._onAction();else if(e.isReady&&e.isReady(g))a.splice(c--,1),e.handleResponse(g),
k._onAction&&k._onAction();else if(e.startTime&&e.startTime+(j.timeout||0)<b)a.splice(c--,1),e.cancel(new d("Timeout exceeded",g)),k._onAction&&k._onAction()}k._onInFlight&&k._onInFlight(e);a.length||(clearInterval(i),i=null)}function k(b){if(b.response.options.timeout)b.startTime=+new Date;b.isFulfilled()||(a.push(b),i||(i=setInterval(e,50)),b.response.options.sync&&e())}var i=null,a=[];k.cancelAll=function(){try{j.forEach(a,function(a){try{a.cancel(new b("All requests canceled."))}catch(c){}})}catch(c){}};
g&&l&&g.doc.attachEvent&&l(g.global,"unload",function(){k.cancelAll()});return k})},"dojo/request/util":function(){define("exports,../errors/RequestError,../errors/CancelError,../Deferred,../io-query,../_base/array,../_base/lang".split(","),function(c,d,b,j,g,l,e){function k(a){return i(a)}c.deepCopy=function(a,b){for(var d in b){var e=a[d],g=b[d];e!==g&&(e&&"object"===typeof e&&g&&"object"===typeof g?c.deepCopy(e,g):a[d]=g)}return a};c.deepCreate=function(a,b){var b=b||{},d=e.delegate(a),g,i;for(g in a)(i=
a[g])&&"object"===typeof i&&(d[g]=c.deepCreate(i,b[g]));return c.deepCopy(d,b)};var i=Object.freeze||function(a){return a};c.deferred=function(a,f,g,m,l,q){var r=new j(function(c){f&&f(r,a);return!c||!(c instanceof d)&&!(c instanceof b)?new b("Request canceled",a):c});r.response=a;r.isValid=g;r.isReady=m;r.handleResponse=l;g=r.then(k).otherwise(function(b){b.response=a;throw b;});c.notify&&g.then(e.hitch(c.notify,"emit","load"),e.hitch(c.notify,"emit","error"));m=g.then(function(a){return a.data||
a.text});g=i(e.delegate(m,{response:g}));q&&r.then(function(a){q.call(r,a)},function(b){q.call(r,a,b)});r.promise=g;r.then=g.then;return r};c.addCommonMethods=function(a,b){l.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,d){d=e.delegate(d||{});d.method=b;return a(c,d)}})};c.parseArgs=function(a,b,c){var d=b.data,e=b.query;if(d&&!c&&"object"===typeof d)b.data=g.objectToQuery(d);e?("object"===typeof e&&(e=g.objectToQuery(e)),b.preventCache&&
(e+=(e?"&":"")+"request.preventCache="+ +new Date)):b.preventCache&&(e="request.preventCache="+ +new Date);a&&e&&(a+=(~a.indexOf("?")?"&":"?")+e);return{url:a,options:b,getHeader:function(){return null}}};c.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/CancelError":function(){define(["./create"],function(c){return c("CancelError",null,null,{dojoType:"cancel"})})},"dojo/Deferred":function(){define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError",
"./promise/Promise","require"],function(c,d,b,j,g){var l=Object.freeze||function(){},e=function(a,b,c,d){for(var e=0;e<a.length;e++)k(a[e],b,c,d)},k=function(b,c,d){var e=b[c],f=b.deferred;if(e)try{var g=e(d);0===c?"undefined"!==typeof g&&a(f,c,g):g&&"function"===typeof g.then?(b.cancel=g.cancel,g.then(i(f,1),i(f,2),i(f,0))):a(f,1,g)}catch(j){a(f,2,j)}else a(f,c,d)},i=function(b,c){return function(d){a(b,c,d)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);
break;case 2:a.reject(c)}},f=function(a){var c=this.promise=new j,d=this,g,i,o=!1,u=[];this.isResolved=c.isResolved=function(){return 1===g};this.isRejected=c.isRejected=function(){return 2===g};this.isFulfilled=c.isFulfilled=function(){return!!g};this.isCanceled=c.isCanceled=function(){return o};this.progress=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");return c}e(u,0,a,null,d);return c};this.resolve=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");
return c}e(u,g=1,i=a,null,d);u=null;return c};var w=this.reject=function(a,b){if(g){if(!0===b)throw Error("This deferred has already been fulfilled.");return c}e(u,g=2,i=a,void 0,d);u=null;return c};this.then=c.then=function(a,b,d){var e=[d,a,b];e.cancel=c.cancel;e.deferred=new f(function(a){return e.cancel&&e.cancel(a)});g&&!u?k(e,g,i,void 0):u.push(e);return e.deferred.promise};this.cancel=c.cancel=function(c,d){if(g){if(!0===d)throw Error("This deferred has already been fulfilled.");}else{if(a)var e=
a(c),c="undefined"===typeof e?c:e;o=!0;if(g){if(2===g&&i===c)return c}else return"undefined"===typeof c&&(c=new b),w(c),c}};l(c)};f.prototype.toString=function(){return"[object Deferred]"};g&&g(f);return f})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(c){function d(){throw new TypeError("abstract");}return c.extend(function(){},{then:function(){d()},cancel:function(){d()},isResolved:function(){d()},isRejected:function(){d()},isFulfilled:function(){d()},isCanceled:function(){d()},
always:function(b){return this.then(b,b)},otherwise:function(b){return this.then(null,b)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/io-query":function(){define("dojo/io-query",["./_base/lang"],function(c){var d={};return{objectToQuery:function(b){var j=encodeURIComponent,g=[],l;for(l in b){var e=b[l];if(e!=d[l]){var k=j(l)+"=";if(c.isArray(e))for(var i=0,a=e.length;i<a;++i)g.push(k+j(e[i]));else g.push(k+j(e))}}return g.join("&")},
queryToObject:function(b){for(var d=decodeURIComponent,b=b.split("&"),g={},l,e,k=0,i=b.length;k<i;++k)if(e=b[k],e.length){var a=e.indexOf("=");0>a?(l=d(e),e=""):(l=d(e.slice(0,a)),e=d(e.slice(a+1)));"string"==typeof g[l]&&(g[l]=[g[l]]);c.isArray(g[l])?g[l].push(e):g[l]=e}return g}}})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(c,d){return c("RequestTimeoutError",null,d,{dojoType:"timeout"})})},"dojo/request/handlers":function(){define(["../json","../_base/kernel",
"../_base/array","../has"],function(c,d,b,j){function g(b){var a=k[b.options.handleAs];b.data=a?a(b):b.data||b.text;return b}j.add("activex","undefined"!==typeof ActiveXObject);var l;if(j("activex")){var e=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];l=function(c){var a=c.data;if(!a||!a.documentElement){var d=c.text;b.some(e,function(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(d);a=c}catch(e){return!1}return!0})}return a}}var k={javascript:function(b){return d.eval(b.text||
"")},json:function(b){return c.parse(b.text||null)},xml:l};g.register=function(b,a){k[b]=a};return g})},"dojo/json":function(){define(["./has"],function(c){var d="undefined"!=typeof JSON;c.add("json-parse",d);c.add("json-stringify",d&&'{"a":1}'==JSON.stringify({a:0},function(b,c){return c||1}));if(c("json-stringify"))return JSON;var b=function(b){return('"'+b.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,
"\\r")};return{parse:c("json-parse")?JSON.parse:function(b,c){if(c&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(b))throw new SyntaxError("Invalid characters in JSON");return eval("("+b+")")},stringify:function(c,d,l){function e(c,a,f){d&&(c=d(f,c));var h;h=typeof c;if("number"==h)return isFinite(c)?c+"":"null";if("boolean"==h)return c+"";if(null===c)return"null";if("string"==typeof c)return b(c);if("function"==h||"undefined"==h)return k;
if("function"==typeof c.toJSON)return e(c.toJSON(f),a,f);if(c instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,d){a=c["getUTC"+b]()+(d?1:0);return 10>a?"0"+a:a});if(c.valueOf()!==c)return e(c.valueOf(),a,f);var j=l?a+l:"",n=l?" ":"",q=l?"\n":"";if(c instanceof Array){for(var n=c.length,r=[],f=0;f<n;f++)h=e(c[f],j,f),"string"!=typeof h&&(h="null"),r.push(q+j+h);return"["+r.join(",")+q+a+"]"}r=[];for(f in c){var o;if(c.hasOwnProperty(f)){if("number"==
typeof f)o='"'+f+'"';else if("string"==typeof f)o=b(f);else continue;h=e(c[f],j,f);"string"==typeof h&&r.push(q+j+o+":"+n+h)}}return"{"+r.join(",")+q+a+"}"}var k;"string"==typeof d&&(l=d,d=null);return e(c,"","")}}})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();